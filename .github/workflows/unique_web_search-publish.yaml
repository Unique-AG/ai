name: "[unique_web_search ðŸ“¦] Publish to PyPI"

on:
  workflow_dispatch:
  push:
    # Both conditions must be met (AND logic):
    # 1. Push must be to main branch
    # 2. Push must include changes to web_search/** files
    paths:
      - 'tool_packages/unique_web_search/**'
    branches:
      - main

env:
  PACKAGE_NAME: unique_web_search
  PACKAGE_DIR: ./tool_packages/unique_web_search
    
jobs:
  build-and-publish:
    name: Build distribution ðŸ“¦
    runs-on: ubuntu-latest

    steps:
    - name: Check out code
      uses: actions/checkout@v4

    - name: Publish to PyPI (uv)
      uses: ./.github/actions/publish-to-pypi-with-uv
      with:
        package_dir: ${{ env.PACKAGE_DIR }}
        package_name: ${{ env.PACKAGE_NAME }}
        python_version: '3.12'
        check_version: 'true'
        pypi_token: ${{ secrets.PYPI_TOKEN }}
    