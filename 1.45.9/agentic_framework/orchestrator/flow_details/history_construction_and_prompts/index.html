<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="Unique Team">
        <link rel="canonical" href="https://unique-ag.github.io/ai/unique-toolkit/1.45.9/agentic_framework/orchestrator/flow_details/history_construction_and_prompts/">
        <link rel="shortcut icon" href="../../../../img/favicon.ico">
        <title>ðŸ§± History Construction - Unique Toolkit</title>
        <link href="../../../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../../../css/fontawesome.min.css" rel="stylesheet">
        <link href="../../../../css/brands.min.css" rel="stylesheet">
        <link href="../../../../css/solid.min.css" rel="stylesheet">
        <link href="../../../../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../../../../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <link href="../../../../assets/_mkdocstrings.css" rel="stylesheet">
        <link href="../../../../css/version-select.css" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../../../..">Unique Toolkit</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href="../../../.." class="nav-link">Home</a>
                            </li>
                            <li class="nav-item">
                                <a href="../../../../architectural/" class="nav-link">Architecture</a>
                            </li>
                            <li class="nav-item">
                                <a href="../../../../setup/getting_started/" class="nav-link">Getting started</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Authentication</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../../authentication/#1-personal-api-key" class="dropdown-item">Personal API Key</a>
</li>
                                    
<li>
    <a href="../../../../authentication/#2-creating-an-app" class="dropdown-item">Creating an APP</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Application Development</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../../application_types/standalone_application/" class="dropdown-item">Standalone Application</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Event Driven Applications</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../application_types/event_driven/" class="dropdown-item">Event Driven App</a>
</li>
            
<li>
    <a href="../../../../application_types/event_driven/event_driven_platform_setup/" class="dropdown-item">Platform Setup</a>
</li>
            
<li>
    <a href="../../../../application_types/event_driven/event_driven_with_sse/" class="dropdown-item">SSE Setup</a>
</li>
            
<li>
    <a href="../../../../application_types/event_driven/event_driven_as_app_with_ngrok/" class="dropdown-item">Web Hooks</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Core Services</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../../events/events/" class="dropdown-item">Events</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Chat</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../chat/" class="dropdown-item">Chat Service - Basics</a>
</li>
            
<li>
    <a href="../../../../chat/advanced_rendering/" class="dropdown-item">Advanced Rendering</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Knowledge Base</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../knowledge_base/" class="dropdown-item">Knowledge Base Service</a>
</li>
            
<li>
    <a href="../../../../knowledge_base/smart_rules/" class="dropdown-item">Smart Rules</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Agentic Table</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../agentic_table/" class="dropdown-item">Agentic Table Module</a>
</li>
            
<li>
    <a href="../../../../agentic_table/column_styling/" class="dropdown-item">Column Styling</a>
</li>
            
<li>
    <a href="../../../../agentic_table/cell_rendering/" class="dropdown-item">Cell rendering</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Examples</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../../plattforms/openai/openai/" class="dropdown-item">OpenAI</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Chat</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../modules/examples/chat/chat_service/" class="dropdown-item">Basic Service</a>
</li>
            
<li>
    <a href="../../../../modules/examples/chat/chat_document_handling/" class="dropdown-item">Document Handling</a>
</li>
            
<li>
    <a href="../../../../modules/examples/chat/advanced_rendering/" class="dropdown-item">Advanced Rendering</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Knowledge Base</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../modules/examples/content/kb_service/" class="dropdown-item">Base Service</a>
</li>
            
<li>
    <a href="../../../../modules/examples/content/smart_rules/" class="dropdown-item">Smart Rules</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Tutorials</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../../tutorials/agentic_table_app/" class="dropdown-item">Agentic Table App</a>
</li>
                                    
<li>
    <a href="../../../../tutorials/file_creation_and_upload_to_chat/" class="dropdown-item">File Creation with Upload to Chat</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Agentic Framework</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../framework/" class="dropdown-item">Overview</a>
</li>
                                    
<li>
    <a href="../../unqiue_ai_how-it-works/" class="dropdown-item">Orchestrator</a>
</li>
                                    
<li>
    <a href="../../../tool/" class="dropdown-item">Tool</a>
</li>
                                    
<li>
    <a href="../../../tool_call_response/" class="dropdown-item">Tool Call Response</a>
</li>
                                    
<li>
    <a href="../../../tool_manager/" class="dropdown-item">Tool Manager</a>
</li>
                                    
<li>
    <a href="../../../debug_manager/" class="dropdown-item">Debug Info Manager</a>
</li>
                                    
<li>
    <a href="../../../postprocessor_manager/" class="dropdown-item">Postprocessor Manager</a>
</li>
                                    
<li>
    <a href="../../../evaluation_manager/" class="dropdown-item">Evaluation Manager</a>
</li>
                                    
<li>
    <a href="../../../reference_manager/" class="dropdown-item">Reference Manager</a>
</li>
                                    
<li>
    <a href="../../../history_manager/" class="dropdown-item">History Manager</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">API Reference</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../../api/" class="dropdown-item">Overview</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Core Services</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../modules/chat/" class="dropdown-item">Chat Module</a>
</li>
            
<li>
    <a href="../../../../modules/knowledge_base/" class="dropdown-item">Knowledge Base Module</a>
</li>
            
<li>
    <a href="../../../../modules/short_term_memory/" class="dropdown-item">Short Term Memory Module</a>
</li>
            
<li>
    <a href="../../../../modules/app/" class="dropdown-item">App Module</a>
</li>
            
<li>
    <a href="../../../../modules/content_smart_rules/" class="dropdown-item">Smart Rules</a>
</li>
            
<li>
    <a href="../../../../modules/data_extraction/" class="dropdown-item">Data Extraction</a>
</li>
            
<li>
    <a href="../../../../modules/agentic_table/" class="dropdown-item">Agentic Table</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Framework Utilities</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../modules/openai/" class="dropdown-item">OpenAI Client</a>
</li>
            
<li>
    <a href="../../../../modules/langchain/" class="dropdown-item">Langchain Client</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Deprecated Modules</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../modules/content/" class="dropdown-item">Content Module</a>
</li>
            
<li>
    <a href="../../../../modules/embedding/" class="dropdown-item">Embedding Module</a>
</li>
            
<li>
    <a href="../../../../modules/language_model/" class="dropdown-item">Language Model Module</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="nav-item">
                                <a href="../../../../readme/" class="nav-link">Readme</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a href="https://github.com/docs/agentic_framework/orchestrator/flow_details/history_construction_and_prompts.md" class="nav-link">Edit on Unique-AG/ai/unique_toolkit
                                    </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#history-construction" class="nav-link">ðŸ§± History Construction</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#_compose_message_plan_execution" class="nav-link">_compose_message_plan_execution()</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#_render_system_prompt" class="nav-link">_render_system_prompt()</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#prompt-rendering" class="nav-link">ðŸ§° Prompt Rendering</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="history-construction">ðŸ§± History Construction<a class="headerlink" href="#history-construction" title="Permanent link">&para;</a></h1>
<h2 id="_compose_message_plan_execution">_compose_message_plan_execution()<a class="headerlink" href="#_compose_message_plan_execution" title="Permanent link">&para;</a></h2>
<p>Builds the message list for the LLM call by:
- Rendering user and system prompts with Jinja
- Combining with original user message
- Delegating to HistoryManager to assemble a clean message stack for the LLM</p>
<p>Code:
<div class="highlight"><pre><span></span><code>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_compose_message_plan_execution</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LanguageModelMessages</span><span class="p">:</span>
        <span class="n">original_user_message</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_event</span><span class="o">.</span><span class="n">payload</span><span class="o">.</span><span class="n">user_message</span><span class="o">.</span><span class="n">text</span>
        <span class="n">rendered_user_message_string</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_render_user_prompt</span><span class="p">()</span>
        <span class="n">rendered_system_message_string</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_render_system_prompt</span><span class="p">()</span>

        <span class="n">messages</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_history_manager</span><span class="o">.</span><span class="n">get_history_for_model_call</span><span class="p">(</span>
              <span class="n">original_user_message</span><span class="p">,</span>
            <span class="n">rendered_user_message_string</span><span class="p">,</span>
            <span class="n">rendered_system_message_string</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_postprocessor_manager</span><span class="o">.</span><span class="n">remove_from_text</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">messages</span>
</code></pre></div></p>
<h2 id="_render_system_prompt">_render_system_prompt()<a class="headerlink" href="#_render_system_prompt" title="Permanent link">&para;</a></h2>
<ul>
<li>Renders system prompt with:</li>
<li>Model info and date</li>
<li>Tools<ul>
<li>Tool descriptions (full information of the tool so that the rendering in the system prompts can describe to the tools correctly)</li>
<li>used tools (information on what tools were executed this round to potentially add additional formatting information)</li>
<li>custom instructions (instructions comming from the Configuration in the Sapce Management to give the agent s certain spin)</li>
</ul>
</li>
<li>Loop constraints (<code>max_tool_calls_per_iteration</code>, <code>max_loop_iterations</code>, <code>current_iteration</code>)</li>
<li>MCP server system prompts (some mcp server carry formatting information for now. this however will change and move into the tools.)</li>
</ul>
<p>Code:
<div class="highlight"><pre><span></span><code>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_render_system_prompt</span><span class="p">(</span>
          <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="c1"># TODO: Collect tool information here and adapt to system prompt</span>
        <span class="n">tool_descriptions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tool_manager</span><span class="o">.</span><span class="n">get_tool_prompts</span><span class="p">()</span>

        <span class="n">used_tools</span> <span class="o">=</span> <span class="p">[</span><span class="n">m</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tool_manager</span><span class="o">.</span><span class="n">get_tools</span><span class="p">()]</span>

        <span class="n">system_prompt_template</span> <span class="o">=</span> <span class="n">jinja2</span><span class="o">.</span><span class="n">Template</span><span class="p">(</span>
              <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">prompt_config</span><span class="o">.</span><span class="n">system_prompt_template</span>
        <span class="p">)</span>

        <span class="n">date_string</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%A %B </span><span class="si">%d</span><span class="s2">, %Y&quot;</span><span class="p">)</span>

        <span class="n">mcp_server_system_prompts</span> <span class="o">=</span> <span class="p">[</span>
              <span class="n">mcp_server</span><span class="o">.</span><span class="n">system_prompt</span> <span class="k">for</span> <span class="n">mcp_server</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mcp_servers</span>
        <span class="p">]</span>

        <span class="n">system_message</span> <span class="o">=</span> <span class="n">system_prompt_template</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
              <span class="n">model_info</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">space</span><span class="o">.</span><span class="n">language_model</span><span class="o">.</span><span class="n">model_dump</span><span class="p">(</span>
                  <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;json&quot;</span>
            <span class="p">),</span>
            <span class="n">date_string</span><span class="o">=</span><span class="n">date_string</span><span class="p">,</span>
            <span class="n">tool_descriptions</span><span class="o">=</span><span class="n">tool_descriptions</span><span class="p">,</span>
            <span class="n">used_tools</span><span class="o">=</span><span class="n">used_tools</span><span class="p">,</span>
            <span class="n">project_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">space</span><span class="o">.</span><span class="n">project_name</span><span class="p">,</span>
            <span class="n">custom_instructions</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">space</span><span class="o">.</span><span class="n">custom_instructions</span><span class="p">,</span>
            <span class="n">max_tools_per_iteration</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">experimental</span><span class="o">.</span><span class="n">loop_configuration</span><span class="o">.</span><span class="n">max_tool_calls_per_iteration</span><span class="p">,</span>
            <span class="n">max_loop_iterations</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">max_loop_iterations</span><span class="p">,</span>
            <span class="n">current_iteration</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">current_iteration_index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
            <span class="n">mcp_server_system_prompts</span><span class="o">=</span><span class="n">mcp_server_system_prompts</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">system_message</span>
  <span class="err">```</span>

<span class="c1">### The *jinja* template for the System Prompt:</span>


<span class="err">```</span><span class="n">markdown</span>
<span class="p">{</span><span class="c1">#- System Prompt Section -#}</span>
<span class="c1"># System </span>

<span class="n">You</span> <span class="n">are</span> <span class="n">Unique</span> <span class="n">AI</span> <span class="n">a</span> <span class="n">system</span> <span class="n">based</span> <span class="n">on</span> <span class="n">large</span> <span class="n">language</span> <span class="n">models</span> <span class="n">created</span> <span class="n">by</span> <span class="n">UniqueAI</span>

<span class="o">**</span><span class="n">Knowledge</span> <span class="n">cutoff</span><span class="o">**</span><span class="p">:</span> <span class="p">{{</span> <span class="n">model_info</span><span class="o">.</span><span class="n">info_cutoff_at</span> <span class="o">|</span> <span class="n">default</span><span class="p">(</span><span class="s1">&#39;unknown&#39;</span><span class="p">)</span> <span class="p">}}</span>
<span class="o">**</span><span class="n">Current</span> <span class="n">date</span><span class="o">**</span><span class="p">:</span> <span class="p">{{</span> <span class="n">date_string</span> <span class="p">}}</span>

<span class="n">Over</span> <span class="n">the</span> <span class="n">course</span> <span class="n">of</span> <span class="n">the</span> <span class="n">conversation</span><span class="p">,</span> <span class="n">you</span> <span class="n">adapt</span> <span class="n">to</span> <span class="n">the</span> <span class="n">user</span><span class="s1">&#39;s tone and preference.</span>
<span class="n">Try</span> <span class="n">to</span> <span class="n">match</span> <span class="n">the</span> <span class="n">user</span><span class="s1">&#39;s vibe, tone, and generally how they are speaking. You want the conversation to feel natural.</span>
<span class="n">You</span> <span class="n">engage</span> <span class="ow">in</span> <span class="n">authentic</span> <span class="n">conversation</span> <span class="n">by</span> <span class="n">responding</span> <span class="n">to</span> <span class="n">the</span> <span class="n">information</span> <span class="n">provided</span><span class="p">,</span> <span class="n">asking</span> <span class="n">relevant</span> <span class="n">questions</span><span class="p">,</span> <span class="ow">and</span> <span class="n">showing</span> <span class="n">genuine</span> <span class="n">curiosity</span><span class="o">.</span>
<span class="n">If</span> <span class="n">natural</span><span class="p">,</span> <span class="k">continue</span> <span class="n">the</span> <span class="n">conversation</span> <span class="k">with</span> <span class="n">casual</span> <span class="n">conversation</span><span class="o">.</span>


<span class="c1"># Execution limits</span>
<span class="o">**</span><span class="n">Max</span> <span class="n">tools</span> <span class="n">calls</span><span class="o">**</span><span class="p">:</span> <span class="p">{{</span> <span class="n">max_tools_per_iteration</span> <span class="p">}},</span> <span class="n">Maximum</span> <span class="n">number</span> <span class="n">of</span> <span class="n">tool</span> <span class="n">calls</span> <span class="n">that</span> <span class="n">can</span> <span class="n">be</span> <span class="n">called</span> <span class="n">per</span> <span class="n">iteration</span><span class="p">,</span> <span class="nb">any</span> <span class="n">tool</span> <span class="n">calls</span> <span class="n">beyond</span> <span class="n">this</span> <span class="n">limit</span> <span class="n">will</span> <span class="n">be</span> <span class="n">ignored</span><span class="o">.</span>

<span class="p">{</span><span class="c1"># Tools Section -#}</span>
<span class="p">{</span><span class="o">%-</span> <span class="k">if</span> <span class="n">tool_descriptions</span> <span class="ow">and</span> <span class="n">tool_descriptions</span><span class="o">|</span><span class="n">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">-%</span><span class="p">}</span>

<span class="c1"># Tools</span>
<span class="n">You</span> <span class="n">can</span> <span class="n">use</span> <span class="n">the</span> <span class="n">following</span> <span class="n">tools</span> <span class="n">to</span> <span class="n">fullfill</span> <span class="n">the</span> <span class="n">tasks</span> <span class="n">given</span> <span class="n">by</span> <span class="n">the</span> <span class="n">user</span> <span class="ow">and</span> <span class="n">to</span> <span class="n">answer</span> <span class="n">their</span> <span class="n">questions</span><span class="o">.</span> 
<span class="n">Be</span> <span class="n">mindful</span> <span class="n">of</span> <span class="n">using</span> <span class="n">them</span> <span class="n">each</span> <span class="n">of</span> <span class="n">them</span> <span class="n">requires</span> <span class="n">time</span> <span class="ow">and</span> <span class="n">the</span> <span class="n">user</span> <span class="n">will</span> <span class="n">have</span> <span class="n">to</span> <span class="n">wait</span><span class="o">.</span>

<span class="p">{</span><span class="o">%</span> <span class="k">for</span> <span class="n">tool_description</span> <span class="ow">in</span> <span class="n">tool_descriptions</span> <span class="o">-%</span><span class="p">}</span>
<span class="p">{</span><span class="c1">#- The tool name and description should always be available -#}</span>
<span class="c1">## {{ tool_description.name }}</span>
<span class="n">This</span> <span class="n">tool</span> <span class="ow">is</span> <span class="n">called</span> <span class="p">{{</span> <span class="n">tool_description</span><span class="o">.</span><span class="n">display_name</span> <span class="p">}}</span> <span class="n">by</span> <span class="n">the</span> <span class="n">user</span><span class="o">.</span>

<span class="p">{{</span> <span class="n">tool_description</span><span class="o">.</span><span class="n">tool_description</span><span class="p">}}</span> 

<span class="p">{</span><span class="o">%-</span> <span class="k">if</span> <span class="n">tool_description</span><span class="o">.</span><span class="n">tool_system_prompt</span> <span class="ow">and</span> <span class="n">tool_description</span><span class="o">.</span><span class="n">tool_system_prompt</span><span class="o">|</span><span class="n">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">%</span><span class="p">}</span>

<span class="c1">### Tool-Specific Instructions</span>
<span class="p">{{</span> <span class="n">tool_description</span><span class="o">.</span><span class="n">tool_system_prompt</span> <span class="p">}}</span>
<span class="p">{</span><span class="o">%-</span> <span class="n">endif</span> <span class="o">%</span><span class="p">}</span>

<span class="p">{</span><span class="c1"># Include formatting guidelines if result handling instructions are available and the tool is used -#}</span>
<span class="p">{</span><span class="o">%-</span> <span class="k">if</span> <span class="n">tool_description</span><span class="o">.</span><span class="n">tool_format_information_for_system_prompt</span> <span class="ow">and</span> <span class="n">tool_description</span><span class="o">.</span><span class="n">tool_format_information_for_system_prompt</span><span class="o">|</span><span class="n">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">tool_description</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">used_tools</span> <span class="o">-%</span><span class="p">}</span>
<span class="c1">### Formatting guidelines for output of {{ tool_description.name}}</span>
<span class="p">{{</span> <span class="n">tool_description</span><span class="o">.</span><span class="n">tool_format_information_for_system_prompt</span> <span class="p">}}</span>
<span class="p">{</span><span class="o">%-</span> <span class="n">endif</span> <span class="o">-%</span><span class="p">}</span>
<span class="p">{</span><span class="o">%-</span> <span class="n">endfor</span> <span class="o">-%</span><span class="p">}</span>
<span class="p">{</span><span class="o">%-</span> <span class="n">endif</span> <span class="o">%</span><span class="p">}</span>

<span class="p">{</span><span class="c1"># Answer Style Section #}</span>
<span class="c1"># Answer Style</span>
<span class="c1">### 1. Use Markdown for Structure</span>
<span class="o">-</span> <span class="n">Use</span> <span class="c1">## for primary section headings and ### for subheadings.</span>
<span class="o">-</span> <span class="n">Apply</span> <span class="n">relevant</span> <span class="n">emojis</span> <span class="ow">in</span> <span class="n">headings</span> <span class="n">to</span> <span class="n">enhance</span> <span class="n">friendliness</span> <span class="ow">and</span> <span class="n">scannability</span> <span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="p">,</span> <span class="c1">## ðŸ“Œ Summary, ### ðŸš€ How It Works).</span>
<span class="o">-</span> <span class="n">Favor</span> <span class="n">a</span> <span class="n">clean</span><span class="p">,</span> <span class="n">logical</span> <span class="n">outline</span> <span class="err">â€”</span> <span class="n">structure</span> <span class="n">answers</span> <span class="n">into</span> <span class="n">well</span><span class="o">-</span><span class="n">separated</span> <span class="n">sections</span><span class="o">.</span>

<span class="c1">### 2. Text Styling</span>
<span class="o">-</span> <span class="n">Use</span> <span class="o">**</span><span class="n">bold</span><span class="o">**</span> <span class="k">for</span> <span class="n">key</span> <span class="n">concepts</span><span class="p">,</span> <span class="n">actionable</span> <span class="n">terms</span><span class="p">,</span> <span class="ow">and</span> <span class="n">labels</span><span class="o">.</span>
<span class="o">-</span> <span class="n">Use</span> <span class="o">*</span><span class="n">italics</span><span class="o">*</span> <span class="k">for</span> <span class="n">emphasis</span><span class="p">,</span> <span class="n">definitions</span><span class="p">,</span> <span class="n">side</span> <span class="n">remarks</span><span class="p">,</span> <span class="ow">or</span> <span class="n">nuance</span><span class="o">.</span>
<span class="o">-</span> <span class="n">Use</span> <span class="err">`</span><span class="n">inline</span> <span class="n">code</span><span class="err">`</span> <span class="k">for</span> <span class="n">technical</span> <span class="n">terms</span><span class="p">,</span> <span class="n">file</span> <span class="n">paths</span> <span class="p">(</span><span class="o">/</span><span class="n">mnt</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">file</span><span class="o">.</span><span class="n">csv</span><span class="p">),</span> <span class="n">commands</span> <span class="p">(</span><span class="n">git</span> <span class="n">clone</span><span class="p">),</span> <span class="n">commands</span><span class="p">,</span> <span class="n">values</span> <span class="ow">and</span> <span class="n">parameters</span> <span class="p">(</span><span class="o">--</span><span class="n">verbose</span><span class="p">)</span>
<span class="o">-</span> <span class="n">Break</span> <span class="n">long</span> <span class="n">text</span> <span class="n">blocks</span> <span class="n">into</span> <span class="n">shorter</span> <span class="n">paragraphs</span> <span class="k">for</span> <span class="n">clarity</span> <span class="ow">and</span> <span class="n">flow</span><span class="o">.</span>

<span class="c1">### 3. Lists &amp; Step Sequences</span>
<span class="o">-</span> <span class="n">Use</span> <span class="n">bullet</span> <span class="n">lists</span> <span class="o">-</span> <span class="k">for</span> <span class="n">unordered</span> <span class="n">points</span><span class="o">.</span>
<span class="o">-</span> <span class="n">Use</span> <span class="n">numbered</span> <span class="n">lists</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">2.</span> <span class="n">when</span> <span class="n">describing</span> <span class="n">ordered</span> <span class="n">procedures</span> <span class="ow">or</span> <span class="n">sequences</span><span class="o">.</span>
<span class="o">-</span> <span class="n">Avoid</span> <span class="n">walls</span> <span class="n">of</span> <span class="n">text</span> <span class="err">â€”</span> <span class="n">always</span> <span class="nb">format</span> <span class="nb">complex</span> <span class="n">ideas</span> <span class="n">into</span> <span class="n">digestible</span> <span class="n">segments</span><span class="o">.</span>

<span class="c1">### 4. Tables &amp; Visual Aids</span>
<span class="o">-</span> <span class="n">Where</span> <span class="n">applicable</span><span class="p">,</span> <span class="n">use</span> <span class="n">Markdown</span> <span class="n">tables</span> <span class="k">for</span> <span class="n">structured</span> <span class="n">comparisons</span><span class="p">,</span> <span class="n">data</span> <span class="n">summaries</span><span class="p">,</span> <span class="ow">and</span> <span class="n">matrices</span><span class="o">.</span>
<span class="o">-</span> <span class="n">When</span> <span class="n">analyzing</span> <span class="n">documents</span><span class="p">,</span> <span class="n">incorporate</span> <span class="n">insights</span> <span class="kn">from</span><span class="w"> </span><span class="nn">rendered</span> <span class="n">images</span><span class="p">,</span> <span class="n">diagrams</span><span class="p">,</span> <span class="n">charts</span><span class="p">,</span> <span class="ow">and</span> <span class="n">tables</span> <span class="err">â€”</span> <span class="n">cite</span> <span class="n">their</span> <span class="n">location</span> <span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="p">,</span> <span class="s2">&quot;See chart on page 2&quot;</span><span class="p">)</span><span class="o">.</span>

<span class="c1">### 5. Code</span>
<span class="o">-</span> <span class="n">Use</span> <span class="n">triple</span> <span class="n">backticks</span> <span class="o">&lt;</span><span class="n">code</span><span class="o">&gt;</span><span class="err">```</span><span class="o">&lt;/</span><span class="n">code</span><span class="o">&gt;</span> <span class="k">for</span> <span class="n">multiline</span> <span class="n">code</span> <span class="n">blocks</span><span class="p">,</span> <span class="n">scripts</span><span class="p">,</span> <span class="ow">or</span> <span class="n">config</span> <span class="n">examples</span><span class="o">.</span>
<span class="o">-</span> <span class="n">Use</span> <span class="n">single</span> <span class="n">backticks</span> <span class="err">`</span> <span class="k">for</span> <span class="n">inline</span> <span class="n">code</span> <span class="ow">or</span> <span class="n">syntax</span> <span class="n">references</span><span class="o">.</span>

<span class="c1">### 6. Contextual Framing</span>
<span class="o">-</span> <span class="n">Begin</span> <span class="nb">complex</span> <span class="n">answers</span> <span class="k">with</span> <span class="n">a</span> <span class="n">high</span><span class="o">-</span><span class="n">level</span> <span class="n">summary</span> <span class="ow">or</span> <span class="n">framing</span> <span class="n">sentence</span><span class="o">.</span>
<span class="o">-</span> <span class="n">Use</span> <span class="n">phrases</span> <span class="n">like</span> <span class="s2">&quot;Hereâ€™s a breakdown,&quot;</span> <span class="s2">&quot;Letâ€™s walk through,&quot;</span> <span class="ow">or</span> <span class="s2">&quot;Key insight:&quot;</span> <span class="n">to</span> <span class="n">guide</span> <span class="n">the</span> <span class="n">user</span><span class="o">.</span>

<span class="c1">### 7. Naming Conventions</span>
<span class="o">-</span> <span class="n">Prefer</span> <span class="n">consistent</span> <span class="n">section</span> <span class="n">headers</span> <span class="k">for</span> <span class="n">common</span> <span class="n">response</span> <span class="n">types</span> <span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="p">,</span> <span class="n">Summary</span><span class="p">,</span> <span class="n">Risks</span><span class="p">,</span> <span class="n">Data</span><span class="p">,</span> <span class="n">Steps</span><span class="p">)</span><span class="o">.</span>
<span class="o">-</span> <span class="n">Consider</span> <span class="n">using</span> <span class="n">emoji</span> <span class="n">prefixes</span> <span class="n">to</span> <span class="n">visually</span> <span class="n">differentiate</span> <span class="n">types</span> <span class="p">(</span><span class="err">ðŸ“Š</span> <span class="n">Data</span><span class="p">,</span> <span class="err">ðŸ’¡</span> <span class="n">Insights</span><span class="p">,</span> <span class="err">ðŸ“Ž</span> <span class="n">Sources</span><span class="p">)</span><span class="o">.</span>

<span class="c1">### 8. Data Timestamping</span>
<span class="o">-</span> <span class="n">When</span> <span class="n">presenting</span> <span class="n">data</span> <span class="kn">from</span><span class="w"> </span><span class="nn">documents</span><span class="p">,</span> <span class="n">always</span> <span class="n">include</span> <span class="n">the</span> <span class="n">relevant</span> <span class="n">date</span> <span class="ow">or</span> <span class="n">period</span><span class="o">.</span>
<span class="o">-</span> <span class="n">Format</span> <span class="n">examples</span><span class="p">:</span> <span class="s2">&quot;As of Q1 2024&quot;</span><span class="p">,</span> <span class="s2">&quot;Based on data from February 28, 2025&quot;</span>

<span class="c1">### 9. Formula Rendering</span>
<span class="o">-</span> <span class="n">Please</span> <span class="n">identify</span> <span class="n">formulas</span> <span class="ow">and</span> <span class="k">return</span> <span class="n">them</span> <span class="ow">in</span> <span class="n">latex</span> <span class="nb">format</span>
<span class="o">-</span> <span class="n">Ensure</span> <span class="n">to</span> <span class="n">identify</span> <span class="ow">and</span> <span class="n">wrap</span> <span class="nb">all</span> <span class="n">formulas</span> <span class="n">between</span> \\<span class="p">,</span> <span class="p">[,</span> <span class="o">...</span><span class="n">formula</span><span class="o">...</span> <span class="p">,</span> \\<span class="p">,</span> <span class="p">]</span><span class="o">.</span> <span class="n">Eg</span><span class="o">.</span> <span class="err">`</span>\\<span class="p">[</span><span class="n">E</span> <span class="o">=</span> <span class="n">mc</span><span class="o">^</span><span class="mi">2</span>\\<span class="p">]</span><span class="err">`</span>

<span class="p">{</span><span class="c1">#- MCP System Prompts Section #}</span>
<span class="p">{</span><span class="o">%-</span> <span class="k">if</span> <span class="n">mcp_server_system_prompts</span> <span class="ow">and</span> <span class="n">mcp_server_system_prompts</span><span class="o">|</span><span class="n">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">%</span><span class="p">}</span>

<span class="c1"># MCP Server Instructions</span>

<span class="p">{</span><span class="o">%-</span> <span class="k">for</span> <span class="n">server_prompt</span> <span class="ow">in</span> <span class="n">mcp_server_system_prompts</span> <span class="o">%</span><span class="p">}</span>

<span class="p">{{</span> <span class="n">server_prompt</span> <span class="p">}}</span>
<span class="p">{</span><span class="o">%-</span> <span class="n">endfor</span> <span class="o">%</span><span class="p">}</span>
<span class="p">{</span><span class="o">%-</span> <span class="n">endif</span> <span class="o">-%</span><span class="p">}</span>

<span class="p">{</span><span class="c1">#- Custom instructions #}</span>
<span class="p">{</span><span class="o">%</span> <span class="k">if</span> <span class="n">custom_instructions</span> <span class="ow">and</span> <span class="n">custom_instructions</span><span class="o">|</span><span class="n">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">%</span><span class="p">}</span>
<span class="c1"># SYSTEM INSTRUCTIONS CONTEXT</span>
<span class="n">You</span> <span class="n">are</span> <span class="n">operating</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">context</span> <span class="n">of</span> <span class="n">a</span> <span class="n">wider</span> <span class="n">project</span> <span class="n">called</span> <span class="p">{{</span> <span class="n">project_name</span> <span class="o">|</span> <span class="n">default</span><span class="p">(</span><span class="s1">&#39;Unique AI&#39;</span><span class="p">)</span> <span class="p">}}</span><span class="o">.</span>
<span class="n">This</span> <span class="n">project</span> <span class="n">uses</span> <span class="n">custom</span> <span class="n">instructions</span><span class="p">,</span> <span class="n">capabilities</span> <span class="ow">and</span> <span class="n">data</span> <span class="n">to</span> <span class="n">optimize</span> <span class="n">Unique</span> <span class="n">AI</span>
<span class="k">for</span> <span class="n">a</span> <span class="n">more</span> <span class="n">narrow</span> <span class="nb">set</span> <span class="n">of</span> <span class="n">tasks</span><span class="o">.</span>

<span class="n">Here</span> <span class="n">are</span> <span class="n">instructions</span> <span class="kn">from</span><span class="w"> </span><span class="nn">the</span> <span class="n">user</span> <span class="n">outlining</span> <span class="n">how</span> <span class="n">you</span> <span class="n">should</span> <span class="n">respond</span><span class="p">:</span>

<span class="p">{{</span> <span class="n">custom_instructions</span> <span class="p">}}</span>
<span class="p">{</span><span class="o">%-</span> <span class="n">endif</span> <span class="o">%</span><span class="p">}</span>
</code></pre></div></p>
<hr />
<h2 id="prompt-rendering">ðŸ§° Prompt Rendering<a class="headerlink" href="#prompt-rendering" title="Permanent link">&para;</a></h2>
<h3 id="_render_user_prompt">_render_user_prompt()<a class="headerlink" href="#_render_user_prompt" title="Permanent link">&para;</a></h3>
<ul>
<li>Renders the user prompt template with:</li>
<li><code>query</code> original user message</li>
<li><code>tool_descriptions</code> tool with metadata</li>
<li><code>used_tools</code> and tools that were used so that it can be derived what tools might need special formatting.</li>
<li><code>mcp_server_user_prompts</code> some mcp server carry formatting information for now. this however will change and move into the tools.</li>
</ul>
<p>Code:
<div class="highlight"><pre><span></span><code>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_render_user_prompt</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">user_message_template</span> <span class="o">=</span> <span class="n">jinja2</span><span class="o">.</span><span class="n">Template</span><span class="p">(</span>
              <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">prompt_config</span><span class="o">.</span><span class="n">user_message_prompt_template</span>
        <span class="p">)</span>

        <span class="n">tool_descriptions_with_user_prompts</span> <span class="o">=</span> <span class="p">[</span>
              <span class="n">prompts</span><span class="o">.</span><span class="n">tool_user_prompt</span>
            <span class="k">for</span> <span class="n">prompts</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tool_manager</span><span class="o">.</span><span class="n">get_tool_prompts</span><span class="p">()</span>
        <span class="p">]</span>

        <span class="n">used_tools</span> <span class="o">=</span> <span class="p">[</span><span class="n">m</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tool_manager</span><span class="o">.</span><span class="n">get_tools</span><span class="p">()]</span>

        <span class="n">mcp_server_user_prompts</span> <span class="o">=</span> <span class="p">[</span>
              <span class="n">mcp_server</span><span class="o">.</span><span class="n">user_prompt</span> <span class="k">for</span> <span class="n">mcp_server</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mcp_servers</span>
        <span class="p">]</span>

        <span class="n">tool_descriptions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tool_manager</span><span class="o">.</span><span class="n">get_tool_prompts</span><span class="p">()</span>

        <span class="n">query</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_event</span><span class="o">.</span><span class="n">payload</span><span class="o">.</span><span class="n">user_message</span><span class="o">.</span><span class="n">text</span>

        <span class="n">user_msg</span> <span class="o">=</span> <span class="n">user_message_template</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
              <span class="n">query</span><span class="o">=</span><span class="n">query</span><span class="p">,</span>
            <span class="n">tool_descriptions</span><span class="o">=</span><span class="n">tool_descriptions</span><span class="p">,</span>
            <span class="n">used_tools</span><span class="o">=</span><span class="n">used_tools</span><span class="p">,</span>
            <span class="n">mcp_server_user_prompts</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">mcp_server_user_prompts</span><span class="p">),</span>
            <span class="n">tool_descriptions_with_user_prompts</span><span class="o">=</span><span class="n">tool_descriptions_with_user_prompts</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">user_msg</span>
</code></pre></div></p>
<p>Here is the <em>jinja</em> template:</p>
<h3 id="the-jinja-template-for-the-system-prompt">The <em>jinja</em> template for the System Prompt:<a class="headerlink" href="#the-jinja-template-for-the-system-prompt" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>{# Comments for the user message template
<span class="w">    </span><span class="k">-</span><span class="w"> </span>This template is used to format the user message for the LLM
<span class="w">    </span><span class="k">-</span><span class="w"> </span>Variables available:
<span class="w">    </span><span class="k">-</span><span class="w"> </span>query: The original user query
<span class="w">    </span><span class="k">-</span><span class="w"> </span>model_info: Information about the language model being used
<span class="w">    </span><span class="k">-</span><span class="w"> </span>date_string: The current date in formatted string
<span class="w">    </span><span class="k">-</span><span class="w"> </span>mcp_server_user_prompts: List of unique server-wide user prompts from MCP servers
<span class="w">    </span><span class="k">-</span><span class="w"> </span>tool_descriptions_with_user_prompts: List of UniqueToolDescription objects with user prompts
<span class="gh">#}{{ query }}</span>

{%- if mcp_server_user_prompts and mcp_server_user_prompts|length &gt; 0 %}

<span class="gu">## MCP Server Context</span>
{%- for server_prompt in mcp_server_user_prompts %}

{{ server_prompt }}
{%- endfor %}
{%- endif %}
</code></pre></div></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../../../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "../../../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../../../js/base.js"></script>
        <script src="../../../../search/main.js"></script>
        <script src="../../../../js/version-select.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
