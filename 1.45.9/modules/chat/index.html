<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="Unique Team">
        <link rel="canonical" href="https://unique-ag.github.io/ai/unique-toolkit/1.45.9/modules/chat/">
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Chat Module - Unique Toolkit</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/fontawesome.min.css" rel="stylesheet">
        <link href="../../css/brands.min.css" rel="stylesheet">
        <link href="../../css/solid.min.css" rel="stylesheet">
        <link href="../../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <link href="../../assets/_mkdocstrings.css" rel="stylesheet">
        <link href="../../css/version-select.css" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">Unique Toolkit</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href="../.." class="nav-link">Home</a>
                            </li>
                            <li class="nav-item">
                                <a href="../../architectural/" class="nav-link">Architecture</a>
                            </li>
                            <li class="nav-item">
                                <a href="../../setup/getting_started/" class="nav-link">Getting started</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Authentication</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../authentication/#1-personal-api-key" class="dropdown-item">Personal API Key</a>
</li>
                                    
<li>
    <a href="../../authentication/#2-creating-an-app" class="dropdown-item">Creating an APP</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Application Development</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../application_types/standalone_application/" class="dropdown-item">Standalone Application</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Event Driven Applications</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../application_types/event_driven/" class="dropdown-item">Event Driven App</a>
</li>
            
<li>
    <a href="../../application_types/event_driven/event_driven_platform_setup/" class="dropdown-item">Platform Setup</a>
</li>
            
<li>
    <a href="../../application_types/event_driven/event_driven_with_sse/" class="dropdown-item">SSE Setup</a>
</li>
            
<li>
    <a href="../../application_types/event_driven/event_driven_as_app_with_ngrok/" class="dropdown-item">Web Hooks</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Core Services</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../events/events/" class="dropdown-item">Events</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Chat</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../chat/" class="dropdown-item">Chat Service - Basics</a>
</li>
            
<li>
    <a href="../../chat/advanced_rendering/" class="dropdown-item">Advanced Rendering</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Knowledge Base</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../knowledge_base/" class="dropdown-item">Knowledge Base Service</a>
</li>
            
<li>
    <a href="../../knowledge_base/smart_rules/" class="dropdown-item">Smart Rules</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Agentic Table</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../agentic_table/" class="dropdown-item">Agentic Table Module</a>
</li>
            
<li>
    <a href="../../agentic_table/column_styling/" class="dropdown-item">Column Styling</a>
</li>
            
<li>
    <a href="../../agentic_table/cell_rendering/" class="dropdown-item">Cell rendering</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Examples</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../plattforms/openai/openai/" class="dropdown-item">OpenAI</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Chat</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../examples/chat/chat_service/" class="dropdown-item">Basic Service</a>
</li>
            
<li>
    <a href="../examples/chat/chat_document_handling/" class="dropdown-item">Document Handling</a>
</li>
            
<li>
    <a href="../examples/chat/advanced_rendering/" class="dropdown-item">Advanced Rendering</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Knowledge Base</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../examples/content/kb_service/" class="dropdown-item">Base Service</a>
</li>
            
<li>
    <a href="../examples/content/smart_rules/" class="dropdown-item">Smart Rules</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Tutorials</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../tutorials/agentic_table_app/" class="dropdown-item">Agentic Table App</a>
</li>
                                    
<li>
    <a href="../../tutorials/file_creation_and_upload_to_chat/" class="dropdown-item">File Creation with Upload to Chat</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Agentic Framework</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../agentic_framework/framework/" class="dropdown-item">Overview</a>
</li>
                                    
<li>
    <a href="../../agentic_framework/orchestrator/unqiue_ai_how-it-works/" class="dropdown-item">Orchestrator</a>
</li>
                                    
<li>
    <a href="../../agentic_framework/tool/" class="dropdown-item">Tool</a>
</li>
                                    
<li>
    <a href="../../agentic_framework/tool_call_response/" class="dropdown-item">Tool Call Response</a>
</li>
                                    
<li>
    <a href="../../agentic_framework/tool_manager/" class="dropdown-item">Tool Manager</a>
</li>
                                    
<li>
    <a href="../../agentic_framework/debug_manager/" class="dropdown-item">Debug Info Manager</a>
</li>
                                    
<li>
    <a href="../../agentic_framework/postprocessor_manager/" class="dropdown-item">Postprocessor Manager</a>
</li>
                                    
<li>
    <a href="../../agentic_framework/evaluation_manager/" class="dropdown-item">Evaluation Manager</a>
</li>
                                    
<li>
    <a href="../../agentic_framework/reference_manager/" class="dropdown-item">Reference Manager</a>
</li>
                                    
<li>
    <a href="../../agentic_framework/history_manager/" class="dropdown-item">History Manager</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle active" aria-current="page" role="button" data-bs-toggle="dropdown"  aria-expanded="false">API Reference</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../api/" class="dropdown-item">Overview</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Core Services</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="./" class="dropdown-item active" aria-current="page">Chat Module</a>
</li>
            
<li>
    <a href="../knowledge_base/" class="dropdown-item">Knowledge Base Module</a>
</li>
            
<li>
    <a href="../short_term_memory/" class="dropdown-item">Short Term Memory Module</a>
</li>
            
<li>
    <a href="../app/" class="dropdown-item">App Module</a>
</li>
            
<li>
    <a href="../content_smart_rules/" class="dropdown-item">Smart Rules</a>
</li>
            
<li>
    <a href="../data_extraction/" class="dropdown-item">Data Extraction</a>
</li>
            
<li>
    <a href="../agentic_table/" class="dropdown-item">Agentic Table</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Framework Utilities</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../openai/" class="dropdown-item">OpenAI Client</a>
</li>
            
<li>
    <a href="../langchain/" class="dropdown-item">Langchain Client</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Deprecated Modules</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../content/" class="dropdown-item">Content Module</a>
</li>
            
<li>
    <a href="../embedding/" class="dropdown-item">Embedding Module</a>
</li>
            
<li>
    <a href="../language_model/" class="dropdown-item">Language Model Module</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="nav-item">
                                <a href="../../readme/" class="nav-link">Readme</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../../api/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../knowledge_base/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="https://github.com/docs/modules/chat.md" class="nav-link">Edit on Unique-AG/ai/unique_toolkit
                                    </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            
            <li class="nav-item" data-bs-level="2"><a href="#unique_toolkit.services.chat_service" class="nav-link">chat_service</a>
              <ul class="nav flex-column">
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h3 id="service">Service<a class="headerlink" href="#service" title="Permanent link">&para;</a></h3>


<div class="doc doc-object doc-module">



<h2 id="unique_toolkit.services.chat_service" class="doc doc-heading">
            <code>unique_toolkit.services.chat_service</code>


<a href="#unique_toolkit.services.chat_service" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">










  <div class="doc doc-children">









<div class="doc doc-object doc-class">



<h3 id="unique_toolkit.services.chat_service.ChatService" class="doc doc-heading">
            <code>ChatService</code>


<a href="#unique_toolkit.services.chat_service.ChatService" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="unique_toolkit.chat.deprecated.service.ChatServiceDeprecated">ChatServiceDeprecated</span></code></p>



        <p>Provides all functionalities to manage the chat session.</p>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 108</span>
<span class="normal"> 109</span>
<span class="normal"> 110</span>
<span class="normal"> 111</span>
<span class="normal"> 112</span>
<span class="normal"> 113</span>
<span class="normal"> 114</span>
<span class="normal"> 115</span>
<span class="normal"> 116</span>
<span class="normal"> 117</span>
<span class="normal"> 118</span>
<span class="normal"> 119</span>
<span class="normal"> 120</span>
<span class="normal"> 121</span>
<span class="normal"> 122</span>
<span class="normal"> 123</span>
<span class="normal"> 124</span>
<span class="normal"> 125</span>
<span class="normal"> 126</span>
<span class="normal"> 127</span>
<span class="normal"> 128</span>
<span class="normal"> 129</span>
<span class="normal"> 130</span>
<span class="normal"> 131</span>
<span class="normal"> 132</span>
<span class="normal"> 133</span>
<span class="normal"> 134</span>
<span class="normal"> 135</span>
<span class="normal"> 136</span>
<span class="normal"> 137</span>
<span class="normal"> 138</span>
<span class="normal"> 139</span>
<span class="normal"> 140</span>
<span class="normal"> 141</span>
<span class="normal"> 142</span>
<span class="normal"> 143</span>
<span class="normal"> 144</span>
<span class="normal"> 145</span>
<span class="normal"> 146</span>
<span class="normal"> 147</span>
<span class="normal"> 148</span>
<span class="normal"> 149</span>
<span class="normal"> 150</span>
<span class="normal"> 151</span>
<span class="normal"> 152</span>
<span class="normal"> 153</span>
<span class="normal"> 154</span>
<span class="normal"> 155</span>
<span class="normal"> 156</span>
<span class="normal"> 157</span>
<span class="normal"> 158</span>
<span class="normal"> 159</span>
<span class="normal"> 160</span>
<span class="normal"> 161</span>
<span class="normal"> 162</span>
<span class="normal"> 163</span>
<span class="normal"> 164</span>
<span class="normal"> 165</span>
<span class="normal"> 166</span>
<span class="normal"> 167</span>
<span class="normal"> 168</span>
<span class="normal"> 169</span>
<span class="normal"> 170</span>
<span class="normal"> 171</span>
<span class="normal"> 172</span>
<span class="normal"> 173</span>
<span class="normal"> 174</span>
<span class="normal"> 175</span>
<span class="normal"> 176</span>
<span class="normal"> 177</span>
<span class="normal"> 178</span>
<span class="normal"> 179</span>
<span class="normal"> 180</span>
<span class="normal"> 181</span>
<span class="normal"> 182</span>
<span class="normal"> 183</span>
<span class="normal"> 184</span>
<span class="normal"> 185</span>
<span class="normal"> 186</span>
<span class="normal"> 187</span>
<span class="normal"> 188</span>
<span class="normal"> 189</span>
<span class="normal"> 190</span>
<span class="normal"> 191</span>
<span class="normal"> 192</span>
<span class="normal"> 193</span>
<span class="normal"> 194</span>
<span class="normal"> 195</span>
<span class="normal"> 196</span>
<span class="normal"> 197</span>
<span class="normal"> 198</span>
<span class="normal"> 199</span>
<span class="normal"> 200</span>
<span class="normal"> 201</span>
<span class="normal"> 202</span>
<span class="normal"> 203</span>
<span class="normal"> 204</span>
<span class="normal"> 205</span>
<span class="normal"> 206</span>
<span class="normal"> 207</span>
<span class="normal"> 208</span>
<span class="normal"> 209</span>
<span class="normal"> 210</span>
<span class="normal"> 211</span>
<span class="normal"> 212</span>
<span class="normal"> 213</span>
<span class="normal"> 214</span>
<span class="normal"> 215</span>
<span class="normal"> 216</span>
<span class="normal"> 217</span>
<span class="normal"> 218</span>
<span class="normal"> 219</span>
<span class="normal"> 220</span>
<span class="normal"> 221</span>
<span class="normal"> 222</span>
<span class="normal"> 223</span>
<span class="normal"> 224</span>
<span class="normal"> 225</span>
<span class="normal"> 226</span>
<span class="normal"> 227</span>
<span class="normal"> 228</span>
<span class="normal"> 229</span>
<span class="normal"> 230</span>
<span class="normal"> 231</span>
<span class="normal"> 232</span>
<span class="normal"> 233</span>
<span class="normal"> 234</span>
<span class="normal"> 235</span>
<span class="normal"> 236</span>
<span class="normal"> 237</span>
<span class="normal"> 238</span>
<span class="normal"> 239</span>
<span class="normal"> 240</span>
<span class="normal"> 241</span>
<span class="normal"> 242</span>
<span class="normal"> 243</span>
<span class="normal"> 244</span>
<span class="normal"> 245</span>
<span class="normal"> 246</span>
<span class="normal"> 247</span>
<span class="normal"> 248</span>
<span class="normal"> 249</span>
<span class="normal"> 250</span>
<span class="normal"> 251</span>
<span class="normal"> 252</span>
<span class="normal"> 253</span>
<span class="normal"> 254</span>
<span class="normal"> 255</span>
<span class="normal"> 256</span>
<span class="normal"> 257</span>
<span class="normal"> 258</span>
<span class="normal"> 259</span>
<span class="normal"> 260</span>
<span class="normal"> 261</span>
<span class="normal"> 262</span>
<span class="normal"> 263</span>
<span class="normal"> 264</span>
<span class="normal"> 265</span>
<span class="normal"> 266</span>
<span class="normal"> 267</span>
<span class="normal"> 268</span>
<span class="normal"> 269</span>
<span class="normal"> 270</span>
<span class="normal"> 271</span>
<span class="normal"> 272</span>
<span class="normal"> 273</span>
<span class="normal"> 274</span>
<span class="normal"> 275</span>
<span class="normal"> 276</span>
<span class="normal"> 277</span>
<span class="normal"> 278</span>
<span class="normal"> 279</span>
<span class="normal"> 280</span>
<span class="normal"> 281</span>
<span class="normal"> 282</span>
<span class="normal"> 283</span>
<span class="normal"> 284</span>
<span class="normal"> 285</span>
<span class="normal"> 286</span>
<span class="normal"> 287</span>
<span class="normal"> 288</span>
<span class="normal"> 289</span>
<span class="normal"> 290</span>
<span class="normal"> 291</span>
<span class="normal"> 292</span>
<span class="normal"> 293</span>
<span class="normal"> 294</span>
<span class="normal"> 295</span>
<span class="normal"> 296</span>
<span class="normal"> 297</span>
<span class="normal"> 298</span>
<span class="normal"> 299</span>
<span class="normal"> 300</span>
<span class="normal"> 301</span>
<span class="normal"> 302</span>
<span class="normal"> 303</span>
<span class="normal"> 304</span>
<span class="normal"> 305</span>
<span class="normal"> 306</span>
<span class="normal"> 307</span>
<span class="normal"> 308</span>
<span class="normal"> 309</span>
<span class="normal"> 310</span>
<span class="normal"> 311</span>
<span class="normal"> 312</span>
<span class="normal"> 313</span>
<span class="normal"> 314</span>
<span class="normal"> 315</span>
<span class="normal"> 316</span>
<span class="normal"> 317</span>
<span class="normal"> 318</span>
<span class="normal"> 319</span>
<span class="normal"> 320</span>
<span class="normal"> 321</span>
<span class="normal"> 322</span>
<span class="normal"> 323</span>
<span class="normal"> 324</span>
<span class="normal"> 325</span>
<span class="normal"> 326</span>
<span class="normal"> 327</span>
<span class="normal"> 328</span>
<span class="normal"> 329</span>
<span class="normal"> 330</span>
<span class="normal"> 331</span>
<span class="normal"> 332</span>
<span class="normal"> 333</span>
<span class="normal"> 334</span>
<span class="normal"> 335</span>
<span class="normal"> 336</span>
<span class="normal"> 337</span>
<span class="normal"> 338</span>
<span class="normal"> 339</span>
<span class="normal"> 340</span>
<span class="normal"> 341</span>
<span class="normal"> 342</span>
<span class="normal"> 343</span>
<span class="normal"> 344</span>
<span class="normal"> 345</span>
<span class="normal"> 346</span>
<span class="normal"> 347</span>
<span class="normal"> 348</span>
<span class="normal"> 349</span>
<span class="normal"> 350</span>
<span class="normal"> 351</span>
<span class="normal"> 352</span>
<span class="normal"> 353</span>
<span class="normal"> 354</span>
<span class="normal"> 355</span>
<span class="normal"> 356</span>
<span class="normal"> 357</span>
<span class="normal"> 358</span>
<span class="normal"> 359</span>
<span class="normal"> 360</span>
<span class="normal"> 361</span>
<span class="normal"> 362</span>
<span class="normal"> 363</span>
<span class="normal"> 364</span>
<span class="normal"> 365</span>
<span class="normal"> 366</span>
<span class="normal"> 367</span>
<span class="normal"> 368</span>
<span class="normal"> 369</span>
<span class="normal"> 370</span>
<span class="normal"> 371</span>
<span class="normal"> 372</span>
<span class="normal"> 373</span>
<span class="normal"> 374</span>
<span class="normal"> 375</span>
<span class="normal"> 376</span>
<span class="normal"> 377</span>
<span class="normal"> 378</span>
<span class="normal"> 379</span>
<span class="normal"> 380</span>
<span class="normal"> 381</span>
<span class="normal"> 382</span>
<span class="normal"> 383</span>
<span class="normal"> 384</span>
<span class="normal"> 385</span>
<span class="normal"> 386</span>
<span class="normal"> 387</span>
<span class="normal"> 388</span>
<span class="normal"> 389</span>
<span class="normal"> 390</span>
<span class="normal"> 391</span>
<span class="normal"> 392</span>
<span class="normal"> 393</span>
<span class="normal"> 394</span>
<span class="normal"> 395</span>
<span class="normal"> 396</span>
<span class="normal"> 397</span>
<span class="normal"> 398</span>
<span class="normal"> 399</span>
<span class="normal"> 400</span>
<span class="normal"> 401</span>
<span class="normal"> 402</span>
<span class="normal"> 403</span>
<span class="normal"> 404</span>
<span class="normal"> 405</span>
<span class="normal"> 406</span>
<span class="normal"> 407</span>
<span class="normal"> 408</span>
<span class="normal"> 409</span>
<span class="normal"> 410</span>
<span class="normal"> 411</span>
<span class="normal"> 412</span>
<span class="normal"> 413</span>
<span class="normal"> 414</span>
<span class="normal"> 415</span>
<span class="normal"> 416</span>
<span class="normal"> 417</span>
<span class="normal"> 418</span>
<span class="normal"> 419</span>
<span class="normal"> 420</span>
<span class="normal"> 421</span>
<span class="normal"> 422</span>
<span class="normal"> 423</span>
<span class="normal"> 424</span>
<span class="normal"> 425</span>
<span class="normal"> 426</span>
<span class="normal"> 427</span>
<span class="normal"> 428</span>
<span class="normal"> 429</span>
<span class="normal"> 430</span>
<span class="normal"> 431</span>
<span class="normal"> 432</span>
<span class="normal"> 433</span>
<span class="normal"> 434</span>
<span class="normal"> 435</span>
<span class="normal"> 436</span>
<span class="normal"> 437</span>
<span class="normal"> 438</span>
<span class="normal"> 439</span>
<span class="normal"> 440</span>
<span class="normal"> 441</span>
<span class="normal"> 442</span>
<span class="normal"> 443</span>
<span class="normal"> 444</span>
<span class="normal"> 445</span>
<span class="normal"> 446</span>
<span class="normal"> 447</span>
<span class="normal"> 448</span>
<span class="normal"> 449</span>
<span class="normal"> 450</span>
<span class="normal"> 451</span>
<span class="normal"> 452</span>
<span class="normal"> 453</span>
<span class="normal"> 454</span>
<span class="normal"> 455</span>
<span class="normal"> 456</span>
<span class="normal"> 457</span>
<span class="normal"> 458</span>
<span class="normal"> 459</span>
<span class="normal"> 460</span>
<span class="normal"> 461</span>
<span class="normal"> 462</span>
<span class="normal"> 463</span>
<span class="normal"> 464</span>
<span class="normal"> 465</span>
<span class="normal"> 466</span>
<span class="normal"> 467</span>
<span class="normal"> 468</span>
<span class="normal"> 469</span>
<span class="normal"> 470</span>
<span class="normal"> 471</span>
<span class="normal"> 472</span>
<span class="normal"> 473</span>
<span class="normal"> 474</span>
<span class="normal"> 475</span>
<span class="normal"> 476</span>
<span class="normal"> 477</span>
<span class="normal"> 478</span>
<span class="normal"> 479</span>
<span class="normal"> 480</span>
<span class="normal"> 481</span>
<span class="normal"> 482</span>
<span class="normal"> 483</span>
<span class="normal"> 484</span>
<span class="normal"> 485</span>
<span class="normal"> 486</span>
<span class="normal"> 487</span>
<span class="normal"> 488</span>
<span class="normal"> 489</span>
<span class="normal"> 490</span>
<span class="normal"> 491</span>
<span class="normal"> 492</span>
<span class="normal"> 493</span>
<span class="normal"> 494</span>
<span class="normal"> 495</span>
<span class="normal"> 496</span>
<span class="normal"> 497</span>
<span class="normal"> 498</span>
<span class="normal"> 499</span>
<span class="normal"> 500</span>
<span class="normal"> 501</span>
<span class="normal"> 502</span>
<span class="normal"> 503</span>
<span class="normal"> 504</span>
<span class="normal"> 505</span>
<span class="normal"> 506</span>
<span class="normal"> 507</span>
<span class="normal"> 508</span>
<span class="normal"> 509</span>
<span class="normal"> 510</span>
<span class="normal"> 511</span>
<span class="normal"> 512</span>
<span class="normal"> 513</span>
<span class="normal"> 514</span>
<span class="normal"> 515</span>
<span class="normal"> 516</span>
<span class="normal"> 517</span>
<span class="normal"> 518</span>
<span class="normal"> 519</span>
<span class="normal"> 520</span>
<span class="normal"> 521</span>
<span class="normal"> 522</span>
<span class="normal"> 523</span>
<span class="normal"> 524</span>
<span class="normal"> 525</span>
<span class="normal"> 526</span>
<span class="normal"> 527</span>
<span class="normal"> 528</span>
<span class="normal"> 529</span>
<span class="normal"> 530</span>
<span class="normal"> 531</span>
<span class="normal"> 532</span>
<span class="normal"> 533</span>
<span class="normal"> 534</span>
<span class="normal"> 535</span>
<span class="normal"> 536</span>
<span class="normal"> 537</span>
<span class="normal"> 538</span>
<span class="normal"> 539</span>
<span class="normal"> 540</span>
<span class="normal"> 541</span>
<span class="normal"> 542</span>
<span class="normal"> 543</span>
<span class="normal"> 544</span>
<span class="normal"> 545</span>
<span class="normal"> 546</span>
<span class="normal"> 547</span>
<span class="normal"> 548</span>
<span class="normal"> 549</span>
<span class="normal"> 550</span>
<span class="normal"> 551</span>
<span class="normal"> 552</span>
<span class="normal"> 553</span>
<span class="normal"> 554</span>
<span class="normal"> 555</span>
<span class="normal"> 556</span>
<span class="normal"> 557</span>
<span class="normal"> 558</span>
<span class="normal"> 559</span>
<span class="normal"> 560</span>
<span class="normal"> 561</span>
<span class="normal"> 562</span>
<span class="normal"> 563</span>
<span class="normal"> 564</span>
<span class="normal"> 565</span>
<span class="normal"> 566</span>
<span class="normal"> 567</span>
<span class="normal"> 568</span>
<span class="normal"> 569</span>
<span class="normal"> 570</span>
<span class="normal"> 571</span>
<span class="normal"> 572</span>
<span class="normal"> 573</span>
<span class="normal"> 574</span>
<span class="normal"> 575</span>
<span class="normal"> 576</span>
<span class="normal"> 577</span>
<span class="normal"> 578</span>
<span class="normal"> 579</span>
<span class="normal"> 580</span>
<span class="normal"> 581</span>
<span class="normal"> 582</span>
<span class="normal"> 583</span>
<span class="normal"> 584</span>
<span class="normal"> 585</span>
<span class="normal"> 586</span>
<span class="normal"> 587</span>
<span class="normal"> 588</span>
<span class="normal"> 589</span>
<span class="normal"> 590</span>
<span class="normal"> 591</span>
<span class="normal"> 592</span>
<span class="normal"> 593</span>
<span class="normal"> 594</span>
<span class="normal"> 595</span>
<span class="normal"> 596</span>
<span class="normal"> 597</span>
<span class="normal"> 598</span>
<span class="normal"> 599</span>
<span class="normal"> 600</span>
<span class="normal"> 601</span>
<span class="normal"> 602</span>
<span class="normal"> 603</span>
<span class="normal"> 604</span>
<span class="normal"> 605</span>
<span class="normal"> 606</span>
<span class="normal"> 607</span>
<span class="normal"> 608</span>
<span class="normal"> 609</span>
<span class="normal"> 610</span>
<span class="normal"> 611</span>
<span class="normal"> 612</span>
<span class="normal"> 613</span>
<span class="normal"> 614</span>
<span class="normal"> 615</span>
<span class="normal"> 616</span>
<span class="normal"> 617</span>
<span class="normal"> 618</span>
<span class="normal"> 619</span>
<span class="normal"> 620</span>
<span class="normal"> 621</span>
<span class="normal"> 622</span>
<span class="normal"> 623</span>
<span class="normal"> 624</span>
<span class="normal"> 625</span>
<span class="normal"> 626</span>
<span class="normal"> 627</span>
<span class="normal"> 628</span>
<span class="normal"> 629</span>
<span class="normal"> 630</span>
<span class="normal"> 631</span>
<span class="normal"> 632</span>
<span class="normal"> 633</span>
<span class="normal"> 634</span>
<span class="normal"> 635</span>
<span class="normal"> 636</span>
<span class="normal"> 637</span>
<span class="normal"> 638</span>
<span class="normal"> 639</span>
<span class="normal"> 640</span>
<span class="normal"> 641</span>
<span class="normal"> 642</span>
<span class="normal"> 643</span>
<span class="normal"> 644</span>
<span class="normal"> 645</span>
<span class="normal"> 646</span>
<span class="normal"> 647</span>
<span class="normal"> 648</span>
<span class="normal"> 649</span>
<span class="normal"> 650</span>
<span class="normal"> 651</span>
<span class="normal"> 652</span>
<span class="normal"> 653</span>
<span class="normal"> 654</span>
<span class="normal"> 655</span>
<span class="normal"> 656</span>
<span class="normal"> 657</span>
<span class="normal"> 658</span>
<span class="normal"> 659</span>
<span class="normal"> 660</span>
<span class="normal"> 661</span>
<span class="normal"> 662</span>
<span class="normal"> 663</span>
<span class="normal"> 664</span>
<span class="normal"> 665</span>
<span class="normal"> 666</span>
<span class="normal"> 667</span>
<span class="normal"> 668</span>
<span class="normal"> 669</span>
<span class="normal"> 670</span>
<span class="normal"> 671</span>
<span class="normal"> 672</span>
<span class="normal"> 673</span>
<span class="normal"> 674</span>
<span class="normal"> 675</span>
<span class="normal"> 676</span>
<span class="normal"> 677</span>
<span class="normal"> 678</span>
<span class="normal"> 679</span>
<span class="normal"> 680</span>
<span class="normal"> 681</span>
<span class="normal"> 682</span>
<span class="normal"> 683</span>
<span class="normal"> 684</span>
<span class="normal"> 685</span>
<span class="normal"> 686</span>
<span class="normal"> 687</span>
<span class="normal"> 688</span>
<span class="normal"> 689</span>
<span class="normal"> 690</span>
<span class="normal"> 691</span>
<span class="normal"> 692</span>
<span class="normal"> 693</span>
<span class="normal"> 694</span>
<span class="normal"> 695</span>
<span class="normal"> 696</span>
<span class="normal"> 697</span>
<span class="normal"> 698</span>
<span class="normal"> 699</span>
<span class="normal"> 700</span>
<span class="normal"> 701</span>
<span class="normal"> 702</span>
<span class="normal"> 703</span>
<span class="normal"> 704</span>
<span class="normal"> 705</span>
<span class="normal"> 706</span>
<span class="normal"> 707</span>
<span class="normal"> 708</span>
<span class="normal"> 709</span>
<span class="normal"> 710</span>
<span class="normal"> 711</span>
<span class="normal"> 712</span>
<span class="normal"> 713</span>
<span class="normal"> 714</span>
<span class="normal"> 715</span>
<span class="normal"> 716</span>
<span class="normal"> 717</span>
<span class="normal"> 718</span>
<span class="normal"> 719</span>
<span class="normal"> 720</span>
<span class="normal"> 721</span>
<span class="normal"> 722</span>
<span class="normal"> 723</span>
<span class="normal"> 724</span>
<span class="normal"> 725</span>
<span class="normal"> 726</span>
<span class="normal"> 727</span>
<span class="normal"> 728</span>
<span class="normal"> 729</span>
<span class="normal"> 730</span>
<span class="normal"> 731</span>
<span class="normal"> 732</span>
<span class="normal"> 733</span>
<span class="normal"> 734</span>
<span class="normal"> 735</span>
<span class="normal"> 736</span>
<span class="normal"> 737</span>
<span class="normal"> 738</span>
<span class="normal"> 739</span>
<span class="normal"> 740</span>
<span class="normal"> 741</span>
<span class="normal"> 742</span>
<span class="normal"> 743</span>
<span class="normal"> 744</span>
<span class="normal"> 745</span>
<span class="normal"> 746</span>
<span class="normal"> 747</span>
<span class="normal"> 748</span>
<span class="normal"> 749</span>
<span class="normal"> 750</span>
<span class="normal"> 751</span>
<span class="normal"> 752</span>
<span class="normal"> 753</span>
<span class="normal"> 754</span>
<span class="normal"> 755</span>
<span class="normal"> 756</span>
<span class="normal"> 757</span>
<span class="normal"> 758</span>
<span class="normal"> 759</span>
<span class="normal"> 760</span>
<span class="normal"> 761</span>
<span class="normal"> 762</span>
<span class="normal"> 763</span>
<span class="normal"> 764</span>
<span class="normal"> 765</span>
<span class="normal"> 766</span>
<span class="normal"> 767</span>
<span class="normal"> 768</span>
<span class="normal"> 769</span>
<span class="normal"> 770</span>
<span class="normal"> 771</span>
<span class="normal"> 772</span>
<span class="normal"> 773</span>
<span class="normal"> 774</span>
<span class="normal"> 775</span>
<span class="normal"> 776</span>
<span class="normal"> 777</span>
<span class="normal"> 778</span>
<span class="normal"> 779</span>
<span class="normal"> 780</span>
<span class="normal"> 781</span>
<span class="normal"> 782</span>
<span class="normal"> 783</span>
<span class="normal"> 784</span>
<span class="normal"> 785</span>
<span class="normal"> 786</span>
<span class="normal"> 787</span>
<span class="normal"> 788</span>
<span class="normal"> 789</span>
<span class="normal"> 790</span>
<span class="normal"> 791</span>
<span class="normal"> 792</span>
<span class="normal"> 793</span>
<span class="normal"> 794</span>
<span class="normal"> 795</span>
<span class="normal"> 796</span>
<span class="normal"> 797</span>
<span class="normal"> 798</span>
<span class="normal"> 799</span>
<span class="normal"> 800</span>
<span class="normal"> 801</span>
<span class="normal"> 802</span>
<span class="normal"> 803</span>
<span class="normal"> 804</span>
<span class="normal"> 805</span>
<span class="normal"> 806</span>
<span class="normal"> 807</span>
<span class="normal"> 808</span>
<span class="normal"> 809</span>
<span class="normal"> 810</span>
<span class="normal"> 811</span>
<span class="normal"> 812</span>
<span class="normal"> 813</span>
<span class="normal"> 814</span>
<span class="normal"> 815</span>
<span class="normal"> 816</span>
<span class="normal"> 817</span>
<span class="normal"> 818</span>
<span class="normal"> 819</span>
<span class="normal"> 820</span>
<span class="normal"> 821</span>
<span class="normal"> 822</span>
<span class="normal"> 823</span>
<span class="normal"> 824</span>
<span class="normal"> 825</span>
<span class="normal"> 826</span>
<span class="normal"> 827</span>
<span class="normal"> 828</span>
<span class="normal"> 829</span>
<span class="normal"> 830</span>
<span class="normal"> 831</span>
<span class="normal"> 832</span>
<span class="normal"> 833</span>
<span class="normal"> 834</span>
<span class="normal"> 835</span>
<span class="normal"> 836</span>
<span class="normal"> 837</span>
<span class="normal"> 838</span>
<span class="normal"> 839</span>
<span class="normal"> 840</span>
<span class="normal"> 841</span>
<span class="normal"> 842</span>
<span class="normal"> 843</span>
<span class="normal"> 844</span>
<span class="normal"> 845</span>
<span class="normal"> 846</span>
<span class="normal"> 847</span>
<span class="normal"> 848</span>
<span class="normal"> 849</span>
<span class="normal"> 850</span>
<span class="normal"> 851</span>
<span class="normal"> 852</span>
<span class="normal"> 853</span>
<span class="normal"> 854</span>
<span class="normal"> 855</span>
<span class="normal"> 856</span>
<span class="normal"> 857</span>
<span class="normal"> 858</span>
<span class="normal"> 859</span>
<span class="normal"> 860</span>
<span class="normal"> 861</span>
<span class="normal"> 862</span>
<span class="normal"> 863</span>
<span class="normal"> 864</span>
<span class="normal"> 865</span>
<span class="normal"> 866</span>
<span class="normal"> 867</span>
<span class="normal"> 868</span>
<span class="normal"> 869</span>
<span class="normal"> 870</span>
<span class="normal"> 871</span>
<span class="normal"> 872</span>
<span class="normal"> 873</span>
<span class="normal"> 874</span>
<span class="normal"> 875</span>
<span class="normal"> 876</span>
<span class="normal"> 877</span>
<span class="normal"> 878</span>
<span class="normal"> 879</span>
<span class="normal"> 880</span>
<span class="normal"> 881</span>
<span class="normal"> 882</span>
<span class="normal"> 883</span>
<span class="normal"> 884</span>
<span class="normal"> 885</span>
<span class="normal"> 886</span>
<span class="normal"> 887</span>
<span class="normal"> 888</span>
<span class="normal"> 889</span>
<span class="normal"> 890</span>
<span class="normal"> 891</span>
<span class="normal"> 892</span>
<span class="normal"> 893</span>
<span class="normal"> 894</span>
<span class="normal"> 895</span>
<span class="normal"> 896</span>
<span class="normal"> 897</span>
<span class="normal"> 898</span>
<span class="normal"> 899</span>
<span class="normal"> 900</span>
<span class="normal"> 901</span>
<span class="normal"> 902</span>
<span class="normal"> 903</span>
<span class="normal"> 904</span>
<span class="normal"> 905</span>
<span class="normal"> 906</span>
<span class="normal"> 907</span>
<span class="normal"> 908</span>
<span class="normal"> 909</span>
<span class="normal"> 910</span>
<span class="normal"> 911</span>
<span class="normal"> 912</span>
<span class="normal"> 913</span>
<span class="normal"> 914</span>
<span class="normal"> 915</span>
<span class="normal"> 916</span>
<span class="normal"> 917</span>
<span class="normal"> 918</span>
<span class="normal"> 919</span>
<span class="normal"> 920</span>
<span class="normal"> 921</span>
<span class="normal"> 922</span>
<span class="normal"> 923</span>
<span class="normal"> 924</span>
<span class="normal"> 925</span>
<span class="normal"> 926</span>
<span class="normal"> 927</span>
<span class="normal"> 928</span>
<span class="normal"> 929</span>
<span class="normal"> 930</span>
<span class="normal"> 931</span>
<span class="normal"> 932</span>
<span class="normal"> 933</span>
<span class="normal"> 934</span>
<span class="normal"> 935</span>
<span class="normal"> 936</span>
<span class="normal"> 937</span>
<span class="normal"> 938</span>
<span class="normal"> 939</span>
<span class="normal"> 940</span>
<span class="normal"> 941</span>
<span class="normal"> 942</span>
<span class="normal"> 943</span>
<span class="normal"> 944</span>
<span class="normal"> 945</span>
<span class="normal"> 946</span>
<span class="normal"> 947</span>
<span class="normal"> 948</span>
<span class="normal"> 949</span>
<span class="normal"> 950</span>
<span class="normal"> 951</span>
<span class="normal"> 952</span>
<span class="normal"> 953</span>
<span class="normal"> 954</span>
<span class="normal"> 955</span>
<span class="normal"> 956</span>
<span class="normal"> 957</span>
<span class="normal"> 958</span>
<span class="normal"> 959</span>
<span class="normal"> 960</span>
<span class="normal"> 961</span>
<span class="normal"> 962</span>
<span class="normal"> 963</span>
<span class="normal"> 964</span>
<span class="normal"> 965</span>
<span class="normal"> 966</span>
<span class="normal"> 967</span>
<span class="normal"> 968</span>
<span class="normal"> 969</span>
<span class="normal"> 970</span>
<span class="normal"> 971</span>
<span class="normal"> 972</span>
<span class="normal"> 973</span>
<span class="normal"> 974</span>
<span class="normal"> 975</span>
<span class="normal"> 976</span>
<span class="normal"> 977</span>
<span class="normal"> 978</span>
<span class="normal"> 979</span>
<span class="normal"> 980</span>
<span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span>
<span class="normal">1100</span>
<span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span>
<span class="normal">1105</span>
<span class="normal">1106</span>
<span class="normal">1107</span>
<span class="normal">1108</span>
<span class="normal">1109</span>
<span class="normal">1110</span>
<span class="normal">1111</span>
<span class="normal">1112</span>
<span class="normal">1113</span>
<span class="normal">1114</span>
<span class="normal">1115</span>
<span class="normal">1116</span>
<span class="normal">1117</span>
<span class="normal">1118</span>
<span class="normal">1119</span>
<span class="normal">1120</span>
<span class="normal">1121</span>
<span class="normal">1122</span>
<span class="normal">1123</span>
<span class="normal">1124</span>
<span class="normal">1125</span>
<span class="normal">1126</span>
<span class="normal">1127</span>
<span class="normal">1128</span>
<span class="normal">1129</span>
<span class="normal">1130</span>
<span class="normal">1131</span>
<span class="normal">1132</span>
<span class="normal">1133</span>
<span class="normal">1134</span>
<span class="normal">1135</span>
<span class="normal">1136</span>
<span class="normal">1137</span>
<span class="normal">1138</span>
<span class="normal">1139</span>
<span class="normal">1140</span>
<span class="normal">1141</span>
<span class="normal">1142</span>
<span class="normal">1143</span>
<span class="normal">1144</span>
<span class="normal">1145</span>
<span class="normal">1146</span>
<span class="normal">1147</span>
<span class="normal">1148</span>
<span class="normal">1149</span>
<span class="normal">1150</span>
<span class="normal">1151</span>
<span class="normal">1152</span>
<span class="normal">1153</span>
<span class="normal">1154</span>
<span class="normal">1155</span>
<span class="normal">1156</span>
<span class="normal">1157</span>
<span class="normal">1158</span>
<span class="normal">1159</span>
<span class="normal">1160</span>
<span class="normal">1161</span>
<span class="normal">1162</span>
<span class="normal">1163</span>
<span class="normal">1164</span>
<span class="normal">1165</span>
<span class="normal">1166</span>
<span class="normal">1167</span>
<span class="normal">1168</span>
<span class="normal">1169</span>
<span class="normal">1170</span>
<span class="normal">1171</span>
<span class="normal">1172</span>
<span class="normal">1173</span>
<span class="normal">1174</span>
<span class="normal">1175</span>
<span class="normal">1176</span>
<span class="normal">1177</span>
<span class="normal">1178</span>
<span class="normal">1179</span>
<span class="normal">1180</span>
<span class="normal">1181</span>
<span class="normal">1182</span>
<span class="normal">1183</span>
<span class="normal">1184</span>
<span class="normal">1185</span>
<span class="normal">1186</span>
<span class="normal">1187</span>
<span class="normal">1188</span>
<span class="normal">1189</span>
<span class="normal">1190</span>
<span class="normal">1191</span>
<span class="normal">1192</span>
<span class="normal">1193</span>
<span class="normal">1194</span>
<span class="normal">1195</span>
<span class="normal">1196</span>
<span class="normal">1197</span>
<span class="normal">1198</span>
<span class="normal">1199</span>
<span class="normal">1200</span>
<span class="normal">1201</span>
<span class="normal">1202</span>
<span class="normal">1203</span>
<span class="normal">1204</span>
<span class="normal">1205</span>
<span class="normal">1206</span>
<span class="normal">1207</span>
<span class="normal">1208</span>
<span class="normal">1209</span>
<span class="normal">1210</span>
<span class="normal">1211</span>
<span class="normal">1212</span>
<span class="normal">1213</span>
<span class="normal">1214</span>
<span class="normal">1215</span>
<span class="normal">1216</span>
<span class="normal">1217</span>
<span class="normal">1218</span>
<span class="normal">1219</span>
<span class="normal">1220</span>
<span class="normal">1221</span>
<span class="normal">1222</span>
<span class="normal">1223</span>
<span class="normal">1224</span>
<span class="normal">1225</span>
<span class="normal">1226</span>
<span class="normal">1227</span>
<span class="normal">1228</span>
<span class="normal">1229</span>
<span class="normal">1230</span>
<span class="normal">1231</span>
<span class="normal">1232</span>
<span class="normal">1233</span>
<span class="normal">1234</span>
<span class="normal">1235</span>
<span class="normal">1236</span>
<span class="normal">1237</span>
<span class="normal">1238</span>
<span class="normal">1239</span>
<span class="normal">1240</span>
<span class="normal">1241</span>
<span class="normal">1242</span>
<span class="normal">1243</span>
<span class="normal">1244</span>
<span class="normal">1245</span>
<span class="normal">1246</span>
<span class="normal">1247</span>
<span class="normal">1248</span>
<span class="normal">1249</span>
<span class="normal">1250</span>
<span class="normal">1251</span>
<span class="normal">1252</span>
<span class="normal">1253</span>
<span class="normal">1254</span>
<span class="normal">1255</span>
<span class="normal">1256</span>
<span class="normal">1257</span>
<span class="normal">1258</span>
<span class="normal">1259</span>
<span class="normal">1260</span>
<span class="normal">1261</span>
<span class="normal">1262</span>
<span class="normal">1263</span>
<span class="normal">1264</span>
<span class="normal">1265</span>
<span class="normal">1266</span>
<span class="normal">1267</span>
<span class="normal">1268</span>
<span class="normal">1269</span>
<span class="normal">1270</span>
<span class="normal">1271</span>
<span class="normal">1272</span>
<span class="normal">1273</span>
<span class="normal">1274</span>
<span class="normal">1275</span>
<span class="normal">1276</span>
<span class="normal">1277</span>
<span class="normal">1278</span>
<span class="normal">1279</span>
<span class="normal">1280</span>
<span class="normal">1281</span>
<span class="normal">1282</span>
<span class="normal">1283</span>
<span class="normal">1284</span>
<span class="normal">1285</span>
<span class="normal">1286</span>
<span class="normal">1287</span>
<span class="normal">1288</span>
<span class="normal">1289</span>
<span class="normal">1290</span>
<span class="normal">1291</span>
<span class="normal">1292</span>
<span class="normal">1293</span>
<span class="normal">1294</span>
<span class="normal">1295</span>
<span class="normal">1296</span>
<span class="normal">1297</span>
<span class="normal">1298</span>
<span class="normal">1299</span>
<span class="normal">1300</span>
<span class="normal">1301</span>
<span class="normal">1302</span>
<span class="normal">1303</span>
<span class="normal">1304</span>
<span class="normal">1305</span>
<span class="normal">1306</span>
<span class="normal">1307</span>
<span class="normal">1308</span>
<span class="normal">1309</span>
<span class="normal">1310</span>
<span class="normal">1311</span>
<span class="normal">1312</span>
<span class="normal">1313</span>
<span class="normal">1314</span>
<span class="normal">1315</span>
<span class="normal">1316</span>
<span class="normal">1317</span>
<span class="normal">1318</span>
<span class="normal">1319</span>
<span class="normal">1320</span>
<span class="normal">1321</span>
<span class="normal">1322</span>
<span class="normal">1323</span>
<span class="normal">1324</span>
<span class="normal">1325</span>
<span class="normal">1326</span>
<span class="normal">1327</span>
<span class="normal">1328</span>
<span class="normal">1329</span>
<span class="normal">1330</span>
<span class="normal">1331</span>
<span class="normal">1332</span>
<span class="normal">1333</span>
<span class="normal">1334</span>
<span class="normal">1335</span>
<span class="normal">1336</span>
<span class="normal">1337</span>
<span class="normal">1338</span>
<span class="normal">1339</span>
<span class="normal">1340</span>
<span class="normal">1341</span>
<span class="normal">1342</span>
<span class="normal">1343</span>
<span class="normal">1344</span>
<span class="normal">1345</span>
<span class="normal">1346</span>
<span class="normal">1347</span>
<span class="normal">1348</span>
<span class="normal">1349</span>
<span class="normal">1350</span>
<span class="normal">1351</span>
<span class="normal">1352</span>
<span class="normal">1353</span>
<span class="normal">1354</span>
<span class="normal">1355</span>
<span class="normal">1356</span>
<span class="normal">1357</span>
<span class="normal">1358</span>
<span class="normal">1359</span>
<span class="normal">1360</span>
<span class="normal">1361</span>
<span class="normal">1362</span>
<span class="normal">1363</span>
<span class="normal">1364</span>
<span class="normal">1365</span>
<span class="normal">1366</span>
<span class="normal">1367</span>
<span class="normal">1368</span>
<span class="normal">1369</span>
<span class="normal">1370</span>
<span class="normal">1371</span>
<span class="normal">1372</span>
<span class="normal">1373</span>
<span class="normal">1374</span>
<span class="normal">1375</span>
<span class="normal">1376</span>
<span class="normal">1377</span>
<span class="normal">1378</span>
<span class="normal">1379</span>
<span class="normal">1380</span>
<span class="normal">1381</span>
<span class="normal">1382</span>
<span class="normal">1383</span>
<span class="normal">1384</span>
<span class="normal">1385</span>
<span class="normal">1386</span>
<span class="normal">1387</span>
<span class="normal">1388</span>
<span class="normal">1389</span>
<span class="normal">1390</span>
<span class="normal">1391</span>
<span class="normal">1392</span>
<span class="normal">1393</span>
<span class="normal">1394</span>
<span class="normal">1395</span>
<span class="normal">1396</span>
<span class="normal">1397</span>
<span class="normal">1398</span>
<span class="normal">1399</span>
<span class="normal">1400</span>
<span class="normal">1401</span>
<span class="normal">1402</span>
<span class="normal">1403</span>
<span class="normal">1404</span>
<span class="normal">1405</span>
<span class="normal">1406</span>
<span class="normal">1407</span>
<span class="normal">1408</span>
<span class="normal">1409</span>
<span class="normal">1410</span>
<span class="normal">1411</span>
<span class="normal">1412</span>
<span class="normal">1413</span>
<span class="normal">1414</span>
<span class="normal">1415</span>
<span class="normal">1416</span>
<span class="normal">1417</span>
<span class="normal">1418</span>
<span class="normal">1419</span>
<span class="normal">1420</span>
<span class="normal">1421</span>
<span class="normal">1422</span>
<span class="normal">1423</span>
<span class="normal">1424</span>
<span class="normal">1425</span>
<span class="normal">1426</span>
<span class="normal">1427</span>
<span class="normal">1428</span>
<span class="normal">1429</span>
<span class="normal">1430</span>
<span class="normal">1431</span>
<span class="normal">1432</span>
<span class="normal">1433</span>
<span class="normal">1434</span>
<span class="normal">1435</span>
<span class="normal">1436</span>
<span class="normal">1437</span>
<span class="normal">1438</span>
<span class="normal">1439</span>
<span class="normal">1440</span>
<span class="normal">1441</span>
<span class="normal">1442</span>
<span class="normal">1443</span>
<span class="normal">1444</span>
<span class="normal">1445</span>
<span class="normal">1446</span>
<span class="normal">1447</span>
<span class="normal">1448</span>
<span class="normal">1449</span>
<span class="normal">1450</span>
<span class="normal">1451</span>
<span class="normal">1452</span>
<span class="normal">1453</span>
<span class="normal">1454</span>
<span class="normal">1455</span>
<span class="normal">1456</span>
<span class="normal">1457</span>
<span class="normal">1458</span>
<span class="normal">1459</span>
<span class="normal">1460</span>
<span class="normal">1461</span>
<span class="normal">1462</span>
<span class="normal">1463</span>
<span class="normal">1464</span>
<span class="normal">1465</span>
<span class="normal">1466</span>
<span class="normal">1467</span>
<span class="normal">1468</span>
<span class="normal">1469</span>
<span class="normal">1470</span>
<span class="normal">1471</span>
<span class="normal">1472</span>
<span class="normal">1473</span>
<span class="normal">1474</span>
<span class="normal">1475</span>
<span class="normal">1476</span>
<span class="normal">1477</span>
<span class="normal">1478</span>
<span class="normal">1479</span>
<span class="normal">1480</span>
<span class="normal">1481</span>
<span class="normal">1482</span>
<span class="normal">1483</span>
<span class="normal">1484</span>
<span class="normal">1485</span>
<span class="normal">1486</span>
<span class="normal">1487</span>
<span class="normal">1488</span>
<span class="normal">1489</span>
<span class="normal">1490</span>
<span class="normal">1491</span>
<span class="normal">1492</span>
<span class="normal">1493</span>
<span class="normal">1494</span>
<span class="normal">1495</span>
<span class="normal">1496</span>
<span class="normal">1497</span>
<span class="normal">1498</span>
<span class="normal">1499</span>
<span class="normal">1500</span>
<span class="normal">1501</span>
<span class="normal">1502</span>
<span class="normal">1503</span>
<span class="normal">1504</span>
<span class="normal">1505</span>
<span class="normal">1506</span>
<span class="normal">1507</span>
<span class="normal">1508</span>
<span class="normal">1509</span>
<span class="normal">1510</span>
<span class="normal">1511</span>
<span class="normal">1512</span>
<span class="normal">1513</span>
<span class="normal">1514</span>
<span class="normal">1515</span>
<span class="normal">1516</span>
<span class="normal">1517</span>
<span class="normal">1518</span>
<span class="normal">1519</span>
<span class="normal">1520</span>
<span class="normal">1521</span>
<span class="normal">1522</span>
<span class="normal">1523</span>
<span class="normal">1524</span>
<span class="normal">1525</span>
<span class="normal">1526</span>
<span class="normal">1527</span>
<span class="normal">1528</span>
<span class="normal">1529</span>
<span class="normal">1530</span>
<span class="normal">1531</span>
<span class="normal">1532</span>
<span class="normal">1533</span>
<span class="normal">1534</span>
<span class="normal">1535</span>
<span class="normal">1536</span>
<span class="normal">1537</span>
<span class="normal">1538</span>
<span class="normal">1539</span>
<span class="normal">1540</span>
<span class="normal">1541</span>
<span class="normal">1542</span>
<span class="normal">1543</span>
<span class="normal">1544</span>
<span class="normal">1545</span>
<span class="normal">1546</span>
<span class="normal">1547</span>
<span class="normal">1548</span>
<span class="normal">1549</span>
<span class="normal">1550</span>
<span class="normal">1551</span>
<span class="normal">1552</span>
<span class="normal">1553</span>
<span class="normal">1554</span>
<span class="normal">1555</span>
<span class="normal">1556</span>
<span class="normal">1557</span>
<span class="normal">1558</span>
<span class="normal">1559</span>
<span class="normal">1560</span>
<span class="normal">1561</span>
<span class="normal">1562</span>
<span class="normal">1563</span>
<span class="normal">1564</span>
<span class="normal">1565</span>
<span class="normal">1566</span>
<span class="normal">1567</span>
<span class="normal">1568</span>
<span class="normal">1569</span>
<span class="normal">1570</span>
<span class="normal">1571</span>
<span class="normal">1572</span>
<span class="normal">1573</span>
<span class="normal">1574</span>
<span class="normal">1575</span>
<span class="normal">1576</span>
<span class="normal">1577</span>
<span class="normal">1578</span>
<span class="normal">1579</span>
<span class="normal">1580</span>
<span class="normal">1581</span>
<span class="normal">1582</span>
<span class="normal">1583</span>
<span class="normal">1584</span>
<span class="normal">1585</span>
<span class="normal">1586</span>
<span class="normal">1587</span>
<span class="normal">1588</span>
<span class="normal">1589</span>
<span class="normal">1590</span>
<span class="normal">1591</span>
<span class="normal">1592</span>
<span class="normal">1593</span>
<span class="normal">1594</span>
<span class="normal">1595</span>
<span class="normal">1596</span>
<span class="normal">1597</span>
<span class="normal">1598</span>
<span class="normal">1599</span>
<span class="normal">1600</span>
<span class="normal">1601</span>
<span class="normal">1602</span>
<span class="normal">1603</span>
<span class="normal">1604</span>
<span class="normal">1605</span>
<span class="normal">1606</span>
<span class="normal">1607</span>
<span class="normal">1608</span>
<span class="normal">1609</span>
<span class="normal">1610</span>
<span class="normal">1611</span>
<span class="normal">1612</span>
<span class="normal">1613</span>
<span class="normal">1614</span>
<span class="normal">1615</span>
<span class="normal">1616</span>
<span class="normal">1617</span>
<span class="normal">1618</span>
<span class="normal">1619</span>
<span class="normal">1620</span>
<span class="normal">1621</span>
<span class="normal">1622</span>
<span class="normal">1623</span>
<span class="normal">1624</span>
<span class="normal">1625</span>
<span class="normal">1626</span>
<span class="normal">1627</span>
<span class="normal">1628</span>
<span class="normal">1629</span>
<span class="normal">1630</span>
<span class="normal">1631</span>
<span class="normal">1632</span>
<span class="normal">1633</span>
<span class="normal">1634</span>
<span class="normal">1635</span>
<span class="normal">1636</span>
<span class="normal">1637</span>
<span class="normal">1638</span>
<span class="normal">1639</span>
<span class="normal">1640</span>
<span class="normal">1641</span>
<span class="normal">1642</span>
<span class="normal">1643</span>
<span class="normal">1644</span>
<span class="normal">1645</span>
<span class="normal">1646</span>
<span class="normal">1647</span>
<span class="normal">1648</span>
<span class="normal">1649</span>
<span class="normal">1650</span>
<span class="normal">1651</span>
<span class="normal">1652</span>
<span class="normal">1653</span>
<span class="normal">1654</span>
<span class="normal">1655</span>
<span class="normal">1656</span>
<span class="normal">1657</span>
<span class="normal">1658</span>
<span class="normal">1659</span>
<span class="normal">1660</span>
<span class="normal">1661</span>
<span class="normal">1662</span>
<span class="normal">1663</span>
<span class="normal">1664</span>
<span class="normal">1665</span>
<span class="normal">1666</span>
<span class="normal">1667</span>
<span class="normal">1668</span>
<span class="normal">1669</span>
<span class="normal">1670</span>
<span class="normal">1671</span>
<span class="normal">1672</span>
<span class="normal">1673</span>
<span class="normal">1674</span>
<span class="normal">1675</span>
<span class="normal">1676</span>
<span class="normal">1677</span>
<span class="normal">1678</span>
<span class="normal">1679</span>
<span class="normal">1680</span>
<span class="normal">1681</span>
<span class="normal">1682</span>
<span class="normal">1683</span>
<span class="normal">1684</span>
<span class="normal">1685</span>
<span class="normal">1686</span>
<span class="normal">1687</span>
<span class="normal">1688</span>
<span class="normal">1689</span>
<span class="normal">1690</span>
<span class="normal">1691</span>
<span class="normal">1692</span>
<span class="normal">1693</span>
<span class="normal">1694</span>
<span class="normal">1695</span>
<span class="normal">1696</span>
<span class="normal">1697</span>
<span class="normal">1698</span>
<span class="normal">1699</span>
<span class="normal">1700</span>
<span class="normal">1701</span>
<span class="normal">1702</span>
<span class="normal">1703</span>
<span class="normal">1704</span>
<span class="normal">1705</span>
<span class="normal">1706</span>
<span class="normal">1707</span>
<span class="normal">1708</span>
<span class="normal">1709</span>
<span class="normal">1710</span>
<span class="normal">1711</span>
<span class="normal">1712</span>
<span class="normal">1713</span>
<span class="normal">1714</span>
<span class="normal">1715</span>
<span class="normal">1716</span>
<span class="normal">1717</span>
<span class="normal">1718</span>
<span class="normal">1719</span>
<span class="normal">1720</span>
<span class="normal">1721</span>
<span class="normal">1722</span>
<span class="normal">1723</span>
<span class="normal">1724</span>
<span class="normal">1725</span>
<span class="normal">1726</span>
<span class="normal">1727</span>
<span class="normal">1728</span>
<span class="normal">1729</span>
<span class="normal">1730</span>
<span class="normal">1731</span>
<span class="normal">1732</span>
<span class="normal">1733</span>
<span class="normal">1734</span>
<span class="normal">1735</span>
<span class="normal">1736</span>
<span class="normal">1737</span>
<span class="normal">1738</span>
<span class="normal">1739</span>
<span class="normal">1740</span>
<span class="normal">1741</span>
<span class="normal">1742</span>
<span class="normal">1743</span>
<span class="normal">1744</span>
<span class="normal">1745</span>
<span class="normal">1746</span>
<span class="normal">1747</span>
<span class="normal">1748</span>
<span class="normal">1749</span>
<span class="normal">1750</span>
<span class="normal">1751</span>
<span class="normal">1752</span>
<span class="normal">1753</span>
<span class="normal">1754</span>
<span class="normal">1755</span>
<span class="normal">1756</span>
<span class="normal">1757</span>
<span class="normal">1758</span>
<span class="normal">1759</span>
<span class="normal">1760</span>
<span class="normal">1761</span>
<span class="normal">1762</span>
<span class="normal">1763</span>
<span class="normal">1764</span>
<span class="normal">1765</span>
<span class="normal">1766</span>
<span class="normal">1767</span>
<span class="normal">1768</span>
<span class="normal">1769</span>
<span class="normal">1770</span>
<span class="normal">1771</span>
<span class="normal">1772</span>
<span class="normal">1773</span>
<span class="normal">1774</span>
<span class="normal">1775</span>
<span class="normal">1776</span>
<span class="normal">1777</span>
<span class="normal">1778</span>
<span class="normal">1779</span>
<span class="normal">1780</span>
<span class="normal">1781</span>
<span class="normal">1782</span>
<span class="normal">1783</span>
<span class="normal">1784</span>
<span class="normal">1785</span>
<span class="normal">1786</span>
<span class="normal">1787</span>
<span class="normal">1788</span>
<span class="normal">1789</span>
<span class="normal">1790</span>
<span class="normal">1791</span>
<span class="normal">1792</span>
<span class="normal">1793</span>
<span class="normal">1794</span>
<span class="normal">1795</span>
<span class="normal">1796</span>
<span class="normal">1797</span>
<span class="normal">1798</span>
<span class="normal">1799</span>
<span class="normal">1800</span>
<span class="normal">1801</span>
<span class="normal">1802</span>
<span class="normal">1803</span>
<span class="normal">1804</span>
<span class="normal">1805</span>
<span class="normal">1806</span>
<span class="normal">1807</span>
<span class="normal">1808</span>
<span class="normal">1809</span>
<span class="normal">1810</span>
<span class="normal">1811</span>
<span class="normal">1812</span>
<span class="normal">1813</span>
<span class="normal">1814</span>
<span class="normal">1815</span>
<span class="normal">1816</span>
<span class="normal">1817</span>
<span class="normal">1818</span>
<span class="normal">1819</span>
<span class="normal">1820</span>
<span class="normal">1821</span>
<span class="normal">1822</span>
<span class="normal">1823</span>
<span class="normal">1824</span>
<span class="normal">1825</span>
<span class="normal">1826</span>
<span class="normal">1827</span>
<span class="normal">1828</span>
<span class="normal">1829</span>
<span class="normal">1830</span>
<span class="normal">1831</span>
<span class="normal">1832</span>
<span class="normal">1833</span>
<span class="normal">1834</span>
<span class="normal">1835</span>
<span class="normal">1836</span>
<span class="normal">1837</span>
<span class="normal">1838</span>
<span class="normal">1839</span>
<span class="normal">1840</span>
<span class="normal">1841</span>
<span class="normal">1842</span>
<span class="normal">1843</span>
<span class="normal">1844</span>
<span class="normal">1845</span>
<span class="normal">1846</span>
<span class="normal">1847</span>
<span class="normal">1848</span>
<span class="normal">1849</span>
<span class="normal">1850</span>
<span class="normal">1851</span>
<span class="normal">1852</span>
<span class="normal">1853</span>
<span class="normal">1854</span>
<span class="normal">1855</span>
<span class="normal">1856</span>
<span class="normal">1857</span>
<span class="normal">1858</span>
<span class="normal">1859</span>
<span class="normal">1860</span>
<span class="normal">1861</span>
<span class="normal">1862</span>
<span class="normal">1863</span>
<span class="normal">1864</span>
<span class="normal">1865</span>
<span class="normal">1866</span>
<span class="normal">1867</span>
<span class="normal">1868</span>
<span class="normal">1869</span>
<span class="normal">1870</span>
<span class="normal">1871</span>
<span class="normal">1872</span>
<span class="normal">1873</span>
<span class="normal">1874</span>
<span class="normal">1875</span>
<span class="normal">1876</span>
<span class="normal">1877</span>
<span class="normal">1878</span>
<span class="normal">1879</span>
<span class="normal">1880</span>
<span class="normal">1881</span>
<span class="normal">1882</span>
<span class="normal">1883</span>
<span class="normal">1884</span>
<span class="normal">1885</span>
<span class="normal">1886</span>
<span class="normal">1887</span>
<span class="normal">1888</span>
<span class="normal">1889</span>
<span class="normal">1890</span>
<span class="normal">1891</span>
<span class="normal">1892</span>
<span class="normal">1893</span>
<span class="normal">1894</span>
<span class="normal">1895</span>
<span class="normal">1896</span>
<span class="normal">1897</span>
<span class="normal">1898</span>
<span class="normal">1899</span>
<span class="normal">1900</span>
<span class="normal">1901</span>
<span class="normal">1902</span>
<span class="normal">1903</span>
<span class="normal">1904</span>
<span class="normal">1905</span>
<span class="normal">1906</span>
<span class="normal">1907</span>
<span class="normal">1908</span>
<span class="normal">1909</span>
<span class="normal">1910</span>
<span class="normal">1911</span>
<span class="normal">1912</span>
<span class="normal">1913</span>
<span class="normal">1914</span>
<span class="normal">1915</span>
<span class="normal">1916</span>
<span class="normal">1917</span>
<span class="normal">1918</span>
<span class="normal">1919</span>
<span class="normal">1920</span>
<span class="normal">1921</span>
<span class="normal">1922</span>
<span class="normal">1923</span>
<span class="normal">1924</span>
<span class="normal">1925</span>
<span class="normal">1926</span>
<span class="normal">1927</span>
<span class="normal">1928</span>
<span class="normal">1929</span>
<span class="normal">1930</span>
<span class="normal">1931</span>
<span class="normal">1932</span>
<span class="normal">1933</span>
<span class="normal">1934</span>
<span class="normal">1935</span>
<span class="normal">1936</span>
<span class="normal">1937</span>
<span class="normal">1938</span>
<span class="normal">1939</span>
<span class="normal">1940</span>
<span class="normal">1941</span>
<span class="normal">1942</span>
<span class="normal">1943</span>
<span class="normal">1944</span>
<span class="normal">1945</span>
<span class="normal">1946</span>
<span class="normal">1947</span>
<span class="normal">1948</span>
<span class="normal">1949</span>
<span class="normal">1950</span>
<span class="normal">1951</span>
<span class="normal">1952</span>
<span class="normal">1953</span>
<span class="normal">1954</span>
<span class="normal">1955</span>
<span class="normal">1956</span>
<span class="normal">1957</span>
<span class="normal">1958</span>
<span class="normal">1959</span>
<span class="normal">1960</span>
<span class="normal">1961</span>
<span class="normal">1962</span>
<span class="normal">1963</span>
<span class="normal">1964</span>
<span class="normal">1965</span>
<span class="normal">1966</span>
<span class="normal">1967</span>
<span class="normal">1968</span>
<span class="normal">1969</span>
<span class="normal">1970</span>
<span class="normal">1971</span>
<span class="normal">1972</span>
<span class="normal">1973</span>
<span class="normal">1974</span>
<span class="normal">1975</span>
<span class="normal">1976</span>
<span class="normal">1977</span>
<span class="normal">1978</span>
<span class="normal">1979</span>
<span class="normal">1980</span>
<span class="normal">1981</span>
<span class="normal">1982</span>
<span class="normal">1983</span>
<span class="normal">1984</span>
<span class="normal">1985</span>
<span class="normal">1986</span>
<span class="normal">1987</span>
<span class="normal">1988</span>
<span class="normal">1989</span>
<span class="normal">1990</span>
<span class="normal">1991</span>
<span class="normal">1992</span>
<span class="normal">1993</span>
<span class="normal">1994</span>
<span class="normal">1995</span>
<span class="normal">1996</span>
<span class="normal">1997</span>
<span class="normal">1998</span>
<span class="normal">1999</span>
<span class="normal">2000</span>
<span class="normal">2001</span>
<span class="normal">2002</span>
<span class="normal">2003</span>
<span class="normal">2004</span>
<span class="normal">2005</span>
<span class="normal">2006</span>
<span class="normal">2007</span>
<span class="normal">2008</span>
<span class="normal">2009</span>
<span class="normal">2010</span>
<span class="normal">2011</span>
<span class="normal">2012</span>
<span class="normal">2013</span>
<span class="normal">2014</span>
<span class="normal">2015</span>
<span class="normal">2016</span>
<span class="normal">2017</span>
<span class="normal">2018</span>
<span class="normal">2019</span>
<span class="normal">2020</span>
<span class="normal">2021</span>
<span class="normal">2022</span>
<span class="normal">2023</span>
<span class="normal">2024</span>
<span class="normal">2025</span>
<span class="normal">2026</span>
<span class="normal">2027</span>
<span class="normal">2028</span>
<span class="normal">2029</span>
<span class="normal">2030</span>
<span class="normal">2031</span>
<span class="normal">2032</span>
<span class="normal">2033</span>
<span class="normal">2034</span>
<span class="normal">2035</span>
<span class="normal">2036</span>
<span class="normal">2037</span>
<span class="normal">2038</span>
<span class="normal">2039</span>
<span class="normal">2040</span>
<span class="normal">2041</span>
<span class="normal">2042</span>
<span class="normal">2043</span>
<span class="normal">2044</span>
<span class="normal">2045</span>
<span class="normal">2046</span>
<span class="normal">2047</span>
<span class="normal">2048</span>
<span class="normal">2049</span>
<span class="normal">2050</span>
<span class="normal">2051</span>
<span class="normal">2052</span>
<span class="normal">2053</span>
<span class="normal">2054</span>
<span class="normal">2055</span>
<span class="normal">2056</span>
<span class="normal">2057</span>
<span class="normal">2058</span>
<span class="normal">2059</span>
<span class="normal">2060</span>
<span class="normal">2061</span>
<span class="normal">2062</span>
<span class="normal">2063</span>
<span class="normal">2064</span>
<span class="normal">2065</span>
<span class="normal">2066</span>
<span class="normal">2067</span>
<span class="normal">2068</span>
<span class="normal">2069</span>
<span class="normal">2070</span>
<span class="normal">2071</span>
<span class="normal">2072</span>
<span class="normal">2073</span>
<span class="normal">2074</span>
<span class="normal">2075</span>
<span class="normal">2076</span>
<span class="normal">2077</span>
<span class="normal">2078</span>
<span class="normal">2079</span>
<span class="normal">2080</span>
<span class="normal">2081</span>
<span class="normal">2082</span>
<span class="normal">2083</span>
<span class="normal">2084</span>
<span class="normal">2085</span>
<span class="normal">2086</span>
<span class="normal">2087</span>
<span class="normal">2088</span>
<span class="normal">2089</span>
<span class="normal">2090</span>
<span class="normal">2091</span>
<span class="normal">2092</span>
<span class="normal">2093</span>
<span class="normal">2094</span>
<span class="normal">2095</span>
<span class="normal">2096</span>
<span class="normal">2097</span>
<span class="normal">2098</span>
<span class="normal">2099</span>
<span class="normal">2100</span>
<span class="normal">2101</span>
<span class="normal">2102</span>
<span class="normal">2103</span>
<span class="normal">2104</span>
<span class="normal">2105</span>
<span class="normal">2106</span>
<span class="normal">2107</span>
<span class="normal">2108</span>
<span class="normal">2109</span>
<span class="normal">2110</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ChatService</span><span class="p">(</span><span class="n">ChatServiceDeprecated</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Provides all functionalities to manage the chat session.&quot;&quot;&quot;</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">update_debug_info_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">debug_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Updates the debug information for the chat session.</span>

<span class="sd">        Args:</span>
<span class="sd">            debug_info (dict): The new debug information.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="n">modify_message_async</span><span class="p">(</span>
            <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
            <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
            <span class="n">assistant_message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_assistant_message_id</span><span class="p">,</span>
            <span class="n">chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span>
            <span class="n">user_message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_message_id</span><span class="p">,</span>
            <span class="n">user_message_text</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_message_text</span><span class="p">,</span>
            <span class="n">assistant</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">debug_info</span><span class="o">=</span><span class="n">debug_info</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">replace_debug_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">debug_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Replace the debug information in the last user message</span>

<span class="sd">        Args:</span>
<span class="sd">            debug_info (dict): The new debug information.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">modify_message</span><span class="p">(</span>
            <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
            <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
            <span class="n">assistant_message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_assistant_message_id</span><span class="p">,</span>
            <span class="n">chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span>
            <span class="n">user_message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_message_id</span><span class="p">,</span>
            <span class="n">user_message_text</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_message_text</span><span class="p">,</span>
            <span class="n">assistant</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">debug_info</span><span class="o">=</span><span class="n">debug_info</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="c1"># Message Methods</span>
    <span class="c1">############################################################################</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">modify_user_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">content</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">references</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentReference</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">debug_info</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">set_completed_at</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ChatMessage</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Modifies a user message in the chat session synchronously.</span>

<span class="sd">        Args:</span>
<span class="sd">            content (str): The new content for the message.</span>
<span class="sd">            references (list[ContentReference]): list of ContentReference objects.</span>
<span class="sd">            debug_info (dict[str, Any]]]): Debug information.</span>
<span class="sd">            message_id (str, optional): The message ID, if not specified the last user message is edited.</span>
<span class="sd">            set_completed_at (Optional[bool]): Whether to set the completedAt field with the current date time. Defaults to False.</span>

<span class="sd">        Returns:</span>
<span class="sd">            ChatMessage: The modified message.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the modification fails.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">modify_message</span><span class="p">(</span>
            <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
            <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
            <span class="n">assistant_message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_assistant_message_id</span><span class="p">,</span>
            <span class="n">chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span>
            <span class="n">user_message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_message_id</span><span class="p">,</span>
            <span class="n">user_message_text</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_message_text</span><span class="p">,</span>
            <span class="n">assistant</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">,</span>
            <span class="n">references</span><span class="o">=</span><span class="n">references</span><span class="p">,</span>
            <span class="n">debug_info</span><span class="o">=</span><span class="n">debug_info</span><span class="p">,</span>
            <span class="n">message_id</span><span class="o">=</span><span class="n">message_id</span><span class="p">,</span>
            <span class="n">set_completed_at</span><span class="o">=</span><span class="n">set_completed_at</span> <span class="ow">or</span> <span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">modify_user_message_async</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">content</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">references</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentReference</span><span class="p">]</span> <span class="o">=</span> <span class="p">[],</span>
        <span class="n">debug_info</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{},</span>
        <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">set_completed_at</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ChatMessage</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Modifies a message in the chat session asynchronously.</span>

<span class="sd">        Args:</span>
<span class="sd">            content (str): The new content for the message.</span>
<span class="sd">            message_id (str, optional): The message ID. Defaults to None, then the ChatState user message id is used.</span>
<span class="sd">            references (list[ContentReference]): list of ContentReference objects. Defaults to None.</span>
<span class="sd">            debug_info (dict[str, Any]]]): Debug information. Defaults to {}.</span>
<span class="sd">            set_completed_at (bool, optional): Whether to set the completedAt field with the current date time. Defaults to False.</span>

<span class="sd">        Returns:</span>
<span class="sd">            ChatMessage: The modified message.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the modification fails.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="n">modify_message_async</span><span class="p">(</span>
            <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
            <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
            <span class="n">assistant_message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_assistant_message_id</span><span class="p">,</span>
            <span class="n">chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span>
            <span class="n">user_message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_message_id</span><span class="p">,</span>
            <span class="n">user_message_text</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_message_text</span><span class="p">,</span>
            <span class="n">assistant</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">,</span>
            <span class="n">references</span><span class="o">=</span><span class="n">references</span><span class="p">,</span>
            <span class="n">debug_info</span><span class="o">=</span><span class="n">debug_info</span><span class="p">,</span>
            <span class="n">message_id</span><span class="o">=</span><span class="n">message_id</span><span class="p">,</span>
            <span class="n">set_completed_at</span><span class="o">=</span><span class="n">set_completed_at</span> <span class="ow">or</span> <span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">modify_assistant_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">content</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">original_content</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">references</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentReference</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">debug_info</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">set_completed_at</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ChatMessage</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Modifies a message in the chat session synchronously if parameter is not specified the corresponding field will remain as is.</span>

<span class="sd">        Args:</span>
<span class="sd">            content (str, optional): The new content for the message.</span>
<span class="sd">            original_content (str, optional): The original content for the message.</span>
<span class="sd">            references (list[ContentReference]): list of ContentReference objects. Defaults to [].</span>
<span class="sd">            debug_info (dict[str, Any]]]): Debug information. Defaults to {}.</span>
<span class="sd">            message_id (Optional[str]): The message ID. Defaults to None.</span>
<span class="sd">            set_completed_at (Optional[bool]): Whether to set the completedAt field with the current date time. Defaults to False.</span>

<span class="sd">        Returns:</span>
<span class="sd">            ChatMessage: The modified message.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the modification fails.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="n">modify_message</span><span class="p">(</span>
            <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
            <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
            <span class="n">assistant_message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_assistant_message_id</span><span class="p">,</span>
            <span class="n">chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span>
            <span class="n">user_message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_message_id</span><span class="p">,</span>
            <span class="n">user_message_text</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_message_text</span><span class="p">,</span>
            <span class="n">assistant</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">,</span>
            <span class="n">original_content</span><span class="o">=</span><span class="n">original_content</span><span class="p">,</span>
            <span class="n">references</span><span class="o">=</span><span class="n">references</span><span class="p">,</span>
            <span class="n">debug_info</span><span class="o">=</span><span class="n">debug_info</span><span class="p">,</span>
            <span class="n">message_id</span><span class="o">=</span><span class="n">message_id</span><span class="p">,</span>
            <span class="n">set_completed_at</span><span class="o">=</span><span class="n">set_completed_at</span> <span class="ow">or</span> <span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">modify_assistant_message_async</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">content</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">original_content</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">references</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentReference</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">debug_info</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">set_completed_at</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ChatMessage</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Modifies a message in the chat session asynchronously.</span>

<span class="sd">        Args:</span>
<span class="sd">            content (str, optional): The new content for the message.</span>
<span class="sd">            original_content (str, optional): The original content for the message.</span>
<span class="sd">            message_id (str, optional): The message ID. Defaults to None, then the ChatState assistant message id is used.</span>
<span class="sd">            references (list[ContentReference]): list of ContentReference objects. Defaults to None.</span>
<span class="sd">            debug_info (dict[str, Any]], optional): Debug information. Defaults to None.</span>
<span class="sd">            set_completed_at (bool, optional): Whether to set the completedAt field with the current date time. Defaults to False.</span>

<span class="sd">        Returns:</span>
<span class="sd">            ChatMessage: The modified message.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the modification fails.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="n">modify_message_async</span><span class="p">(</span>
            <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
            <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
            <span class="n">assistant_message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_assistant_message_id</span><span class="p">,</span>
            <span class="n">chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span>
            <span class="n">user_message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_message_id</span><span class="p">,</span>
            <span class="n">user_message_text</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_message_text</span><span class="p">,</span>
            <span class="n">assistant</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">,</span>
            <span class="n">original_content</span><span class="o">=</span><span class="n">original_content</span><span class="p">,</span>
            <span class="n">references</span><span class="o">=</span><span class="n">references</span><span class="p">,</span>
            <span class="n">debug_info</span><span class="o">=</span><span class="n">debug_info</span><span class="p">,</span>
            <span class="n">message_id</span><span class="o">=</span><span class="n">message_id</span><span class="p">,</span>
            <span class="n">set_completed_at</span><span class="o">=</span><span class="n">set_completed_at</span> <span class="ow">or</span> <span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create_assistant_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">content</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">original_content</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">references</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentReference</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">debug_info</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">set_completed_at</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ChatMessage</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a message in the chat session synchronously.</span>

<span class="sd">        Args:</span>
<span class="sd">            content (str): The content for the message.</span>
<span class="sd">            original_content (str, optional): The original content for the message.</span>
<span class="sd">            references (list[ContentReference]): list of ContentReference objects. Defaults to None.</span>
<span class="sd">            debug_info (dict[str, Any]]): Debug information. Defaults to None.</span>
<span class="sd">            set_completed_at (Optional[bool]): Whether to set the completedAt field with the current date time. Defaults to False.</span>

<span class="sd">        Returns:</span>
<span class="sd">            ChatMessage: The created message.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the creation fails.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">chat_message</span> <span class="o">=</span> <span class="n">create_message</span><span class="p">(</span>
            <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
            <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
            <span class="n">chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span>
            <span class="n">assistant_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_assistant_id</span><span class="p">,</span>
            <span class="n">role</span><span class="o">=</span><span class="n">ChatMessageRole</span><span class="o">.</span><span class="n">ASSISTANT</span><span class="p">,</span>
            <span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">,</span>
            <span class="n">original_content</span><span class="o">=</span><span class="n">original_content</span><span class="p">,</span>
            <span class="n">references</span><span class="o">=</span><span class="n">references</span><span class="p">,</span>
            <span class="n">debug_info</span><span class="o">=</span><span class="n">debug_info</span><span class="p">,</span>
            <span class="n">set_completed_at</span><span class="o">=</span><span class="n">set_completed_at</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="c1"># Update the assistant message id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_assistant_message_id</span> <span class="o">=</span> <span class="n">chat_message</span><span class="o">.</span><span class="n">id</span> <span class="ow">or</span> <span class="s2">&quot;unknown&quot;</span>
        <span class="k">return</span> <span class="n">chat_message</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">create_assistant_message_async</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">content</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">original_content</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">references</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentReference</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">debug_info</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">set_completed_at</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ChatMessage</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a message in the chat session asynchronously.</span>

<span class="sd">        Args:</span>
<span class="sd">            content (str): The content for the message.</span>
<span class="sd">            original_content (str, optional): The original content for the message.</span>
<span class="sd">            references (list[ContentReference]): list of references. Defaults to None.</span>
<span class="sd">            debug_info (dict[str, Any]]): Debug information. Defaults to None.</span>
<span class="sd">            set_completed_at (Optional[bool]): Whether to set the completedAt field with the current date time. Defaults to False.</span>

<span class="sd">        Returns:</span>
<span class="sd">            ChatMessage: The created message.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the creation fails.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">chat_message</span> <span class="o">=</span> <span class="k">await</span> <span class="n">create_message_async</span><span class="p">(</span>
            <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
            <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
            <span class="n">chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span>
            <span class="n">assistant_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_assistant_id</span><span class="p">,</span>
            <span class="n">role</span><span class="o">=</span><span class="n">ChatMessageRole</span><span class="o">.</span><span class="n">ASSISTANT</span><span class="p">,</span>
            <span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">,</span>
            <span class="n">original_content</span><span class="o">=</span><span class="n">original_content</span><span class="p">,</span>
            <span class="n">references</span><span class="o">=</span><span class="n">references</span><span class="p">,</span>
            <span class="n">debug_info</span><span class="o">=</span><span class="n">debug_info</span><span class="p">,</span>
            <span class="n">set_completed_at</span><span class="o">=</span><span class="n">set_completed_at</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="c1"># Update the assistant message id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_assistant_message_id</span> <span class="o">=</span> <span class="n">chat_message</span><span class="o">.</span><span class="n">id</span> <span class="ow">or</span> <span class="s2">&quot;unknown&quot;</span>
        <span class="k">return</span> <span class="n">chat_message</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create_user_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">content</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">original_content</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">references</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentReference</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">debug_info</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">set_completed_at</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ChatMessage</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a user message in the chat session synchronously.</span>

<span class="sd">        Args:</span>
<span class="sd">            content (str): The content for the message.</span>
<span class="sd">            original_content (str, optional): The original content for the message.</span>
<span class="sd">            references (list[ContentReference]): list of ContentReference objects. Defaults to None.</span>
<span class="sd">            debug_info (dict[str, Any]]): Debug information. Defaults to None.</span>
<span class="sd">            set_completed_at (Optional[bool]): Whether to set the completedAt field with the current date time. Defaults to False.</span>

<span class="sd">        Returns:</span>
<span class="sd">            ChatMessage: The created message.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the creation fails.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">chat_message</span> <span class="o">=</span> <span class="n">create_message</span><span class="p">(</span>
            <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
            <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
            <span class="n">chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span>
            <span class="n">assistant_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_assistant_id</span><span class="p">,</span>
            <span class="n">role</span><span class="o">=</span><span class="n">ChatMessageRole</span><span class="o">.</span><span class="n">USER</span><span class="p">,</span>
            <span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">,</span>
            <span class="n">original_content</span><span class="o">=</span><span class="n">original_content</span><span class="p">,</span>
            <span class="n">references</span><span class="o">=</span><span class="n">references</span><span class="p">,</span>
            <span class="n">debug_info</span><span class="o">=</span><span class="n">debug_info</span><span class="p">,</span>
            <span class="n">set_completed_at</span><span class="o">=</span><span class="n">set_completed_at</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="c1"># Update the user message id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_user_message_id</span> <span class="o">=</span> <span class="n">chat_message</span><span class="o">.</span><span class="n">id</span> <span class="ow">or</span> <span class="s2">&quot;unknown&quot;</span>
        <span class="k">return</span> <span class="n">chat_message</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">create_user_message_async</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">content</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">original_content</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">references</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentReference</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">debug_info</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">set_completed_at</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ChatMessage</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a user message in the chat session asynchronously.</span>

<span class="sd">        Args:</span>
<span class="sd">            content (str): The content for the message.</span>
<span class="sd">            original_content (str, optional): The original content for the message.</span>
<span class="sd">            references (list[ContentReference]): list of references. Defaults to None.</span>
<span class="sd">            debug_info (dict[str, Any]]): Debug information. Defaults to None.</span>
<span class="sd">            set_completed_at (Optional[bool]): Whether to set the completedAt field with the current date time. Defaults to False.</span>

<span class="sd">        Returns:</span>
<span class="sd">            ChatMessage: The created message.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the creation fails.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">chat_message</span> <span class="o">=</span> <span class="k">await</span> <span class="n">create_message_async</span><span class="p">(</span>
            <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
            <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
            <span class="n">chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span>
            <span class="n">assistant_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_assistant_id</span><span class="p">,</span>
            <span class="n">role</span><span class="o">=</span><span class="n">ChatMessageRole</span><span class="o">.</span><span class="n">USER</span><span class="p">,</span>
            <span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">,</span>
            <span class="n">original_content</span><span class="o">=</span><span class="n">original_content</span><span class="p">,</span>
            <span class="n">references</span><span class="o">=</span><span class="n">references</span><span class="p">,</span>
            <span class="n">debug_info</span><span class="o">=</span><span class="n">debug_info</span><span class="p">,</span>
            <span class="n">set_completed_at</span><span class="o">=</span><span class="n">set_completed_at</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="c1"># Update the user message id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_user_message_id</span> <span class="o">=</span> <span class="n">chat_message</span><span class="o">.</span><span class="n">id</span> <span class="ow">or</span> <span class="s2">&quot;unknown&quot;</span>
        <span class="k">return</span> <span class="n">chat_message</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">free_user_input</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Unblocks the next user input&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">modify_assistant_message</span><span class="p">(</span><span class="n">set_completed_at</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># History Methods</span>
    <span class="c1">############################################################################</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_full_history</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">ChatMessage</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Loads the full chat history for the chat session synchronously.</span>

<span class="sd">        Returns:</span>
<span class="sd">            list[ChatMessage]: The full chat history.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the loading fails.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">get_full_history</span><span class="p">(</span>
            <span class="n">event_user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
            <span class="n">event_company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
            <span class="n">event_payload_chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_full_history_async</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">ChatMessage</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Loads the full chat history for the chat session asynchronously.</span>

<span class="sd">        Returns:</span>
<span class="sd">            list[ChatMessage]: The full chat history.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the loading fails.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="n">get_full_history_async</span><span class="p">(</span>
            <span class="n">event_user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
            <span class="n">event_company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
            <span class="n">event_payload_chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_full_and_selected_history</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">token_limit</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">percent_of_max_tokens</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_PERCENT_OF_MAX_TOKENS</span><span class="p">,</span>
        <span class="n">max_messages</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">DEFAULT_MAX_MESSAGES</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">ChatMessage</span><span class="p">],</span> <span class="nb">list</span><span class="p">[</span><span class="n">ChatMessage</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Loads the chat history for the chat session synchronously.</span>

<span class="sd">        Args:</span>
<span class="sd">            token_limit (int): The maximum number of tokens to load.</span>
<span class="sd">            percent_of_max_tokens (float): The percentage of the maximum tokens to load. Defaults to 0.15.</span>
<span class="sd">            max_messages (int): The maximum number of messages to load. Defaults to 4.</span>

<span class="sd">        Returns:</span>
<span class="sd">            tuple[list[ChatMessage], list[ChatMessage]]: The selected and full chat history.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the loading fails.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">full_history</span> <span class="o">=</span> <span class="n">get_full_history</span><span class="p">(</span>
            <span class="n">event_user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
            <span class="n">event_company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
            <span class="n">event_payload_chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">selected_history</span> <span class="o">=</span> <span class="n">get_selection_from_history</span><span class="p">(</span>
            <span class="n">full_history</span><span class="o">=</span><span class="n">full_history</span><span class="p">,</span>
            <span class="n">max_tokens</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">token_limit</span> <span class="o">*</span> <span class="n">percent_of_max_tokens</span><span class="p">)),</span>
            <span class="n">max_messages</span><span class="o">=</span><span class="n">max_messages</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">full_history</span><span class="p">,</span> <span class="n">selected_history</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_full_and_selected_history_async</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">token_limit</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">percent_of_max_tokens</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_PERCENT_OF_MAX_TOKENS</span><span class="p">,</span>
        <span class="n">max_messages</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">DEFAULT_MAX_MESSAGES</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">ChatMessage</span><span class="p">],</span> <span class="nb">list</span><span class="p">[</span><span class="n">ChatMessage</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Loads the chat history for the chat session asynchronously.</span>

<span class="sd">        Args:</span>
<span class="sd">            token_limit (int): The maximum number of tokens to load.</span>
<span class="sd">            percent_of_max_tokens (float): The percentage of the maximum tokens to load. Defaults to 0.15.</span>
<span class="sd">            max_messages (int): The maximum number of messages to load. Defaults to 4.</span>

<span class="sd">        Returns:</span>
<span class="sd">            tuple[list[ChatMessage], list[ChatMessage]]: The selected and full chat history.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the loading fails.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">full_history</span> <span class="o">=</span> <span class="k">await</span> <span class="n">get_full_history_async</span><span class="p">(</span>
            <span class="n">event_user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
            <span class="n">event_company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
            <span class="n">event_payload_chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">selected_history</span> <span class="o">=</span> <span class="n">get_selection_from_history</span><span class="p">(</span>
            <span class="n">full_history</span><span class="o">=</span><span class="n">full_history</span><span class="p">,</span>
            <span class="n">max_tokens</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">token_limit</span> <span class="o">*</span> <span class="n">percent_of_max_tokens</span><span class="p">)),</span>
            <span class="n">max_messages</span><span class="o">=</span><span class="n">max_messages</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">full_history</span><span class="p">,</span> <span class="n">selected_history</span>

    <span class="c1"># Message Assessment Methods</span>
    <span class="c1">############################################################################</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create_message_assessment</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">assistant_message_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">status</span><span class="p">:</span> <span class="n">ChatMessageAssessmentStatus</span><span class="p">,</span>
        <span class="nb">type</span><span class="p">:</span> <span class="n">ChatMessageAssessmentType</span><span class="p">,</span>
        <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">explanation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">label</span><span class="p">:</span> <span class="n">ChatMessageAssessmentLabel</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">is_visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ChatMessageAssessment</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a message assessment for an assistant message synchronously.</span>

<span class="sd">        Args:</span>
<span class="sd">            assistant_message_id (str): The ID of the assistant message to assess</span>
<span class="sd">            status (MessageAssessmentStatus): The status of the assessment (e.g. &quot;DONE&quot;)</span>
<span class="sd">            type (MessageAssessmentType): The type of assessment (e.g. &quot;HALLUCINATION&quot;)</span>
<span class="sd">            title (str | None): The title of the assessment</span>
<span class="sd">            explanation (str | None): Explanation of the assessment</span>
<span class="sd">            label (MessageAssessmentLabel | None): The assessment label (e.g. &quot;RED&quot;)</span>
<span class="sd">            is_visible (bool): Whether the assessment is visible to users. Defaults to True.</span>

<span class="sd">        Returns:</span>
<span class="sd">            ChatMessageAssessment: The created message assessment</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the creation fails</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">create_message_assessment</span><span class="p">(</span>
            <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
            <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
            <span class="n">assistant_message_id</span><span class="o">=</span><span class="n">assistant_message_id</span><span class="p">,</span>
            <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="nb">type</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
            <span class="n">explanation</span><span class="o">=</span><span class="n">explanation</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
            <span class="n">is_visible</span><span class="o">=</span><span class="n">is_visible</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">create_message_assessment_async</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">assistant_message_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">status</span><span class="p">:</span> <span class="n">ChatMessageAssessmentStatus</span><span class="p">,</span>
        <span class="nb">type</span><span class="p">:</span> <span class="n">ChatMessageAssessmentType</span><span class="p">,</span>
        <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">explanation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">label</span><span class="p">:</span> <span class="n">ChatMessageAssessmentLabel</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">is_visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ChatMessageAssessment</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a message assessment for an assistant message asynchronously.</span>

<span class="sd">        Args:</span>
<span class="sd">            assistant_message_id (str): The ID of the assistant message to assess</span>
<span class="sd">            status (ChatMessageAssessmentStatus): The status of the assessment (e.g. &quot;DONE&quot;)</span>
<span class="sd">            type (ChatMessageAssessmentType): The type of assessment (e.g. &quot;HALLUCINATION&quot;)</span>
<span class="sd">            title (str | None): The title of the assessment</span>
<span class="sd">            explanation (str | None): Explanation of the assessment</span>
<span class="sd">            label (ChatMessageAssessmentLabel | None): The assessment label (e.g. &quot;RED&quot;)</span>
<span class="sd">            is_visible (bool): Whether the assessment is visible to users. Defaults to True.</span>

<span class="sd">        Returns:</span>
<span class="sd">            ChatMessageAssessment: The created message assessment</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the creation fails</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="n">create_message_assessment_async</span><span class="p">(</span>
            <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
            <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
            <span class="n">assistant_message_id</span><span class="o">=</span><span class="n">assistant_message_id</span><span class="p">,</span>
            <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="nb">type</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
            <span class="n">explanation</span><span class="o">=</span><span class="n">explanation</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
            <span class="n">is_visible</span><span class="o">=</span><span class="n">is_visible</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">modify_message_assessment</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">assistant_message_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">status</span><span class="p">:</span> <span class="n">ChatMessageAssessmentStatus</span><span class="p">,</span>
        <span class="nb">type</span><span class="p">:</span> <span class="n">ChatMessageAssessmentType</span><span class="p">,</span>
        <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">explanation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">label</span><span class="p">:</span> <span class="n">ChatMessageAssessmentLabel</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ChatMessageAssessment</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Modifies a message assessment for an assistant message synchronously.</span>

<span class="sd">        Args:</span>
<span class="sd">            assistant_message_id (str): The ID of the assistant message to assess</span>
<span class="sd">            status (MessageAssessmentStatus): The status of the assessment (e.g. &quot;DONE&quot;)</span>
<span class="sd">            title (str | None): The title of the assessment</span>
<span class="sd">            explanation (str | None): Explanation of the assessment</span>
<span class="sd">            label (ChatMessageAssessmentLabel | None): The assessment label (e.g. &quot;RED&quot;)</span>
<span class="sd">            type (ChatMessageAssessmentType): The type of assessment (e.g. &quot;HALLUCINATION&quot;)</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: The modified message assessment</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the modification fails</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">modify_message_assessment</span><span class="p">(</span>
            <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
            <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
            <span class="n">assistant_message_id</span><span class="o">=</span><span class="n">assistant_message_id</span><span class="p">,</span>
            <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="nb">type</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
            <span class="n">explanation</span><span class="o">=</span><span class="n">explanation</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">modify_message_assessment_async</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">assistant_message_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="nb">type</span><span class="p">:</span> <span class="n">ChatMessageAssessmentType</span><span class="p">,</span>
        <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">status</span><span class="p">:</span> <span class="n">ChatMessageAssessmentStatus</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">explanation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">label</span><span class="p">:</span> <span class="n">ChatMessageAssessmentLabel</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ChatMessageAssessment</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Modifies a message assessment for an assistant message asynchronously.</span>

<span class="sd">        Args:</span>
<span class="sd">            assistant_message_id (str): The ID of the assistant message to assess</span>
<span class="sd">            status (ChatMessageAssessmentStatus): The status of the assessment (e.g. &quot;DONE&quot;)</span>
<span class="sd">            title (str | None): The title of the assessment</span>
<span class="sd">            explanation (str | None): Explanation of the assessment</span>
<span class="sd">            label (ChatMessageAssessmentLabel | None): The assessment label (e.g. &quot;RED&quot;)</span>
<span class="sd">            type (ChatMessageAssessmentType): The type of assessment (e.g. &quot;HALLUCINATION&quot;)</span>

<span class="sd">        Returns:</span>
<span class="sd">            ChatMessageAssessment: The modified message assessment</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the modification fails</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="n">modify_message_assessment_async</span><span class="p">(</span>
            <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
            <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
            <span class="n">assistant_message_id</span><span class="o">=</span><span class="n">assistant_message_id</span><span class="p">,</span>
            <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="nb">type</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
            <span class="n">explanation</span><span class="o">=</span><span class="n">explanation</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="c1"># Message Log Methods</span>
    <span class="c1">############################################################################</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create_message_log</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">status</span><span class="p">:</span> <span class="n">MessageLogStatus</span><span class="p">,</span>
        <span class="n">order</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">details</span><span class="p">:</span> <span class="n">MessageLogDetails</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">uncited_references</span><span class="p">:</span> <span class="n">MessageLogUncitedReferences</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">references</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentReference</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MessageLog</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a message log for tracking execution steps synchronously.</span>

<span class="sd">        Args:</span>
<span class="sd">            message_id (str): The ID of the message this log belongs to</span>
<span class="sd">            text (str): The log text content</span>
<span class="sd">            status (MessageLogStatus): The status of this log entry</span>
<span class="sd">            order (int): The order/sequence number of this log entry</span>
<span class="sd">            details (MessageLogDetails | None): Additional details about this log entry</span>
<span class="sd">            uncited_references (MessageLogUncitedReferences | None): References that are not cited</span>
<span class="sd">            references (list[ContentReference] | None): List of references for this log</span>

<span class="sd">        Returns:</span>
<span class="sd">            MessageLog: The created message log</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the creation fails</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">create_message_log</span><span class="p">(</span>
            <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
            <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
            <span class="n">message_id</span><span class="o">=</span><span class="n">message_id</span><span class="p">,</span>
            <span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>
            <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">,</span>
            <span class="n">order</span><span class="o">=</span><span class="n">order</span><span class="p">,</span>
            <span class="n">details</span><span class="o">=</span><span class="n">details</span><span class="p">,</span>
            <span class="n">uncited_references</span><span class="o">=</span><span class="n">uncited_references</span><span class="p">,</span>
            <span class="n">references</span><span class="o">=</span><span class="n">references</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">create_message_log_async</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">status</span><span class="p">:</span> <span class="n">MessageLogStatus</span><span class="p">,</span>
        <span class="n">order</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">details</span><span class="p">:</span> <span class="n">MessageLogDetails</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">uncited_references</span><span class="p">:</span> <span class="n">MessageLogUncitedReferences</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">references</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentReference</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MessageLog</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a message log for tracking execution steps asynchronously.</span>

<span class="sd">        Args:</span>
<span class="sd">            message_id (str): The ID of the message this log belongs to</span>
<span class="sd">            text (str): The log text content</span>
<span class="sd">            status (MessageLogStatus): The status of this log entry</span>
<span class="sd">            order (int): The order/sequence number of this log entry</span>
<span class="sd">            details (MessageLogDetails | None): Additional details about this log entry</span>
<span class="sd">            uncited_references (MessageLogUncitedReferences | None): References that are not cited</span>
<span class="sd">            references (list[ContentReference] | None): List of references for this log</span>

<span class="sd">        Returns:</span>
<span class="sd">            MessageLog: The created message log</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the creation fails</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="n">create_message_log_async</span><span class="p">(</span>
            <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
            <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
            <span class="n">message_id</span><span class="o">=</span><span class="n">message_id</span><span class="p">,</span>
            <span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>
            <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">,</span>
            <span class="n">order</span><span class="o">=</span><span class="n">order</span><span class="p">,</span>
            <span class="n">details</span><span class="o">=</span><span class="n">details</span><span class="p">,</span>
            <span class="n">uncited_references</span><span class="o">=</span><span class="n">uncited_references</span><span class="p">,</span>
            <span class="n">references</span><span class="o">=</span><span class="n">references</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">update_message_log</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">message_log_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">order</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">text</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">status</span><span class="p">:</span> <span class="n">MessageLogStatus</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">details</span><span class="p">:</span> <span class="n">MessageLogDetails</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">uncited_references</span><span class="p">:</span> <span class="n">MessageLogUncitedReferences</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">references</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentReference</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MessageLog</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Updates a message log synchronously.</span>

<span class="sd">        Args:</span>
<span class="sd">            message_log_id (str): The ID of the message log to update</span>
<span class="sd">            order (int): The order/sequence number (required)</span>
<span class="sd">            text (str | None): The updated log text content</span>
<span class="sd">            status (MessageLogStatus | None): The updated status</span>
<span class="sd">            details (MessageLogDetails | None): Updated additional details</span>
<span class="sd">            uncited_references (MessageLogUncitedReferences | None): Updated uncited references</span>
<span class="sd">            references (list[ContentReference] | None): Updated list of references</span>

<span class="sd">        Returns:</span>
<span class="sd">            MessageLog: The updated message log</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the update fails</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">update_message_log</span><span class="p">(</span>
            <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
            <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
            <span class="n">message_log_id</span><span class="o">=</span><span class="n">message_log_id</span><span class="p">,</span>
            <span class="n">order</span><span class="o">=</span><span class="n">order</span><span class="p">,</span>
            <span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>
            <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">,</span>
            <span class="n">details</span><span class="o">=</span><span class="n">details</span><span class="p">,</span>
            <span class="n">uncited_references</span><span class="o">=</span><span class="n">uncited_references</span><span class="p">,</span>
            <span class="n">references</span><span class="o">=</span><span class="n">references</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">update_message_log_async</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">message_log_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">order</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">text</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">status</span><span class="p">:</span> <span class="n">MessageLogStatus</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">details</span><span class="p">:</span> <span class="n">MessageLogDetails</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">uncited_references</span><span class="p">:</span> <span class="n">MessageLogUncitedReferences</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">references</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentReference</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MessageLog</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Updates a message log asynchronously.</span>

<span class="sd">        Args:</span>
<span class="sd">            message_log_id (str): The ID of the message log to update</span>
<span class="sd">            order (int): The order/sequence number (required)</span>
<span class="sd">            text (str | None): The updated log text content</span>
<span class="sd">            status (MessageLogStatus | None): The updated status</span>
<span class="sd">            details (MessageLogDetails | None): Updated additional details</span>
<span class="sd">            uncited_references (MessageLogUncitedReferences | None): Updated uncited references</span>
<span class="sd">            references (list[ContentReference] | None): Updated list of references</span>

<span class="sd">        Returns:</span>
<span class="sd">            MessageLog: The updated message log</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the update fails</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="n">update_message_log_async</span><span class="p">(</span>
            <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
            <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
            <span class="n">message_log_id</span><span class="o">=</span><span class="n">message_log_id</span><span class="p">,</span>
            <span class="n">order</span><span class="o">=</span><span class="n">order</span><span class="p">,</span>
            <span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>
            <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">,</span>
            <span class="n">details</span><span class="o">=</span><span class="n">details</span><span class="p">,</span>
            <span class="n">uncited_references</span><span class="o">=</span><span class="n">uncited_references</span><span class="p">,</span>
            <span class="n">references</span><span class="o">=</span><span class="n">references</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create_assistant_message_log</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">status</span><span class="p">:</span> <span class="n">MessageLogStatus</span><span class="p">,</span>
        <span class="n">order</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">details</span><span class="p">:</span> <span class="n">MessageLogDetails</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">uncited_references</span><span class="p">:</span> <span class="n">MessageLogUncitedReferences</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">references</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentReference</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MessageLog</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a message log for the current assistant message synchronously.</span>

<span class="sd">        This is a convenience method that uses the current assistant message ID.</span>

<span class="sd">        Args:</span>
<span class="sd">            text (str): The log text content</span>
<span class="sd">            status (MessageLogStatus): The status of this log entry</span>
<span class="sd">            order (int): The order/sequence number of this log entry</span>
<span class="sd">            details (MessageLogDetails | None): Additional details about this log entry</span>
<span class="sd">            uncited_references (MessageLogUncitedReferences | None): References that are not cited</span>
<span class="sd">            references (list[ContentReference] | None): List of references for this log</span>

<span class="sd">        Returns:</span>
<span class="sd">            MessageLog: The created message log</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the creation fails</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_message_log</span><span class="p">(</span>
            <span class="n">message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_assistant_message_id</span><span class="p">,</span>
            <span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>
            <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">,</span>
            <span class="n">order</span><span class="o">=</span><span class="n">order</span><span class="p">,</span>
            <span class="n">details</span><span class="o">=</span><span class="n">details</span><span class="p">,</span>
            <span class="n">uncited_references</span><span class="o">=</span><span class="n">uncited_references</span><span class="p">,</span>
            <span class="n">references</span><span class="o">=</span><span class="n">references</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">create_assistant_message_log_async</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">status</span><span class="p">:</span> <span class="n">MessageLogStatus</span><span class="p">,</span>
        <span class="n">order</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">details</span><span class="p">:</span> <span class="n">MessageLogDetails</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">uncited_references</span><span class="p">:</span> <span class="n">MessageLogUncitedReferences</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">references</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentReference</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MessageLog</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a message log for the current assistant message asynchronously.</span>

<span class="sd">        This is a convenience method that uses the current assistant message ID.</span>

<span class="sd">        Args:</span>
<span class="sd">            text (str): The log text content</span>
<span class="sd">            status (MessageLogStatus): The status of this log entry</span>
<span class="sd">            order (int): The order/sequence number of this log entry</span>
<span class="sd">            details (MessageLogDetails | None): Additional details about this log entry</span>
<span class="sd">            uncited_references (MessageLogUncitedReferences | None): References that are not cited</span>
<span class="sd">            references (list[ContentReference] | None): List of references for this log</span>

<span class="sd">        Returns:</span>
<span class="sd">            MessageLog: The created message log</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the creation fails</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_message_log_async</span><span class="p">(</span>
            <span class="n">message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_assistant_message_id</span><span class="p">,</span>
            <span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>
            <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">,</span>
            <span class="n">order</span><span class="o">=</span><span class="n">order</span><span class="p">,</span>
            <span class="n">details</span><span class="o">=</span><span class="n">details</span><span class="p">,</span>
            <span class="n">uncited_references</span><span class="o">=</span><span class="n">uncited_references</span><span class="p">,</span>
            <span class="n">references</span><span class="o">=</span><span class="n">references</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="c1"># Message Execution Methods</span>
    <span class="c1">############################################################################</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create_message_execution</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="nb">type</span><span class="p">:</span> <span class="n">MessageExecutionType</span> <span class="o">=</span> <span class="n">MessageExecutionType</span><span class="o">.</span><span class="n">DEEP_RESEARCH</span><span class="p">,</span>
        <span class="n">seconds_remaining</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">percentage_completed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">is_queueable</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">execution_options</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">progress_title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MessageExecution</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a message execution for tracking long-running operations synchronously.</span>

<span class="sd">        Args:</span>
<span class="sd">            message_id (str): The ID of the message this execution belongs to</span>
<span class="sd">            type (MessageExecutionType): The type of execution. Defaults to DEEP_RESEARCH.</span>
<span class="sd">            seconds_remaining (int | None): Estimated seconds remaining for completion</span>
<span class="sd">            percentage_completed (int | None): Percentage of completion (0-100)</span>
<span class="sd">            is_queueable (bool): Whether the execution is queueable. Defaults to True. If true, then the progress will be updated in the background by the execution pipeline. Set to False if you want to update the progress manually.</span>
<span class="sd">            execution_options (dict | None): Additional execution options. Defaults to None.</span>
<span class="sd">            progress_title (str | None): The title of the progress bar. If not provided, the title of the last message log is taken.</span>

<span class="sd">        Returns:</span>
<span class="sd">            MessageExecution: The created message execution</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the creation fails</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">create_message_execution</span><span class="p">(</span>
            <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
            <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
            <span class="n">message_id</span><span class="o">=</span><span class="n">message_id</span><span class="p">,</span>
            <span class="n">chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="nb">type</span><span class="p">,</span>
            <span class="n">seconds_remaining</span><span class="o">=</span><span class="n">seconds_remaining</span><span class="p">,</span>
            <span class="n">percentage_completed</span><span class="o">=</span><span class="n">percentage_completed</span><span class="p">,</span>
            <span class="n">is_queueable</span><span class="o">=</span><span class="n">is_queueable</span><span class="p">,</span>
            <span class="n">execution_options</span><span class="o">=</span><span class="n">execution_options</span><span class="p">,</span>
            <span class="n">progress_title</span><span class="o">=</span><span class="n">progress_title</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">create_message_execution_async</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="nb">type</span><span class="p">:</span> <span class="n">MessageExecutionType</span> <span class="o">=</span> <span class="n">MessageExecutionType</span><span class="o">.</span><span class="n">DEEP_RESEARCH</span><span class="p">,</span>
        <span class="n">seconds_remaining</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">percentage_completed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">is_queueable</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">execution_options</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">progress_title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MessageExecution</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a message execution for tracking long-running operations asynchronously.</span>

<span class="sd">        Args:</span>
<span class="sd">            message_id (str): The ID of the message this execution belongs to</span>
<span class="sd">            type (MessageExecutionType): The type of execution. Defaults to DEEP_RESEARCH.</span>
<span class="sd">            seconds_remaining (int | None): Estimated seconds remaining for completion</span>
<span class="sd">            percentage_completed (int | None): Percentage of completion (0-100)</span>
<span class="sd">            is_queueable (bool): Whether the execution is queueable. Defaults to True. If true, then the progress will be updated in the background by the execution pipeline. Set to False if you want to update the progress manually.</span>
<span class="sd">            execution_options (dict | None): Additional execution options. Defaults to None.</span>
<span class="sd">            progress_title (str | None): The title of the progress bar. If not provided, the title of the last message log is taken.</span>

<span class="sd">        Returns:</span>
<span class="sd">            MessageExecution: The created message execution</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the creation fails</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="n">create_message_execution_async</span><span class="p">(</span>
            <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
            <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
            <span class="n">message_id</span><span class="o">=</span><span class="n">message_id</span><span class="p">,</span>
            <span class="n">chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="nb">type</span><span class="p">,</span>
            <span class="n">seconds_remaining</span><span class="o">=</span><span class="n">seconds_remaining</span><span class="p">,</span>
            <span class="n">percentage_completed</span><span class="o">=</span><span class="n">percentage_completed</span><span class="p">,</span>
            <span class="n">is_queueable</span><span class="o">=</span><span class="n">is_queueable</span><span class="p">,</span>
            <span class="n">execution_options</span><span class="o">=</span><span class="n">execution_options</span><span class="p">,</span>
            <span class="n">progress_title</span><span class="o">=</span><span class="n">progress_title</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_message_execution</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MessageExecution</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets a message execution by message ID synchronously.</span>

<span class="sd">        Args:</span>
<span class="sd">            message_id (str): The ID of the message to get execution for</span>

<span class="sd">        Returns:</span>
<span class="sd">            MessageExecution: The message execution</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the retrieval fails</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">get_message_execution</span><span class="p">(</span>
            <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
            <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
            <span class="n">message_id</span><span class="o">=</span><span class="n">message_id</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_message_execution_async</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MessageExecution</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets a message execution by message ID asynchronously.</span>

<span class="sd">        Args:</span>
<span class="sd">            message_id (str): The ID of the message to get execution for</span>

<span class="sd">        Returns:</span>
<span class="sd">            MessageExecution: The message execution</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the retrieval fails</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="n">get_message_execution_async</span><span class="p">(</span>
            <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
            <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
            <span class="n">message_id</span><span class="o">=</span><span class="n">message_id</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">update_message_execution</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">status</span><span class="p">:</span> <span class="n">MessageExecutionUpdateStatus</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">seconds_remaining</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">percentage_completed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">progress_title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MessageExecution</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Updates a message execution synchronously.</span>

<span class="sd">        Args:</span>
<span class="sd">            message_id (str): The ID of the message to update execution for</span>
<span class="sd">            status (MessageExecutionUpdateStatus | None): The updated status (COMPLETED or FAILED). Defaults to None</span>
<span class="sd">            seconds_remaining (int | None): Updated estimated seconds remaining</span>
<span class="sd">            percentage_completed (int | None): Updated percentage of completion (0-100)</span>
<span class="sd">            progress_title (str | None): The title of the progress bar. If not provided, the title of the last message log is taken.</span>

<span class="sd">        Returns:</span>
<span class="sd">            MessageExecution: The updated message execution</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the update fails</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">update_message_execution</span><span class="p">(</span>
            <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
            <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
            <span class="n">message_id</span><span class="o">=</span><span class="n">message_id</span><span class="p">,</span>
            <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">,</span>
            <span class="n">seconds_remaining</span><span class="o">=</span><span class="n">seconds_remaining</span><span class="p">,</span>
            <span class="n">percentage_completed</span><span class="o">=</span><span class="n">percentage_completed</span><span class="p">,</span>
            <span class="n">progress_title</span><span class="o">=</span><span class="n">progress_title</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">update_message_execution_async</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">status</span><span class="p">:</span> <span class="n">MessageExecutionUpdateStatus</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">seconds_remaining</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">percentage_completed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">progress_title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MessageExecution</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Updates a message execution asynchronously.</span>

<span class="sd">        Args:</span>
<span class="sd">            message_id (str): The ID of the message to update execution for</span>
<span class="sd">            status (MessageExecutionUpdateStatus | None): The updated status (COMPLETED or FAILED). Defaults to None</span>
<span class="sd">            seconds_remaining (int | None): Updated estimated seconds remaining</span>
<span class="sd">            percentage_completed (int | None): Updated percentage of completion (0-100)</span>
<span class="sd">            progress_title (str | None): The title of the progress bar. If not provided, the title of the last message log is taken.</span>

<span class="sd">        Returns:</span>
<span class="sd">            MessageExecution: The updated message execution</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the update fails</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="n">update_message_execution_async</span><span class="p">(</span>
            <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
            <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
            <span class="n">message_id</span><span class="o">=</span><span class="n">message_id</span><span class="p">,</span>
            <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">,</span>
            <span class="n">seconds_remaining</span><span class="o">=</span><span class="n">seconds_remaining</span><span class="p">,</span>
            <span class="n">percentage_completed</span><span class="o">=</span><span class="n">percentage_completed</span><span class="p">,</span>
            <span class="n">progress_title</span><span class="o">=</span><span class="n">progress_title</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create_assistant_message_execution</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="nb">type</span><span class="p">:</span> <span class="n">MessageExecutionType</span> <span class="o">=</span> <span class="n">MessageExecutionType</span><span class="o">.</span><span class="n">DEEP_RESEARCH</span><span class="p">,</span>
        <span class="n">seconds_remaining</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">percentage_completed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">is_queueable</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">execution_options</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">progress_title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MessageExecution</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a message execution for the current assistant message synchronously.</span>

<span class="sd">        This is a convenience method that uses the current assistant message ID.</span>

<span class="sd">        Args:</span>
<span class="sd">            type (MessageExecutionType): The type of execution. Defaults to DEEP_RESEARCH.</span>
<span class="sd">            seconds_remaining (int | None): Estimated seconds remaining for completion</span>
<span class="sd">            percentage_completed (int | None): Percentage of completion (0-100)</span>
<span class="sd">            is_queueable (bool): Whether the execution is queueable. Defaults to True. If true, then the progress will be updated in the background by the execution pipeline. Set to False if you want to update the progress manually.</span>
<span class="sd">            execution_options (dict | None): Additional execution options. Defaults to None.</span>
<span class="sd">            progress_title (str | None): The title of the progress bar. If not provided, the title of the last message log is taken.</span>

<span class="sd">        Returns:</span>
<span class="sd">            MessageExecution: The created message execution</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the creation fails</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_message_execution</span><span class="p">(</span>
            <span class="n">message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_assistant_message_id</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="nb">type</span><span class="p">,</span>
            <span class="n">seconds_remaining</span><span class="o">=</span><span class="n">seconds_remaining</span><span class="p">,</span>
            <span class="n">percentage_completed</span><span class="o">=</span><span class="n">percentage_completed</span><span class="p">,</span>
            <span class="n">is_queueable</span><span class="o">=</span><span class="n">is_queueable</span><span class="p">,</span>
            <span class="n">execution_options</span><span class="o">=</span><span class="n">execution_options</span><span class="p">,</span>
            <span class="n">progress_title</span><span class="o">=</span><span class="n">progress_title</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">create_assistant_message_execution_async</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="nb">type</span><span class="p">:</span> <span class="n">MessageExecutionType</span> <span class="o">=</span> <span class="n">MessageExecutionType</span><span class="o">.</span><span class="n">DEEP_RESEARCH</span><span class="p">,</span>
        <span class="n">seconds_remaining</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">percentage_completed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">is_queueable</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">execution_options</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">progress_title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MessageExecution</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a message execution for the current assistant message asynchronously.</span>

<span class="sd">        This is a convenience method that uses the current assistant message ID.</span>

<span class="sd">        Args:</span>
<span class="sd">            type (MessageExecutionType): The type of execution. Defaults to DEEP_RESEARCH.</span>
<span class="sd">            seconds_remaining (int | None): Estimated seconds remaining for completion</span>
<span class="sd">            percentage_completed (int | None): Percentage of completion (0-100)</span>
<span class="sd">            is_queueable (bool): Whether the execution is queueable. Defaults to True. If true, then the progress will be updated in the background by the execution pipeline. Set to False if you want to update the progress manually.</span>
<span class="sd">            execution_options (dict | None): Additional execution options. Defaults to None.</span>
<span class="sd">            progress_title (str | None): The title of the progress bar. If not provided, the title of the last message log is taken.</span>

<span class="sd">        Returns:</span>
<span class="sd">            MessageExecution: The created message execution</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the creation fails</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_message_execution_async</span><span class="p">(</span>
            <span class="n">message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_assistant_message_id</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="nb">type</span><span class="p">,</span>
            <span class="n">seconds_remaining</span><span class="o">=</span><span class="n">seconds_remaining</span><span class="p">,</span>
            <span class="n">percentage_completed</span><span class="o">=</span><span class="n">percentage_completed</span><span class="p">,</span>
            <span class="n">is_queueable</span><span class="o">=</span><span class="n">is_queueable</span><span class="p">,</span>
            <span class="n">execution_options</span><span class="o">=</span><span class="n">execution_options</span><span class="p">,</span>
            <span class="n">progress_title</span><span class="o">=</span><span class="n">progress_title</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_assistant_message_execution</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MessageExecution</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the message execution for the current assistant message synchronously.</span>

<span class="sd">        This is a convenience method that uses the current assistant message ID.</span>

<span class="sd">        Returns:</span>
<span class="sd">            MessageExecution: The message execution</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the retrieval fails</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_message_execution</span><span class="p">(</span><span class="n">message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_assistant_message_id</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_assistant_message_execution_async</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MessageExecution</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the message execution for the current assistant message asynchronously.</span>

<span class="sd">        This is a convenience method that uses the current assistant message ID.</span>

<span class="sd">        Returns:</span>
<span class="sd">            MessageExecution: The message execution</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the retrieval fails</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_message_execution_async</span><span class="p">(</span>
            <span class="n">message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_assistant_message_id</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">update_assistant_message_execution</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">status</span><span class="p">:</span> <span class="n">MessageExecutionUpdateStatus</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">seconds_remaining</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">percentage_completed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MessageExecution</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Updates the message execution for the current assistant message synchronously.</span>

<span class="sd">        This is a convenience method that uses the current assistant message ID.</span>

<span class="sd">        Args:</span>
<span class="sd">            status (MessageExecutionUpdateStatus | None): The updated status (COMPLETED or FAILED). Defaults to None</span>
<span class="sd">            seconds_remaining (int | None): Updated estimated seconds remaining</span>
<span class="sd">            percentage_completed (int | None): Updated percentage of completion (0-100)</span>

<span class="sd">        Returns:</span>
<span class="sd">            MessageExecution: The updated message execution</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the update fails</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">update_message_execution</span><span class="p">(</span>
            <span class="n">message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_assistant_message_id</span><span class="p">,</span>
            <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">,</span>
            <span class="n">seconds_remaining</span><span class="o">=</span><span class="n">seconds_remaining</span><span class="p">,</span>
            <span class="n">percentage_completed</span><span class="o">=</span><span class="n">percentage_completed</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">update_assistant_message_execution_async</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">status</span><span class="p">:</span> <span class="n">MessageExecutionUpdateStatus</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">seconds_remaining</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">percentage_completed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MessageExecution</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Updates the message execution for the current assistant message asynchronously.</span>

<span class="sd">        This is a convenience method that uses the current assistant message ID.</span>

<span class="sd">        Args:</span>
<span class="sd">            status (MessageExecutionUpdateStatus | None): The updated status (COMPLETED or FAILED). Defaults to None</span>
<span class="sd">            seconds_remaining (int | None): Updated estimated seconds remaining</span>
<span class="sd">            percentage_completed (int | None): Updated percentage of completion (0-100)</span>

<span class="sd">        Returns:</span>
<span class="sd">            MessageExecution: The updated message execution</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the update fails</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">update_message_execution_async</span><span class="p">(</span>
            <span class="n">message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_assistant_message_id</span><span class="p">,</span>
            <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">,</span>
            <span class="n">seconds_remaining</span><span class="o">=</span><span class="n">seconds_remaining</span><span class="p">,</span>
            <span class="n">percentage_completed</span><span class="o">=</span><span class="n">percentage_completed</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="c1"># Language Model Methods</span>
    <span class="c1">############################################################################</span>

    <span class="nd">@deprecated</span><span class="p">(</span><span class="s2">&quot;Use complete_with_references instead&quot;</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">stream_complete</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">messages</span><span class="p">:</span> <span class="n">LanguageModelMessages</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="n">ChatCompletionMessageParam</span><span class="p">],</span>
        <span class="n">model_name</span><span class="p">:</span> <span class="n">LanguageModelName</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">content_chunks</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentChunk</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">debug_info</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{},</span>
        <span class="n">temperature</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_COMPLETE_TEMPERATURE</span><span class="p">,</span>
        <span class="n">timeout</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">DEFAULT_COMPLETE_TIMEOUT</span><span class="p">,</span>
        <span class="n">tools</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">LanguageModelTool</span> <span class="o">|</span> <span class="n">LanguageModelToolDescription</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">start_text</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">tool_choice</span><span class="p">:</span> <span class="n">ChatCompletionToolChoiceOptionParam</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">other_options</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LanguageModelStreamResponse</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">complete_with_references</span><span class="p">(</span>
            <span class="n">messages</span><span class="o">=</span><span class="n">messages</span><span class="p">,</span>
            <span class="n">model_name</span><span class="o">=</span><span class="n">model_name</span><span class="p">,</span>
            <span class="n">content_chunks</span><span class="o">=</span><span class="n">content_chunks</span><span class="p">,</span>
            <span class="n">debug_info</span><span class="o">=</span><span class="n">debug_info</span><span class="p">,</span>
            <span class="n">temperature</span><span class="o">=</span><span class="n">temperature</span><span class="p">,</span>
            <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
            <span class="n">tools</span><span class="o">=</span><span class="n">tools</span><span class="p">,</span>
            <span class="n">start_text</span><span class="o">=</span><span class="n">start_text</span><span class="p">,</span>
            <span class="n">tool_choice</span><span class="o">=</span><span class="n">tool_choice</span><span class="p">,</span>
            <span class="n">other_options</span><span class="o">=</span><span class="n">other_options</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">complete_with_references</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">messages</span><span class="p">:</span> <span class="n">LanguageModelMessages</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="n">ChatCompletionMessageParam</span><span class="p">],</span>
        <span class="n">model_name</span><span class="p">:</span> <span class="n">LanguageModelName</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">content_chunks</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentChunk</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">debug_info</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">temperature</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_COMPLETE_TEMPERATURE</span><span class="p">,</span>
        <span class="n">timeout</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">DEFAULT_COMPLETE_TIMEOUT</span><span class="p">,</span>
        <span class="n">tools</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">LanguageModelTool</span> <span class="o">|</span> <span class="n">LanguageModelToolDescription</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">start_text</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">tool_choice</span><span class="p">:</span> <span class="n">ChatCompletionToolChoiceOptionParam</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">other_options</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LanguageModelStreamResponse</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Streams a completion in the chat session synchronously.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">stream_complete_with_references</span><span class="p">(</span>
            <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
            <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
            <span class="n">assistant_message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_assistant_message_id</span><span class="p">,</span>
            <span class="n">user_message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_message_id</span><span class="p">,</span>
            <span class="n">chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span>
            <span class="n">assistant_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_assistant_id</span><span class="p">,</span>
            <span class="n">messages</span><span class="o">=</span><span class="n">messages</span><span class="p">,</span>
            <span class="n">model_name</span><span class="o">=</span><span class="n">model_name</span><span class="p">,</span>
            <span class="n">content_chunks</span><span class="o">=</span><span class="n">content_chunks</span><span class="p">,</span>
            <span class="n">debug_info</span><span class="o">=</span><span class="n">debug_info</span><span class="p">,</span>
            <span class="n">temperature</span><span class="o">=</span><span class="n">temperature</span><span class="p">,</span>
            <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
            <span class="n">tools</span><span class="o">=</span><span class="n">tools</span><span class="p">,</span>
            <span class="n">start_text</span><span class="o">=</span><span class="n">start_text</span><span class="p">,</span>
            <span class="n">tool_choice</span><span class="o">=</span><span class="n">tool_choice</span><span class="p">,</span>
            <span class="n">other_options</span><span class="o">=</span><span class="n">other_options</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">complete</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">messages</span><span class="p">:</span> <span class="n">LanguageModelMessages</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="n">ChatCompletionMessageParam</span><span class="p">],</span>
        <span class="n">model_name</span><span class="p">:</span> <span class="n">LanguageModelName</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">content_chunks</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentChunk</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">debug_info</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">temperature</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_COMPLETE_TEMPERATURE</span><span class="p">,</span>
        <span class="n">timeout</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">DEFAULT_COMPLETE_TIMEOUT</span><span class="p">,</span>
        <span class="n">tools</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">LanguageModelTool</span> <span class="o">|</span> <span class="n">LanguageModelToolDescription</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">start_text</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">tool_choice</span><span class="p">:</span> <span class="n">ChatCompletionToolChoiceOptionParam</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">other_options</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LanguageModelResponse</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">complete_with_references</span><span class="p">(</span>
            <span class="n">messages</span><span class="o">=</span><span class="n">messages</span><span class="p">,</span>
            <span class="n">model_name</span><span class="o">=</span><span class="n">model_name</span><span class="p">,</span>
            <span class="n">content_chunks</span><span class="o">=</span><span class="n">content_chunks</span><span class="p">,</span>
            <span class="n">debug_info</span><span class="o">=</span><span class="n">debug_info</span><span class="p">,</span>
            <span class="n">temperature</span><span class="o">=</span><span class="n">temperature</span><span class="p">,</span>
            <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
            <span class="n">tools</span><span class="o">=</span><span class="n">tools</span><span class="p">,</span>
            <span class="n">start_text</span><span class="o">=</span><span class="n">start_text</span><span class="p">,</span>
            <span class="n">tool_choice</span><span class="o">=</span><span class="n">tool_choice</span><span class="p">,</span>
            <span class="n">other_options</span><span class="o">=</span><span class="n">other_options</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">LanguageModelResponse</span><span class="o">.</span><span class="n">from_stream_response</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="nd">@deprecated</span><span class="p">(</span><span class="s2">&quot;use complete_with_references_async instead.&quot;</span><span class="p">)</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">stream_complete_async</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">messages</span><span class="p">:</span> <span class="n">LanguageModelMessages</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="n">ChatCompletionMessageParam</span><span class="p">],</span>
        <span class="n">model_name</span><span class="p">:</span> <span class="n">LanguageModelName</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">content_chunks</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentChunk</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">debug_info</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">temperature</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_COMPLETE_TEMPERATURE</span><span class="p">,</span>
        <span class="n">timeout</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">DEFAULT_COMPLETE_TIMEOUT</span><span class="p">,</span>
        <span class="n">tools</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">LanguageModelTool</span> <span class="o">|</span> <span class="n">LanguageModelToolDescription</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">start_text</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">tool_choice</span><span class="p">:</span> <span class="n">ChatCompletionToolChoiceOptionParam</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">other_options</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LanguageModelStreamResponse</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Stream a completion in the chat session asynchronously.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">complete_with_references_async</span><span class="p">(</span>
            <span class="n">messages</span><span class="o">=</span><span class="n">messages</span><span class="p">,</span>
            <span class="n">model_name</span><span class="o">=</span><span class="n">model_name</span><span class="p">,</span>
            <span class="n">content_chunks</span><span class="o">=</span><span class="n">content_chunks</span><span class="p">,</span>
            <span class="n">debug_info</span><span class="o">=</span><span class="n">debug_info</span><span class="p">,</span>
            <span class="n">temperature</span><span class="o">=</span><span class="n">temperature</span><span class="p">,</span>
            <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
            <span class="n">tools</span><span class="o">=</span><span class="n">tools</span><span class="p">,</span>
            <span class="n">start_text</span><span class="o">=</span><span class="n">start_text</span><span class="p">,</span>
            <span class="n">tool_choice</span><span class="o">=</span><span class="n">tool_choice</span><span class="p">,</span>
            <span class="n">other_options</span><span class="o">=</span><span class="n">other_options</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">complete_with_references_async</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">messages</span><span class="p">:</span> <span class="n">LanguageModelMessages</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="n">ChatCompletionMessageParam</span><span class="p">],</span>
        <span class="n">model_name</span><span class="p">:</span> <span class="n">LanguageModelName</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">content_chunks</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentChunk</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">debug_info</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">temperature</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_COMPLETE_TEMPERATURE</span><span class="p">,</span>
        <span class="n">timeout</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">DEFAULT_COMPLETE_TIMEOUT</span><span class="p">,</span>
        <span class="n">tools</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">LanguageModelTool</span> <span class="o">|</span> <span class="n">LanguageModelToolDescription</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">tool_choice</span><span class="p">:</span> <span class="n">ChatCompletionToolChoiceOptionParam</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">start_text</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">other_options</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LanguageModelStreamResponse</span><span class="p">:</span>
        <span class="k">return</span> <span class="k">await</span> <span class="n">stream_complete_with_references_async</span><span class="p">(</span>
            <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
            <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
            <span class="n">assistant_message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_assistant_message_id</span><span class="p">,</span>
            <span class="n">user_message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_message_id</span><span class="p">,</span>
            <span class="n">chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span>
            <span class="n">assistant_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_assistant_id</span><span class="p">,</span>
            <span class="n">messages</span><span class="o">=</span><span class="n">messages</span><span class="p">,</span>
            <span class="n">model_name</span><span class="o">=</span><span class="n">model_name</span><span class="p">,</span>
            <span class="n">content_chunks</span><span class="o">=</span><span class="n">content_chunks</span><span class="p">,</span>
            <span class="n">debug_info</span><span class="o">=</span><span class="n">debug_info</span><span class="p">,</span>
            <span class="n">temperature</span><span class="o">=</span><span class="n">temperature</span><span class="p">,</span>
            <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
            <span class="n">tools</span><span class="o">=</span><span class="n">tools</span><span class="p">,</span>
            <span class="n">start_text</span><span class="o">=</span><span class="n">start_text</span><span class="p">,</span>
            <span class="n">tool_choice</span><span class="o">=</span><span class="n">tool_choice</span><span class="p">,</span>
            <span class="n">other_options</span><span class="o">=</span><span class="n">other_options</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">complete_async</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">messages</span><span class="p">:</span> <span class="n">LanguageModelMessages</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="n">ChatCompletionMessageParam</span><span class="p">],</span>
        <span class="n">model_name</span><span class="p">:</span> <span class="n">LanguageModelName</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">content_chunks</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentChunk</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">debug_info</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">temperature</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_COMPLETE_TEMPERATURE</span><span class="p">,</span>
        <span class="n">timeout</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">DEFAULT_COMPLETE_TIMEOUT</span><span class="p">,</span>
        <span class="n">tools</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">LanguageModelTool</span> <span class="o">|</span> <span class="n">LanguageModelToolDescription</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">start_text</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">tool_choice</span><span class="p">:</span> <span class="n">ChatCompletionToolChoiceOptionParam</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">other_options</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LanguageModelResponse</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">complete_with_references_async</span><span class="p">(</span>
            <span class="n">messages</span><span class="o">=</span><span class="n">messages</span><span class="p">,</span>
            <span class="n">model_name</span><span class="o">=</span><span class="n">model_name</span><span class="p">,</span>
            <span class="n">content_chunks</span><span class="o">=</span><span class="n">content_chunks</span><span class="p">,</span>
            <span class="n">debug_info</span><span class="o">=</span><span class="n">debug_info</span><span class="p">,</span>
            <span class="n">temperature</span><span class="o">=</span><span class="n">temperature</span><span class="p">,</span>
            <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
            <span class="n">tools</span><span class="o">=</span><span class="n">tools</span><span class="p">,</span>
            <span class="n">start_text</span><span class="o">=</span><span class="n">start_text</span><span class="p">,</span>
            <span class="n">tool_choice</span><span class="o">=</span><span class="n">tool_choice</span><span class="p">,</span>
            <span class="n">other_options</span><span class="o">=</span><span class="n">other_options</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">LanguageModelResponse</span><span class="o">.</span><span class="n">from_stream_response</span><span class="p">(</span><span class="k">await</span> <span class="n">response</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">complete_responses_with_references</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">model_name</span><span class="p">:</span> <span class="n">LanguageModelName</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">messages</span><span class="p">:</span> <span class="nb">str</span>
        <span class="o">|</span> <span class="n">LanguageModelMessages</span>
        <span class="o">|</span> <span class="n">Sequence</span><span class="p">[</span>
            <span class="n">ResponseInputItemParam</span>
            <span class="o">|</span> <span class="n">LanguageModelMessageOptions</span>
            <span class="o">|</span> <span class="n">ResponseOutputItem</span>  <span class="c1"># History is automatically convertible</span>
        <span class="p">],</span>
        <span class="n">content_chunks</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentChunk</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">tools</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">LanguageModelToolDescription</span> <span class="o">|</span> <span class="n">ToolParam</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">temperature</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_COMPLETE_TEMPERATURE</span><span class="p">,</span>
        <span class="n">debug_info</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">start_text</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">include</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ResponseIncludable</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">instructions</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">max_output_tokens</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">metadata</span><span class="p">:</span> <span class="n">Metadata</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">parallel_tool_calls</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">text</span><span class="p">:</span> <span class="n">ResponseTextConfigParam</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">tool_choice</span><span class="p">:</span> <span class="n">response_create_params</span><span class="o">.</span><span class="n">ToolChoice</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">top_p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">reasoning</span><span class="p">:</span> <span class="n">Reasoning</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">other_options</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ResponsesLanguageModelStreamResponse</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">stream_responses_with_references</span><span class="p">(</span>
            <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
            <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
            <span class="n">assistant_message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_assistant_message_id</span><span class="p">,</span>
            <span class="n">user_message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_message_id</span><span class="p">,</span>
            <span class="n">chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span>
            <span class="n">assistant_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_assistant_id</span><span class="p">,</span>
            <span class="n">model_name</span><span class="o">=</span><span class="n">model_name</span><span class="p">,</span>
            <span class="n">messages</span><span class="o">=</span><span class="n">messages</span><span class="p">,</span>
            <span class="n">content_chunks</span><span class="o">=</span><span class="n">content_chunks</span><span class="p">,</span>
            <span class="n">tools</span><span class="o">=</span><span class="n">tools</span><span class="p">,</span>
            <span class="n">temperature</span><span class="o">=</span><span class="n">temperature</span><span class="p">,</span>
            <span class="n">debug_info</span><span class="o">=</span><span class="n">debug_info</span><span class="p">,</span>
            <span class="n">start_text</span><span class="o">=</span><span class="n">start_text</span><span class="p">,</span>
            <span class="n">include</span><span class="o">=</span><span class="n">include</span><span class="p">,</span>
            <span class="n">instructions</span><span class="o">=</span><span class="n">instructions</span><span class="p">,</span>
            <span class="n">max_output_tokens</span><span class="o">=</span><span class="n">max_output_tokens</span><span class="p">,</span>
            <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span>
            <span class="n">parallel_tool_calls</span><span class="o">=</span><span class="n">parallel_tool_calls</span><span class="p">,</span>
            <span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>
            <span class="n">tool_choice</span><span class="o">=</span><span class="n">tool_choice</span><span class="p">,</span>
            <span class="n">top_p</span><span class="o">=</span><span class="n">top_p</span><span class="p">,</span>
            <span class="n">reasoning</span><span class="o">=</span><span class="n">reasoning</span><span class="p">,</span>
            <span class="n">other_options</span><span class="o">=</span><span class="n">other_options</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">complete_responses_with_references_async</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">model_name</span><span class="p">:</span> <span class="n">LanguageModelName</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">messages</span><span class="p">:</span> <span class="nb">str</span>
        <span class="o">|</span> <span class="n">LanguageModelMessages</span>
        <span class="o">|</span> <span class="n">Sequence</span><span class="p">[</span>
            <span class="n">ResponseInputItemParam</span> <span class="o">|</span> <span class="n">LanguageModelMessageOptions</span> <span class="o">|</span> <span class="n">ResponseOutputItem</span>
        <span class="p">],</span>
        <span class="n">content_chunks</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentChunk</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">tools</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">LanguageModelToolDescription</span> <span class="o">|</span> <span class="n">ToolParam</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">temperature</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_COMPLETE_TEMPERATURE</span><span class="p">,</span>
        <span class="n">debug_info</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">start_text</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">include</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ResponseIncludable</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">instructions</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">max_output_tokens</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">metadata</span><span class="p">:</span> <span class="n">Metadata</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">parallel_tool_calls</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">text</span><span class="p">:</span> <span class="n">ResponseTextConfigParam</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">tool_choice</span><span class="p">:</span> <span class="n">response_create_params</span><span class="o">.</span><span class="n">ToolChoice</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">top_p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">reasoning</span><span class="p">:</span> <span class="n">Reasoning</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">other_options</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ResponsesLanguageModelStreamResponse</span><span class="p">:</span>
        <span class="k">return</span> <span class="k">await</span> <span class="n">stream_responses_with_references_async</span><span class="p">(</span>
            <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
            <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
            <span class="n">assistant_message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_assistant_message_id</span><span class="p">,</span>
            <span class="n">user_message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_message_id</span><span class="p">,</span>
            <span class="n">chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span>
            <span class="n">assistant_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_assistant_id</span><span class="p">,</span>
            <span class="n">model_name</span><span class="o">=</span><span class="n">model_name</span><span class="p">,</span>
            <span class="n">messages</span><span class="o">=</span><span class="n">messages</span><span class="p">,</span>
            <span class="n">content_chunks</span><span class="o">=</span><span class="n">content_chunks</span><span class="p">,</span>
            <span class="n">tools</span><span class="o">=</span><span class="n">tools</span><span class="p">,</span>
            <span class="n">temperature</span><span class="o">=</span><span class="n">temperature</span><span class="p">,</span>
            <span class="n">debug_info</span><span class="o">=</span><span class="n">debug_info</span><span class="p">,</span>
            <span class="n">start_text</span><span class="o">=</span><span class="n">start_text</span><span class="p">,</span>
            <span class="n">include</span><span class="o">=</span><span class="n">include</span><span class="p">,</span>
            <span class="n">instructions</span><span class="o">=</span><span class="n">instructions</span><span class="p">,</span>
            <span class="n">max_output_tokens</span><span class="o">=</span><span class="n">max_output_tokens</span><span class="p">,</span>
            <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span>
            <span class="n">parallel_tool_calls</span><span class="o">=</span><span class="n">parallel_tool_calls</span><span class="p">,</span>
            <span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>
            <span class="n">tool_choice</span><span class="o">=</span><span class="n">tool_choice</span><span class="p">,</span>
            <span class="n">top_p</span><span class="o">=</span><span class="n">top_p</span><span class="p">,</span>
            <span class="n">reasoning</span><span class="o">=</span><span class="n">reasoning</span><span class="p">,</span>
            <span class="n">other_options</span><span class="o">=</span><span class="n">other_options</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="c1"># Chat Content Methods</span>
    <span class="c1">############################################################################</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">upload_to_chat_from_bytes</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">content</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span>
        <span class="n">content_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">mime_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">scope_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">skip_ingestion</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">hide_in_chat</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">ingestion_config</span><span class="p">:</span> <span class="n">unique_sdk</span><span class="o">.</span><span class="n">Content</span><span class="o">.</span><span class="n">IngestionConfig</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">metadata</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Content</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">upload_content_from_bytes</span><span class="p">(</span>
            <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
            <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
            <span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">,</span>
            <span class="n">content_name</span><span class="o">=</span><span class="n">content_name</span><span class="p">,</span>
            <span class="n">mime_type</span><span class="o">=</span><span class="n">mime_type</span><span class="p">,</span>
            <span class="n">scope_id</span><span class="o">=</span><span class="n">scope_id</span><span class="p">,</span>
            <span class="n">chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span>
            <span class="n">skip_ingestion</span><span class="o">=</span><span class="n">skip_ingestion</span><span class="p">,</span>
            <span class="n">hide_in_chat</span><span class="o">=</span><span class="n">hide_in_chat</span><span class="p">,</span>
            <span class="n">ingestion_config</span><span class="o">=</span><span class="n">ingestion_config</span><span class="p">,</span>
            <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">upload_to_chat_from_bytes_async</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">content</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span>
        <span class="n">content_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">mime_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">scope_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">skip_ingestion</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">hide_in_chat</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">ingestion_config</span><span class="p">:</span> <span class="n">unique_sdk</span><span class="o">.</span><span class="n">Content</span><span class="o">.</span><span class="n">IngestionConfig</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">metadata</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Content</span><span class="p">:</span>
        <span class="k">return</span> <span class="k">await</span> <span class="n">upload_content_from_bytes_async</span><span class="p">(</span>
            <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
            <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
            <span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">,</span>
            <span class="n">content_name</span><span class="o">=</span><span class="n">content_name</span><span class="p">,</span>
            <span class="n">mime_type</span><span class="o">=</span><span class="n">mime_type</span><span class="p">,</span>
            <span class="n">scope_id</span><span class="o">=</span><span class="n">scope_id</span><span class="p">,</span>
            <span class="n">chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span>
            <span class="n">skip_ingestion</span><span class="o">=</span><span class="n">skip_ingestion</span><span class="p">,</span>
            <span class="n">hide_in_chat</span><span class="o">=</span><span class="n">hide_in_chat</span><span class="p">,</span>
            <span class="n">ingestion_config</span><span class="o">=</span><span class="n">ingestion_config</span><span class="p">,</span>
            <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">download_chat_content_to_bytes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">content_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">download_content_to_bytes</span><span class="p">(</span>
            <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
            <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
            <span class="n">content_id</span><span class="o">=</span><span class="n">content_id</span><span class="p">,</span>
            <span class="n">chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">download_chat_images_and_documents</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">Content</span><span class="p">],</span> <span class="nb">list</span><span class="p">[</span><span class="n">Content</span><span class="p">]]:</span>
        <span class="n">images</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Content</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">files</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Content</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">search_contents</span><span class="p">(</span>
            <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
            <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
            <span class="n">chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span>
            <span class="n">where</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;ownerId&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;equals&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">}},</span>
        <span class="p">):</span>
            <span class="k">if</span> <span class="n">is_file_content</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">key</span><span class="p">):</span>
                <span class="n">files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">is_image_content</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">key</span><span class="p">):</span>
                <span class="n">images</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">images</span><span class="p">,</span> <span class="n">files</span>

    <span class="c1"># Short Term Memories</span>
    <span class="c1">############################################################################</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create_chat_memory_by_id</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">dict</span> <span class="o">|</span> <span class="n">BaseModel</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ShortTermMemory</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a short-term memory for a specific chat synchronously.</span>

<span class="sd">        Args:</span>
<span class="sd">            chat_id (str): The chat ID</span>
<span class="sd">            key (str): The memory key</span>
<span class="sd">            value (str | dict | BaseModel): The memory value</span>

<span class="sd">        Returns:</span>
<span class="sd">            ShortTermMemory: The created short-term memory</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the creation fails</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Convert BaseModel to JSON string if needed</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">model_dump_json</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">create_memory</span><span class="p">(</span>
            <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
            <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
            <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span>
            <span class="n">chat_id</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">create_chat_memory_by_id_async</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">dict</span> <span class="o">|</span> <span class="n">BaseModel</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ShortTermMemory</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a short-term memory for a specific chat asynchronously.</span>

<span class="sd">        Args:</span>
<span class="sd">            chat_id (str): The chat ID</span>
<span class="sd">            key (str): The memory key</span>
<span class="sd">            value (str | dict | BaseModel): The memory value</span>

<span class="sd">        Returns:</span>
<span class="sd">            ShortTermMemory: The created short-term memory</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the creation fails</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Convert BaseModel to JSON string if needed</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">model_dump_json</span><span class="p">()</span>

        <span class="k">return</span> <span class="k">await</span> <span class="n">create_memory_async</span><span class="p">(</span>
            <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
            <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
            <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span>
            <span class="n">chat_id</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create_message_memory_by_id</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">dict</span> <span class="o">|</span> <span class="n">BaseModel</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ShortTermMemory</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a short-term memory for a specific message synchronously.</span>

<span class="sd">        Args:</span>
<span class="sd">            message_id (str): The message ID</span>
<span class="sd">            key (str): The memory key</span>
<span class="sd">            value (str | dict | BaseModel): The memory value</span>

<span class="sd">        Returns:</span>
<span class="sd">            ShortTermMemory: The created short-term memory</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the creation fails</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Convert BaseModel to JSON string if needed</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">model_dump_json</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">create_memory</span><span class="p">(</span>
            <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
            <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
            <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span>
            <span class="n">message_id</span><span class="o">=</span><span class="n">message_id</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">create_message_memory_by_id_async</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">dict</span> <span class="o">|</span> <span class="n">BaseModel</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ShortTermMemory</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a short-term memory for a specific message asynchronously.</span>

<span class="sd">        Args:</span>
<span class="sd">            message_id (str): The message ID</span>
<span class="sd">            key (str): The memory key</span>
<span class="sd">            value (str | dict | BaseModel): The memory value</span>

<span class="sd">        Returns:</span>
<span class="sd">            ShortTermMemory: The created short-term memory</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the creation fails</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Convert BaseModel to JSON string if needed</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">model_dump_json</span><span class="p">()</span>

        <span class="k">return</span> <span class="k">await</span> <span class="n">create_memory_async</span><span class="p">(</span>
            <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
            <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
            <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span>
            <span class="n">message_id</span><span class="o">=</span><span class="n">message_id</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">find_chat_memory_by_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ShortTermMemory</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Finds the latest short-term memory for a specific chat synchronously.</span>

<span class="sd">        Args:</span>
<span class="sd">            chat_id (str): The chat ID</span>
<span class="sd">            key (str): The memory key</span>

<span class="sd">        Returns:</span>
<span class="sd">            ShortTermMemory: The latest short-term memory</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the retrieval fails</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">find_latest_memory</span><span class="p">(</span>
            <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
            <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
            <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
            <span class="n">chat_id</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">find_chat_memory_by_id_async</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ShortTermMemory</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Finds the latest short-term memory for a specific chat asynchronously.</span>

<span class="sd">        Args:</span>
<span class="sd">            chat_id (str): The chat ID</span>
<span class="sd">            key (str): The memory key</span>

<span class="sd">        Returns:</span>
<span class="sd">            ShortTermMemory: The latest short-term memory</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the retrieval fails</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="n">find_latest_memory_async</span><span class="p">(</span>
            <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
            <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
            <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
            <span class="n">chat_id</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">find_message_memory_by_id</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ShortTermMemory</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Finds the latest short-term memory for a specific message synchronously.</span>

<span class="sd">        Args:</span>
<span class="sd">            message_id (str): The message ID</span>
<span class="sd">            key (str): The memory key</span>

<span class="sd">        Returns:</span>
<span class="sd">            ShortTermMemory: The latest short-term memory</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the retrieval fails</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">find_latest_memory</span><span class="p">(</span>
            <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
            <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
            <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
            <span class="n">message_id</span><span class="o">=</span><span class="n">message_id</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">find_message_memory_by_id_async</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ShortTermMemory</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Finds the latest short-term memory for a specific message asynchronously.</span>

<span class="sd">        Args:</span>
<span class="sd">            message_id (str): The message ID</span>
<span class="sd">            key (str): The memory key</span>

<span class="sd">        Returns:</span>
<span class="sd">            ShortTermMemory: The latest short-term memory</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the retrieval fails</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="n">find_latest_memory_async</span><span class="p">(</span>
            <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
            <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
            <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
            <span class="n">message_id</span><span class="o">=</span><span class="n">message_id</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="c1"># Convenience methods using current chat/message IDs</span>
    <span class="c1">############################################################################</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create_chat_memory</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">dict</span> <span class="o">|</span> <span class="n">BaseModel</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ShortTermMemory</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a short-term memory for the current chat synchronously.</span>

<span class="sd">        Args:</span>
<span class="sd">            key (str): The memory key</span>
<span class="sd">            value (str | dict | BaseModel): The memory value</span>

<span class="sd">        Returns:</span>
<span class="sd">            ShortTermMemory: The created short-term memory</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the creation fails</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_chat_memory_by_id</span><span class="p">(</span>
            <span class="n">chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span>
            <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">create_chat_memory_async</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">dict</span> <span class="o">|</span> <span class="n">BaseModel</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ShortTermMemory</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a short-term memory for the current chat asynchronously.</span>

<span class="sd">        Args:</span>
<span class="sd">            key (str): The memory key</span>
<span class="sd">            value (str | dict | BaseModel): The memory value</span>

<span class="sd">        Returns:</span>
<span class="sd">            ShortTermMemory: The created short-term memory</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the creation fails</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_chat_memory_by_id_async</span><span class="p">(</span>
            <span class="n">chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span>
            <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="nd">@overload</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">create_message_memory</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">value</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">dict</span> <span class="o">|</span> <span class="n">BaseModel</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ShortTermMemory</span><span class="p">:</span> <span class="o">...</span>

    <span class="nd">@overload</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">create_message_memory</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">dict</span> <span class="o">|</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ShortTermMemory</span><span class="p">:</span> <span class="o">...</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create_message_memory</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">dict</span> <span class="o">|</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ShortTermMemory</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a short-term memory for the current assistant message synchronously.</span>

<span class="sd">        Args:</span>
<span class="sd">            key (str): The memory key</span>
<span class="sd">            value (str | dict | BaseModel): The memory value</span>

<span class="sd">        Returns:</span>
<span class="sd">            ShortTermMemory: The created short-term memory</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the creation fails</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_message_memory_by_id</span><span class="p">(</span>
            <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span>
            <span class="n">message_id</span><span class="o">=</span><span class="n">message_id</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_assistant_message_id</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="nd">@overload</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">create_message_memory_async</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">value</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">dict</span> <span class="o">|</span> <span class="n">BaseModel</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ShortTermMemory</span><span class="p">:</span> <span class="o">...</span>

    <span class="nd">@overload</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">create_message_memory_async</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">dict</span> <span class="o">|</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ShortTermMemory</span><span class="p">:</span> <span class="o">...</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">create_message_memory_async</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">dict</span> <span class="o">|</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ShortTermMemory</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a short-term memory for the current assistant message asynchronously.</span>

<span class="sd">        Args:</span>
<span class="sd">            key (str): The memory key</span>
<span class="sd">            value (str | dict | BaseModel): The memory value</span>

<span class="sd">        Returns:</span>
<span class="sd">            ShortTermMemory: The created short-term memory</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the creation fails</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_message_memory_by_id_async</span><span class="p">(</span>
            <span class="n">message_id</span><span class="o">=</span><span class="n">message_id</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_assistant_message_id</span><span class="p">,</span>
            <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">find_chat_memory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ShortTermMemory</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Finds the latest short-term memory for the current chat synchronously.</span>

<span class="sd">        Args:</span>
<span class="sd">            key (str): The memory key</span>

<span class="sd">        Returns:</span>
<span class="sd">            ShortTermMemory: The latest short-term memory</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the retrieval fails</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_chat_memory_by_id</span><span class="p">(</span>
            <span class="n">chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span>
            <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">find_chat_memory_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ShortTermMemory</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Finds the latest short-term memory for the current chat asynchronously.</span>

<span class="sd">        Args:</span>
<span class="sd">            key (str): The memory key</span>

<span class="sd">        Returns:</span>
<span class="sd">            ShortTermMemory: The latest short-term memory</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the retrieval fails</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_chat_memory_by_id_async</span><span class="p">(</span>
            <span class="n">chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span>
            <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="nd">@overload</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">find_message_memory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ShortTermMemory</span><span class="p">:</span> <span class="o">...</span>

    <span class="nd">@overload</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">find_message_memory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ShortTermMemory</span><span class="p">:</span> <span class="o">...</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">find_message_memory</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ShortTermMemory</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Finds the latest short-term memory for the current assistant message synchronously.</span>

<span class="sd">        Args:</span>
<span class="sd">            key (str): The memory key</span>

<span class="sd">        Returns:</span>
<span class="sd">            ShortTermMemory: The latest short-term memory</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the retrieval fails</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_message_memory_by_id</span><span class="p">(</span>
            <span class="n">message_id</span><span class="o">=</span><span class="n">message_id</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_assistant_message_id</span><span class="p">,</span>
            <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="nd">@overload</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">find_message_memory_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ShortTermMemory</span><span class="p">:</span> <span class="o">...</span>

    <span class="nd">@overload</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">find_message_memory_async</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ShortTermMemory</span><span class="p">:</span> <span class="o">...</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">find_message_memory_async</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ShortTermMemory</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Finds the latest short-term memory for the current assistant message asynchronously.</span>

<span class="sd">        Args:</span>
<span class="sd">            key (str): The memory key</span>

<span class="sd">        Returns:</span>
<span class="sd">            ShortTermMemory: The latest short-term memory</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the retrieval fails</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_message_memory_by_id_async</span><span class="p">(</span>
            <span class="n">message_id</span><span class="o">=</span><span class="n">message_id</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_assistant_message_id</span><span class="p">,</span>
            <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.complete_with_references" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">complete_with_references</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="n">model_name</span><span class="p">,</span> <span class="n">content_chunks</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">debug_info</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">temperature</span><span class="o">=</span><span class="n">DEFAULT_COMPLETE_TEMPERATURE</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">DEFAULT_COMPLETE_TIMEOUT</span><span class="p">,</span> <span class="n">tools</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">start_text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">tool_choice</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">other_options</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#unique_toolkit.services.chat_service.ChatService.complete_with_references" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Streams a completion in the chat session synchronously.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1381</span>
<span class="normal">1382</span>
<span class="normal">1383</span>
<span class="normal">1384</span>
<span class="normal">1385</span>
<span class="normal">1386</span>
<span class="normal">1387</span>
<span class="normal">1388</span>
<span class="normal">1389</span>
<span class="normal">1390</span>
<span class="normal">1391</span>
<span class="normal">1392</span>
<span class="normal">1393</span>
<span class="normal">1394</span>
<span class="normal">1395</span>
<span class="normal">1396</span>
<span class="normal">1397</span>
<span class="normal">1398</span>
<span class="normal">1399</span>
<span class="normal">1400</span>
<span class="normal">1401</span>
<span class="normal">1402</span>
<span class="normal">1403</span>
<span class="normal">1404</span>
<span class="normal">1405</span>
<span class="normal">1406</span>
<span class="normal">1407</span>
<span class="normal">1408</span>
<span class="normal">1409</span>
<span class="normal">1410</span>
<span class="normal">1411</span>
<span class="normal">1412</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">complete_with_references</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">messages</span><span class="p">:</span> <span class="n">LanguageModelMessages</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="n">ChatCompletionMessageParam</span><span class="p">],</span>
    <span class="n">model_name</span><span class="p">:</span> <span class="n">LanguageModelName</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">content_chunks</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentChunk</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">debug_info</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">temperature</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_COMPLETE_TEMPERATURE</span><span class="p">,</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">DEFAULT_COMPLETE_TIMEOUT</span><span class="p">,</span>
    <span class="n">tools</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">LanguageModelTool</span> <span class="o">|</span> <span class="n">LanguageModelToolDescription</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">start_text</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">tool_choice</span><span class="p">:</span> <span class="n">ChatCompletionToolChoiceOptionParam</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">other_options</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LanguageModelStreamResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Streams a completion in the chat session synchronously.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">stream_complete_with_references</span><span class="p">(</span>
        <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
        <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
        <span class="n">assistant_message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_assistant_message_id</span><span class="p">,</span>
        <span class="n">user_message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_message_id</span><span class="p">,</span>
        <span class="n">chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span>
        <span class="n">assistant_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_assistant_id</span><span class="p">,</span>
        <span class="n">messages</span><span class="o">=</span><span class="n">messages</span><span class="p">,</span>
        <span class="n">model_name</span><span class="o">=</span><span class="n">model_name</span><span class="p">,</span>
        <span class="n">content_chunks</span><span class="o">=</span><span class="n">content_chunks</span><span class="p">,</span>
        <span class="n">debug_info</span><span class="o">=</span><span class="n">debug_info</span><span class="p">,</span>
        <span class="n">temperature</span><span class="o">=</span><span class="n">temperature</span><span class="p">,</span>
        <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
        <span class="n">tools</span><span class="o">=</span><span class="n">tools</span><span class="p">,</span>
        <span class="n">start_text</span><span class="o">=</span><span class="n">start_text</span><span class="p">,</span>
        <span class="n">tool_choice</span><span class="o">=</span><span class="n">tool_choice</span><span class="p">,</span>
        <span class="n">other_options</span><span class="o">=</span><span class="n">other_options</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.create_assistant_message" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_assistant_message</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">original_content</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">references</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">debug_info</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">set_completed_at</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

<a href="#unique_toolkit.services.chat_service.ChatService.create_assistant_message" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Creates a message in the chat session synchronously.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>content</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The content for the message.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>original_content</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The original content for the message.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>references</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="unique_toolkit.content.schemas.ContentReference">ContentReference</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list of ContentReference objects. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>debug_info</code>
            </td>
            <td>
                  <code>dict[str, Any]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Debug information. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>set_completed_at</code>
            </td>
            <td>
                  <code><span title="Optional">Optional</span>[<span title="bool">bool</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to set the completedAt field with the current date time. Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>ChatMessage</code></td>            <td>
                  <code><span title="unique_toolkit.chat.schemas.ChatMessage">ChatMessage</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created message.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the creation fails.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">create_assistant_message</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">content</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">original_content</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">references</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentReference</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">debug_info</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">set_completed_at</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ChatMessage</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a message in the chat session synchronously.</span>

<span class="sd">    Args:</span>
<span class="sd">        content (str): The content for the message.</span>
<span class="sd">        original_content (str, optional): The original content for the message.</span>
<span class="sd">        references (list[ContentReference]): list of ContentReference objects. Defaults to None.</span>
<span class="sd">        debug_info (dict[str, Any]]): Debug information. Defaults to None.</span>
<span class="sd">        set_completed_at (Optional[bool]): Whether to set the completedAt field with the current date time. Defaults to False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ChatMessage: The created message.</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the creation fails.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">chat_message</span> <span class="o">=</span> <span class="n">create_message</span><span class="p">(</span>
        <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
        <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
        <span class="n">chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span>
        <span class="n">assistant_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_assistant_id</span><span class="p">,</span>
        <span class="n">role</span><span class="o">=</span><span class="n">ChatMessageRole</span><span class="o">.</span><span class="n">ASSISTANT</span><span class="p">,</span>
        <span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">,</span>
        <span class="n">original_content</span><span class="o">=</span><span class="n">original_content</span><span class="p">,</span>
        <span class="n">references</span><span class="o">=</span><span class="n">references</span><span class="p">,</span>
        <span class="n">debug_info</span><span class="o">=</span><span class="n">debug_info</span><span class="p">,</span>
        <span class="n">set_completed_at</span><span class="o">=</span><span class="n">set_completed_at</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="c1"># Update the assistant message id</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_assistant_message_id</span> <span class="o">=</span> <span class="n">chat_message</span><span class="o">.</span><span class="n">id</span> <span class="ow">or</span> <span class="s2">&quot;unknown&quot;</span>
    <span class="k">return</span> <span class="n">chat_message</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.create_assistant_message_async" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_assistant_message_async</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">original_content</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">references</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">debug_info</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">set_completed_at</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#unique_toolkit.services.chat_service.ChatService.create_assistant_message_async" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Creates a message in the chat session asynchronously.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>content</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The content for the message.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>original_content</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The original content for the message.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>references</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="unique_toolkit.content.schemas.ContentReference">ContentReference</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list of references. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>debug_info</code>
            </td>
            <td>
                  <code>dict[str, Any]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Debug information. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>set_completed_at</code>
            </td>
            <td>
                  <code><span title="Optional">Optional</span>[<span title="bool">bool</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to set the completedAt field with the current date time. Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>ChatMessage</code></td>            <td>
                  <code><span title="unique_toolkit.chat.schemas.ChatMessage">ChatMessage</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created message.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the creation fails.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">create_assistant_message_async</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">content</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">original_content</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">references</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentReference</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">debug_info</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">set_completed_at</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ChatMessage</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a message in the chat session asynchronously.</span>

<span class="sd">    Args:</span>
<span class="sd">        content (str): The content for the message.</span>
<span class="sd">        original_content (str, optional): The original content for the message.</span>
<span class="sd">        references (list[ContentReference]): list of references. Defaults to None.</span>
<span class="sd">        debug_info (dict[str, Any]]): Debug information. Defaults to None.</span>
<span class="sd">        set_completed_at (Optional[bool]): Whether to set the completedAt field with the current date time. Defaults to False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ChatMessage: The created message.</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the creation fails.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">chat_message</span> <span class="o">=</span> <span class="k">await</span> <span class="n">create_message_async</span><span class="p">(</span>
        <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
        <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
        <span class="n">chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span>
        <span class="n">assistant_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_assistant_id</span><span class="p">,</span>
        <span class="n">role</span><span class="o">=</span><span class="n">ChatMessageRole</span><span class="o">.</span><span class="n">ASSISTANT</span><span class="p">,</span>
        <span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">,</span>
        <span class="n">original_content</span><span class="o">=</span><span class="n">original_content</span><span class="p">,</span>
        <span class="n">references</span><span class="o">=</span><span class="n">references</span><span class="p">,</span>
        <span class="n">debug_info</span><span class="o">=</span><span class="n">debug_info</span><span class="p">,</span>
        <span class="n">set_completed_at</span><span class="o">=</span><span class="n">set_completed_at</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="c1"># Update the assistant message id</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_assistant_message_id</span> <span class="o">=</span> <span class="n">chat_message</span><span class="o">.</span><span class="n">id</span> <span class="ow">or</span> <span class="s2">&quot;unknown&quot;</span>
    <span class="k">return</span> <span class="n">chat_message</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.create_assistant_message_execution" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_assistant_message_execution</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">MessageExecutionType</span><span class="o">.</span><span class="n">DEEP_RESEARCH</span><span class="p">,</span> <span class="n">seconds_remaining</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">percentage_completed</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">is_queueable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">execution_options</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">progress_title</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#unique_toolkit.services.chat_service.ChatService.create_assistant_message_execution" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Creates a message execution for the current assistant message synchronously.</p>
<p>This is a convenience method that uses the current assistant message ID.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>type</code>
            </td>
            <td>
                  <code><span title="unique_toolkit.chat.schemas.MessageExecutionType">MessageExecutionType</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The type of execution. Defaults to DEEP_RESEARCH.</p>
              </div>
            </td>
            <td>
                  <code><span title="unique_toolkit.chat.schemas.MessageExecutionType.DEEP_RESEARCH">DEEP_RESEARCH</span></code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>seconds_remaining</code>
            </td>
            <td>
                  <code><span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Estimated seconds remaining for completion</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>percentage_completed</code>
            </td>
            <td>
                  <code><span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Percentage of completion (0-100)</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>is_queueable</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the execution is queueable. Defaults to True. If true, then the progress will be updated in the background by the execution pipeline. Set to False if you want to update the progress manually.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>execution_options</code>
            </td>
            <td>
                  <code><span title="dict">dict</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional execution options. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>progress_title</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The title of the progress bar. If not provided, the title of the last message log is taken.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>MessageExecution</code></td>            <td>
                  <code><span title="unique_toolkit.chat.schemas.MessageExecution">MessageExecution</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created message execution</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the creation fails</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1183</span>
<span class="normal">1184</span>
<span class="normal">1185</span>
<span class="normal">1186</span>
<span class="normal">1187</span>
<span class="normal">1188</span>
<span class="normal">1189</span>
<span class="normal">1190</span>
<span class="normal">1191</span>
<span class="normal">1192</span>
<span class="normal">1193</span>
<span class="normal">1194</span>
<span class="normal">1195</span>
<span class="normal">1196</span>
<span class="normal">1197</span>
<span class="normal">1198</span>
<span class="normal">1199</span>
<span class="normal">1200</span>
<span class="normal">1201</span>
<span class="normal">1202</span>
<span class="normal">1203</span>
<span class="normal">1204</span>
<span class="normal">1205</span>
<span class="normal">1206</span>
<span class="normal">1207</span>
<span class="normal">1208</span>
<span class="normal">1209</span>
<span class="normal">1210</span>
<span class="normal">1211</span>
<span class="normal">1212</span>
<span class="normal">1213</span>
<span class="normal">1214</span>
<span class="normal">1215</span>
<span class="normal">1216</span>
<span class="normal">1217</span>
<span class="normal">1218</span>
<span class="normal">1219</span>
<span class="normal">1220</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">create_assistant_message_execution</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="nb">type</span><span class="p">:</span> <span class="n">MessageExecutionType</span> <span class="o">=</span> <span class="n">MessageExecutionType</span><span class="o">.</span><span class="n">DEEP_RESEARCH</span><span class="p">,</span>
    <span class="n">seconds_remaining</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">percentage_completed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">is_queueable</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">execution_options</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">progress_title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MessageExecution</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a message execution for the current assistant message synchronously.</span>

<span class="sd">    This is a convenience method that uses the current assistant message ID.</span>

<span class="sd">    Args:</span>
<span class="sd">        type (MessageExecutionType): The type of execution. Defaults to DEEP_RESEARCH.</span>
<span class="sd">        seconds_remaining (int | None): Estimated seconds remaining for completion</span>
<span class="sd">        percentage_completed (int | None): Percentage of completion (0-100)</span>
<span class="sd">        is_queueable (bool): Whether the execution is queueable. Defaults to True. If true, then the progress will be updated in the background by the execution pipeline. Set to False if you want to update the progress manually.</span>
<span class="sd">        execution_options (dict | None): Additional execution options. Defaults to None.</span>
<span class="sd">        progress_title (str | None): The title of the progress bar. If not provided, the title of the last message log is taken.</span>

<span class="sd">    Returns:</span>
<span class="sd">        MessageExecution: The created message execution</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the creation fails</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_message_execution</span><span class="p">(</span>
        <span class="n">message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_assistant_message_id</span><span class="p">,</span>
        <span class="nb">type</span><span class="o">=</span><span class="nb">type</span><span class="p">,</span>
        <span class="n">seconds_remaining</span><span class="o">=</span><span class="n">seconds_remaining</span><span class="p">,</span>
        <span class="n">percentage_completed</span><span class="o">=</span><span class="n">percentage_completed</span><span class="p">,</span>
        <span class="n">is_queueable</span><span class="o">=</span><span class="n">is_queueable</span><span class="p">,</span>
        <span class="n">execution_options</span><span class="o">=</span><span class="n">execution_options</span><span class="p">,</span>
        <span class="n">progress_title</span><span class="o">=</span><span class="n">progress_title</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.create_assistant_message_execution_async" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_assistant_message_execution_async</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">MessageExecutionType</span><span class="o">.</span><span class="n">DEEP_RESEARCH</span><span class="p">,</span> <span class="n">seconds_remaining</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">percentage_completed</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">is_queueable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">execution_options</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">progress_title</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#unique_toolkit.services.chat_service.ChatService.create_assistant_message_execution_async" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Creates a message execution for the current assistant message asynchronously.</p>
<p>This is a convenience method that uses the current assistant message ID.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>type</code>
            </td>
            <td>
                  <code><span title="unique_toolkit.chat.schemas.MessageExecutionType">MessageExecutionType</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The type of execution. Defaults to DEEP_RESEARCH.</p>
              </div>
            </td>
            <td>
                  <code><span title="unique_toolkit.chat.schemas.MessageExecutionType.DEEP_RESEARCH">DEEP_RESEARCH</span></code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>seconds_remaining</code>
            </td>
            <td>
                  <code><span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Estimated seconds remaining for completion</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>percentage_completed</code>
            </td>
            <td>
                  <code><span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Percentage of completion (0-100)</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>is_queueable</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the execution is queueable. Defaults to True. If true, then the progress will be updated in the background by the execution pipeline. Set to False if you want to update the progress manually.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>execution_options</code>
            </td>
            <td>
                  <code><span title="dict">dict</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional execution options. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>progress_title</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The title of the progress bar. If not provided, the title of the last message log is taken.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>MessageExecution</code></td>            <td>
                  <code><span title="unique_toolkit.chat.schemas.MessageExecution">MessageExecution</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created message execution</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the creation fails</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1222</span>
<span class="normal">1223</span>
<span class="normal">1224</span>
<span class="normal">1225</span>
<span class="normal">1226</span>
<span class="normal">1227</span>
<span class="normal">1228</span>
<span class="normal">1229</span>
<span class="normal">1230</span>
<span class="normal">1231</span>
<span class="normal">1232</span>
<span class="normal">1233</span>
<span class="normal">1234</span>
<span class="normal">1235</span>
<span class="normal">1236</span>
<span class="normal">1237</span>
<span class="normal">1238</span>
<span class="normal">1239</span>
<span class="normal">1240</span>
<span class="normal">1241</span>
<span class="normal">1242</span>
<span class="normal">1243</span>
<span class="normal">1244</span>
<span class="normal">1245</span>
<span class="normal">1246</span>
<span class="normal">1247</span>
<span class="normal">1248</span>
<span class="normal">1249</span>
<span class="normal">1250</span>
<span class="normal">1251</span>
<span class="normal">1252</span>
<span class="normal">1253</span>
<span class="normal">1254</span>
<span class="normal">1255</span>
<span class="normal">1256</span>
<span class="normal">1257</span>
<span class="normal">1258</span>
<span class="normal">1259</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">create_assistant_message_execution_async</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="nb">type</span><span class="p">:</span> <span class="n">MessageExecutionType</span> <span class="o">=</span> <span class="n">MessageExecutionType</span><span class="o">.</span><span class="n">DEEP_RESEARCH</span><span class="p">,</span>
    <span class="n">seconds_remaining</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">percentage_completed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">is_queueable</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">execution_options</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">progress_title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MessageExecution</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a message execution for the current assistant message asynchronously.</span>

<span class="sd">    This is a convenience method that uses the current assistant message ID.</span>

<span class="sd">    Args:</span>
<span class="sd">        type (MessageExecutionType): The type of execution. Defaults to DEEP_RESEARCH.</span>
<span class="sd">        seconds_remaining (int | None): Estimated seconds remaining for completion</span>
<span class="sd">        percentage_completed (int | None): Percentage of completion (0-100)</span>
<span class="sd">        is_queueable (bool): Whether the execution is queueable. Defaults to True. If true, then the progress will be updated in the background by the execution pipeline. Set to False if you want to update the progress manually.</span>
<span class="sd">        execution_options (dict | None): Additional execution options. Defaults to None.</span>
<span class="sd">        progress_title (str | None): The title of the progress bar. If not provided, the title of the last message log is taken.</span>

<span class="sd">    Returns:</span>
<span class="sd">        MessageExecution: The created message execution</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the creation fails</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_message_execution_async</span><span class="p">(</span>
        <span class="n">message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_assistant_message_id</span><span class="p">,</span>
        <span class="nb">type</span><span class="o">=</span><span class="nb">type</span><span class="p">,</span>
        <span class="n">seconds_remaining</span><span class="o">=</span><span class="n">seconds_remaining</span><span class="p">,</span>
        <span class="n">percentage_completed</span><span class="o">=</span><span class="n">percentage_completed</span><span class="p">,</span>
        <span class="n">is_queueable</span><span class="o">=</span><span class="n">is_queueable</span><span class="p">,</span>
        <span class="n">execution_options</span><span class="o">=</span><span class="n">execution_options</span><span class="p">,</span>
        <span class="n">progress_title</span><span class="o">=</span><span class="n">progress_title</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.create_assistant_message_log" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_assistant_message_log</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">order</span><span class="p">,</span> <span class="n">details</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">uncited_references</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">references</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#unique_toolkit.services.chat_service.ChatService.create_assistant_message_log" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Creates a message log for the current assistant message synchronously.</p>
<p>This is a convenience method that uses the current assistant message ID.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>text</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The log text content</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>status</code>
            </td>
            <td>
                  <code><span title="unique_toolkit.chat.schemas.MessageLogStatus">MessageLogStatus</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The status of this log entry</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>order</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The order/sequence number of this log entry</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>details</code>
            </td>
            <td>
                  <code><span title="unique_toolkit.chat.schemas.MessageLogDetails">MessageLogDetails</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional details about this log entry</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>uncited_references</code>
            </td>
            <td>
                  <code><span title="unique_toolkit.chat.schemas.MessageLogUncitedReferences">MessageLogUncitedReferences</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>References that are not cited</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>references</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="unique_toolkit.content.schemas.ContentReference">ContentReference</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of references for this log</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>MessageLog</code></td>            <td>
                  <code><span title="unique_toolkit.chat.schemas.MessageLog">MessageLog</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created message log</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the creation fails</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">902</span>
<span class="normal">903</span>
<span class="normal">904</span>
<span class="normal">905</span>
<span class="normal">906</span>
<span class="normal">907</span>
<span class="normal">908</span>
<span class="normal">909</span>
<span class="normal">910</span>
<span class="normal">911</span>
<span class="normal">912</span>
<span class="normal">913</span>
<span class="normal">914</span>
<span class="normal">915</span>
<span class="normal">916</span>
<span class="normal">917</span>
<span class="normal">918</span>
<span class="normal">919</span>
<span class="normal">920</span>
<span class="normal">921</span>
<span class="normal">922</span>
<span class="normal">923</span>
<span class="normal">924</span>
<span class="normal">925</span>
<span class="normal">926</span>
<span class="normal">927</span>
<span class="normal">928</span>
<span class="normal">929</span>
<span class="normal">930</span>
<span class="normal">931</span>
<span class="normal">932</span>
<span class="normal">933</span>
<span class="normal">934</span>
<span class="normal">935</span>
<span class="normal">936</span>
<span class="normal">937</span>
<span class="normal">938</span>
<span class="normal">939</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">create_assistant_message_log</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">status</span><span class="p">:</span> <span class="n">MessageLogStatus</span><span class="p">,</span>
    <span class="n">order</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">details</span><span class="p">:</span> <span class="n">MessageLogDetails</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">uncited_references</span><span class="p">:</span> <span class="n">MessageLogUncitedReferences</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">references</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentReference</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MessageLog</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a message log for the current assistant message synchronously.</span>

<span class="sd">    This is a convenience method that uses the current assistant message ID.</span>

<span class="sd">    Args:</span>
<span class="sd">        text (str): The log text content</span>
<span class="sd">        status (MessageLogStatus): The status of this log entry</span>
<span class="sd">        order (int): The order/sequence number of this log entry</span>
<span class="sd">        details (MessageLogDetails | None): Additional details about this log entry</span>
<span class="sd">        uncited_references (MessageLogUncitedReferences | None): References that are not cited</span>
<span class="sd">        references (list[ContentReference] | None): List of references for this log</span>

<span class="sd">    Returns:</span>
<span class="sd">        MessageLog: The created message log</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the creation fails</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_message_log</span><span class="p">(</span>
        <span class="n">message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_assistant_message_id</span><span class="p">,</span>
        <span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>
        <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">,</span>
        <span class="n">order</span><span class="o">=</span><span class="n">order</span><span class="p">,</span>
        <span class="n">details</span><span class="o">=</span><span class="n">details</span><span class="p">,</span>
        <span class="n">uncited_references</span><span class="o">=</span><span class="n">uncited_references</span><span class="p">,</span>
        <span class="n">references</span><span class="o">=</span><span class="n">references</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.create_assistant_message_log_async" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_assistant_message_log_async</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">order</span><span class="p">,</span> <span class="n">details</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">uncited_references</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">references</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#unique_toolkit.services.chat_service.ChatService.create_assistant_message_log_async" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Creates a message log for the current assistant message asynchronously.</p>
<p>This is a convenience method that uses the current assistant message ID.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>text</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The log text content</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>status</code>
            </td>
            <td>
                  <code><span title="unique_toolkit.chat.schemas.MessageLogStatus">MessageLogStatus</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The status of this log entry</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>order</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The order/sequence number of this log entry</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>details</code>
            </td>
            <td>
                  <code><span title="unique_toolkit.chat.schemas.MessageLogDetails">MessageLogDetails</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional details about this log entry</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>uncited_references</code>
            </td>
            <td>
                  <code><span title="unique_toolkit.chat.schemas.MessageLogUncitedReferences">MessageLogUncitedReferences</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>References that are not cited</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>references</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="unique_toolkit.content.schemas.ContentReference">ContentReference</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of references for this log</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>MessageLog</code></td>            <td>
                  <code><span title="unique_toolkit.chat.schemas.MessageLog">MessageLog</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created message log</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the creation fails</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">941</span>
<span class="normal">942</span>
<span class="normal">943</span>
<span class="normal">944</span>
<span class="normal">945</span>
<span class="normal">946</span>
<span class="normal">947</span>
<span class="normal">948</span>
<span class="normal">949</span>
<span class="normal">950</span>
<span class="normal">951</span>
<span class="normal">952</span>
<span class="normal">953</span>
<span class="normal">954</span>
<span class="normal">955</span>
<span class="normal">956</span>
<span class="normal">957</span>
<span class="normal">958</span>
<span class="normal">959</span>
<span class="normal">960</span>
<span class="normal">961</span>
<span class="normal">962</span>
<span class="normal">963</span>
<span class="normal">964</span>
<span class="normal">965</span>
<span class="normal">966</span>
<span class="normal">967</span>
<span class="normal">968</span>
<span class="normal">969</span>
<span class="normal">970</span>
<span class="normal">971</span>
<span class="normal">972</span>
<span class="normal">973</span>
<span class="normal">974</span>
<span class="normal">975</span>
<span class="normal">976</span>
<span class="normal">977</span>
<span class="normal">978</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">create_assistant_message_log_async</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">status</span><span class="p">:</span> <span class="n">MessageLogStatus</span><span class="p">,</span>
    <span class="n">order</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">details</span><span class="p">:</span> <span class="n">MessageLogDetails</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">uncited_references</span><span class="p">:</span> <span class="n">MessageLogUncitedReferences</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">references</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentReference</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MessageLog</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a message log for the current assistant message asynchronously.</span>

<span class="sd">    This is a convenience method that uses the current assistant message ID.</span>

<span class="sd">    Args:</span>
<span class="sd">        text (str): The log text content</span>
<span class="sd">        status (MessageLogStatus): The status of this log entry</span>
<span class="sd">        order (int): The order/sequence number of this log entry</span>
<span class="sd">        details (MessageLogDetails | None): Additional details about this log entry</span>
<span class="sd">        uncited_references (MessageLogUncitedReferences | None): References that are not cited</span>
<span class="sd">        references (list[ContentReference] | None): List of references for this log</span>

<span class="sd">    Returns:</span>
<span class="sd">        MessageLog: The created message log</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the creation fails</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_message_log_async</span><span class="p">(</span>
        <span class="n">message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_assistant_message_id</span><span class="p">,</span>
        <span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>
        <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">,</span>
        <span class="n">order</span><span class="o">=</span><span class="n">order</span><span class="p">,</span>
        <span class="n">details</span><span class="o">=</span><span class="n">details</span><span class="p">,</span>
        <span class="n">uncited_references</span><span class="o">=</span><span class="n">uncited_references</span><span class="p">,</span>
        <span class="n">references</span><span class="o">=</span><span class="n">references</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.create_chat_memory" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_chat_memory</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></code>

<a href="#unique_toolkit.services.chat_service.ChatService.create_chat_memory" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Creates a short-term memory for the current chat synchronously.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>key</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The memory key</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>value</code>
            </td>
            <td>
                  <code><span title="str">str</span> | <span title="dict">dict</span> | <span title="pydantic.BaseModel">BaseModel</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The memory value</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>ShortTermMemory</code></td>            <td>
                  <code><span title="unique_toolkit.short_term_memory.schemas.ShortTermMemory">ShortTermMemory</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created short-term memory</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the creation fails</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1916</span>
<span class="normal">1917</span>
<span class="normal">1918</span>
<span class="normal">1919</span>
<span class="normal">1920</span>
<span class="normal">1921</span>
<span class="normal">1922</span>
<span class="normal">1923</span>
<span class="normal">1924</span>
<span class="normal">1925</span>
<span class="normal">1926</span>
<span class="normal">1927</span>
<span class="normal">1928</span>
<span class="normal">1929</span>
<span class="normal">1930</span>
<span class="normal">1931</span>
<span class="normal">1932</span>
<span class="normal">1933</span>
<span class="normal">1934</span>
<span class="normal">1935</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">create_chat_memory</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">dict</span> <span class="o">|</span> <span class="n">BaseModel</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ShortTermMemory</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a short-term memory for the current chat synchronously.</span>

<span class="sd">    Args:</span>
<span class="sd">        key (str): The memory key</span>
<span class="sd">        value (str | dict | BaseModel): The memory value</span>

<span class="sd">    Returns:</span>
<span class="sd">        ShortTermMemory: The created short-term memory</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the creation fails</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_chat_memory_by_id</span><span class="p">(</span>
        <span class="n">chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span>
        <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.create_chat_memory_async" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_chat_memory_async</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#unique_toolkit.services.chat_service.ChatService.create_chat_memory_async" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Creates a short-term memory for the current chat asynchronously.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>key</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The memory key</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>value</code>
            </td>
            <td>
                  <code><span title="str">str</span> | <span title="dict">dict</span> | <span title="pydantic.BaseModel">BaseModel</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The memory value</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>ShortTermMemory</code></td>            <td>
                  <code><span title="unique_toolkit.short_term_memory.schemas.ShortTermMemory">ShortTermMemory</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created short-term memory</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the creation fails</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1937</span>
<span class="normal">1938</span>
<span class="normal">1939</span>
<span class="normal">1940</span>
<span class="normal">1941</span>
<span class="normal">1942</span>
<span class="normal">1943</span>
<span class="normal">1944</span>
<span class="normal">1945</span>
<span class="normal">1946</span>
<span class="normal">1947</span>
<span class="normal">1948</span>
<span class="normal">1949</span>
<span class="normal">1950</span>
<span class="normal">1951</span>
<span class="normal">1952</span>
<span class="normal">1953</span>
<span class="normal">1954</span>
<span class="normal">1955</span>
<span class="normal">1956</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">create_chat_memory_async</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">dict</span> <span class="o">|</span> <span class="n">BaseModel</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ShortTermMemory</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a short-term memory for the current chat asynchronously.</span>

<span class="sd">    Args:</span>
<span class="sd">        key (str): The memory key</span>
<span class="sd">        value (str | dict | BaseModel): The memory value</span>

<span class="sd">    Returns:</span>
<span class="sd">        ShortTermMemory: The created short-term memory</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the creation fails</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_chat_memory_by_id_async</span><span class="p">(</span>
        <span class="n">chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span>
        <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.create_chat_memory_by_id" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_chat_memory_by_id</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></code>

<a href="#unique_toolkit.services.chat_service.ChatService.create_chat_memory_by_id" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Creates a short-term memory for a specific chat synchronously.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>chat_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The chat ID</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>key</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The memory key</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>value</code>
            </td>
            <td>
                  <code><span title="str">str</span> | <span title="dict">dict</span> | <span title="pydantic.BaseModel">BaseModel</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The memory value</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>ShortTermMemory</code></td>            <td>
                  <code><span title="unique_toolkit.short_term_memory.schemas.ShortTermMemory">ShortTermMemory</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created short-term memory</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the creation fails</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1715</span>
<span class="normal">1716</span>
<span class="normal">1717</span>
<span class="normal">1718</span>
<span class="normal">1719</span>
<span class="normal">1720</span>
<span class="normal">1721</span>
<span class="normal">1722</span>
<span class="normal">1723</span>
<span class="normal">1724</span>
<span class="normal">1725</span>
<span class="normal">1726</span>
<span class="normal">1727</span>
<span class="normal">1728</span>
<span class="normal">1729</span>
<span class="normal">1730</span>
<span class="normal">1731</span>
<span class="normal">1732</span>
<span class="normal">1733</span>
<span class="normal">1734</span>
<span class="normal">1735</span>
<span class="normal">1736</span>
<span class="normal">1737</span>
<span class="normal">1738</span>
<span class="normal">1739</span>
<span class="normal">1740</span>
<span class="normal">1741</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">create_chat_memory_by_id</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">dict</span> <span class="o">|</span> <span class="n">BaseModel</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ShortTermMemory</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a short-term memory for a specific chat synchronously.</span>

<span class="sd">    Args:</span>
<span class="sd">        chat_id (str): The chat ID</span>
<span class="sd">        key (str): The memory key</span>
<span class="sd">        value (str | dict | BaseModel): The memory value</span>

<span class="sd">    Returns:</span>
<span class="sd">        ShortTermMemory: The created short-term memory</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the creation fails</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Convert BaseModel to JSON string if needed</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">model_dump_json</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">create_memory</span><span class="p">(</span>
        <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
        <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
        <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span>
        <span class="n">chat_id</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.create_chat_memory_by_id_async" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_chat_memory_by_id_async</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#unique_toolkit.services.chat_service.ChatService.create_chat_memory_by_id_async" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Creates a short-term memory for a specific chat asynchronously.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>chat_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The chat ID</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>key</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The memory key</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>value</code>
            </td>
            <td>
                  <code><span title="str">str</span> | <span title="dict">dict</span> | <span title="pydantic.BaseModel">BaseModel</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The memory value</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>ShortTermMemory</code></td>            <td>
                  <code><span title="unique_toolkit.short_term_memory.schemas.ShortTermMemory">ShortTermMemory</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created short-term memory</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the creation fails</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1743</span>
<span class="normal">1744</span>
<span class="normal">1745</span>
<span class="normal">1746</span>
<span class="normal">1747</span>
<span class="normal">1748</span>
<span class="normal">1749</span>
<span class="normal">1750</span>
<span class="normal">1751</span>
<span class="normal">1752</span>
<span class="normal">1753</span>
<span class="normal">1754</span>
<span class="normal">1755</span>
<span class="normal">1756</span>
<span class="normal">1757</span>
<span class="normal">1758</span>
<span class="normal">1759</span>
<span class="normal">1760</span>
<span class="normal">1761</span>
<span class="normal">1762</span>
<span class="normal">1763</span>
<span class="normal">1764</span>
<span class="normal">1765</span>
<span class="normal">1766</span>
<span class="normal">1767</span>
<span class="normal">1768</span>
<span class="normal">1769</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">create_chat_memory_by_id_async</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">dict</span> <span class="o">|</span> <span class="n">BaseModel</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ShortTermMemory</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a short-term memory for a specific chat asynchronously.</span>

<span class="sd">    Args:</span>
<span class="sd">        chat_id (str): The chat ID</span>
<span class="sd">        key (str): The memory key</span>
<span class="sd">        value (str | dict | BaseModel): The memory value</span>

<span class="sd">    Returns:</span>
<span class="sd">        ShortTermMemory: The created short-term memory</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the creation fails</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Convert BaseModel to JSON string if needed</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">model_dump_json</span><span class="p">()</span>

    <span class="k">return</span> <span class="k">await</span> <span class="n">create_memory_async</span><span class="p">(</span>
        <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
        <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
        <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span>
        <span class="n">chat_id</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.create_message_assessment" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_message_assessment</span><span class="p">(</span><span class="n">assistant_message_id</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">explanation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">is_visible</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

<a href="#unique_toolkit.services.chat_service.ChatService.create_message_assessment" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Creates a message assessment for an assistant message synchronously.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>assistant_message_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the assistant message to assess</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>status</code>
            </td>
            <td>
                  <code><span title="MessageAssessmentStatus">MessageAssessmentStatus</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The status of the assessment (e.g. "DONE")</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>type</code>
            </td>
            <td>
                  <code><span title="MessageAssessmentType">MessageAssessmentType</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The type of assessment (e.g. "HALLUCINATION")</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>title</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The title of the assessment</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>explanation</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Explanation of the assessment</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>label</code>
            </td>
            <td>
                  <code><span title="MessageAssessmentLabel">MessageAssessmentLabel</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The assessment label (e.g. "RED")</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>is_visible</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the assessment is visible to users. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>ChatMessageAssessment</code></td>            <td>
                  <code><span title="unique_toolkit.chat.schemas.ChatMessageAssessment">ChatMessageAssessment</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created message assessment</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the creation fails</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">create_message_assessment</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">assistant_message_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">status</span><span class="p">:</span> <span class="n">ChatMessageAssessmentStatus</span><span class="p">,</span>
    <span class="nb">type</span><span class="p">:</span> <span class="n">ChatMessageAssessmentType</span><span class="p">,</span>
    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">explanation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">label</span><span class="p">:</span> <span class="n">ChatMessageAssessmentLabel</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">is_visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ChatMessageAssessment</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a message assessment for an assistant message synchronously.</span>

<span class="sd">    Args:</span>
<span class="sd">        assistant_message_id (str): The ID of the assistant message to assess</span>
<span class="sd">        status (MessageAssessmentStatus): The status of the assessment (e.g. &quot;DONE&quot;)</span>
<span class="sd">        type (MessageAssessmentType): The type of assessment (e.g. &quot;HALLUCINATION&quot;)</span>
<span class="sd">        title (str | None): The title of the assessment</span>
<span class="sd">        explanation (str | None): Explanation of the assessment</span>
<span class="sd">        label (MessageAssessmentLabel | None): The assessment label (e.g. &quot;RED&quot;)</span>
<span class="sd">        is_visible (bool): Whether the assessment is visible to users. Defaults to True.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ChatMessageAssessment: The created message assessment</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the creation fails</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">create_message_assessment</span><span class="p">(</span>
        <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
        <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
        <span class="n">assistant_message_id</span><span class="o">=</span><span class="n">assistant_message_id</span><span class="p">,</span>
        <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">,</span>
        <span class="nb">type</span><span class="o">=</span><span class="nb">type</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
        <span class="n">explanation</span><span class="o">=</span><span class="n">explanation</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
        <span class="n">is_visible</span><span class="o">=</span><span class="n">is_visible</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.create_message_assessment_async" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_message_assessment_async</span><span class="p">(</span><span class="n">assistant_message_id</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">explanation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">is_visible</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#unique_toolkit.services.chat_service.ChatService.create_message_assessment_async" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Creates a message assessment for an assistant message asynchronously.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>assistant_message_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the assistant message to assess</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>status</code>
            </td>
            <td>
                  <code><span title="unique_toolkit.chat.schemas.ChatMessageAssessmentStatus">ChatMessageAssessmentStatus</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The status of the assessment (e.g. "DONE")</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>type</code>
            </td>
            <td>
                  <code><span title="unique_toolkit.chat.schemas.ChatMessageAssessmentType">ChatMessageAssessmentType</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The type of assessment (e.g. "HALLUCINATION")</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>title</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The title of the assessment</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>explanation</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Explanation of the assessment</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>label</code>
            </td>
            <td>
                  <code><span title="unique_toolkit.chat.schemas.ChatMessageAssessmentLabel">ChatMessageAssessmentLabel</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The assessment label (e.g. "RED")</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>is_visible</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the assessment is visible to users. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>ChatMessageAssessment</code></td>            <td>
                  <code><span title="unique_toolkit.chat.schemas.ChatMessageAssessment">ChatMessageAssessment</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created message assessment</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the creation fails</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">create_message_assessment_async</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">assistant_message_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">status</span><span class="p">:</span> <span class="n">ChatMessageAssessmentStatus</span><span class="p">,</span>
    <span class="nb">type</span><span class="p">:</span> <span class="n">ChatMessageAssessmentType</span><span class="p">,</span>
    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">explanation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">label</span><span class="p">:</span> <span class="n">ChatMessageAssessmentLabel</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">is_visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ChatMessageAssessment</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a message assessment for an assistant message asynchronously.</span>

<span class="sd">    Args:</span>
<span class="sd">        assistant_message_id (str): The ID of the assistant message to assess</span>
<span class="sd">        status (ChatMessageAssessmentStatus): The status of the assessment (e.g. &quot;DONE&quot;)</span>
<span class="sd">        type (ChatMessageAssessmentType): The type of assessment (e.g. &quot;HALLUCINATION&quot;)</span>
<span class="sd">        title (str | None): The title of the assessment</span>
<span class="sd">        explanation (str | None): Explanation of the assessment</span>
<span class="sd">        label (ChatMessageAssessmentLabel | None): The assessment label (e.g. &quot;RED&quot;)</span>
<span class="sd">        is_visible (bool): Whether the assessment is visible to users. Defaults to True.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ChatMessageAssessment: The created message assessment</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the creation fails</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">create_message_assessment_async</span><span class="p">(</span>
        <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
        <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
        <span class="n">assistant_message_id</span><span class="o">=</span><span class="n">assistant_message_id</span><span class="p">,</span>
        <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">,</span>
        <span class="nb">type</span><span class="o">=</span><span class="nb">type</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
        <span class="n">explanation</span><span class="o">=</span><span class="n">explanation</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
        <span class="n">is_visible</span><span class="o">=</span><span class="n">is_visible</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.create_message_execution" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_message_execution</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">message_id</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">MessageExecutionType</span><span class="o">.</span><span class="n">DEEP_RESEARCH</span><span class="p">,</span> <span class="n">seconds_remaining</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">percentage_completed</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">is_queueable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">execution_options</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">progress_title</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#unique_toolkit.services.chat_service.ChatService.create_message_execution" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Creates a message execution for tracking long-running operations synchronously.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>message_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the message this execution belongs to</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>type</code>
            </td>
            <td>
                  <code><span title="unique_toolkit.chat.schemas.MessageExecutionType">MessageExecutionType</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The type of execution. Defaults to DEEP_RESEARCH.</p>
              </div>
            </td>
            <td>
                  <code><span title="unique_toolkit.chat.schemas.MessageExecutionType.DEEP_RESEARCH">DEEP_RESEARCH</span></code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>seconds_remaining</code>
            </td>
            <td>
                  <code><span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Estimated seconds remaining for completion</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>percentage_completed</code>
            </td>
            <td>
                  <code><span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Percentage of completion (0-100)</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>is_queueable</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the execution is queueable. Defaults to True. If true, then the progress will be updated in the background by the execution pipeline. Set to False if you want to update the progress manually.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>execution_options</code>
            </td>
            <td>
                  <code><span title="dict">dict</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional execution options. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>progress_title</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The title of the progress bar. If not provided, the title of the last message log is taken.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>MessageExecution</code></td>            <td>
                  <code><span title="unique_toolkit.chat.schemas.MessageExecution">MessageExecution</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created message execution</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the creation fails</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">create_message_execution</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="nb">type</span><span class="p">:</span> <span class="n">MessageExecutionType</span> <span class="o">=</span> <span class="n">MessageExecutionType</span><span class="o">.</span><span class="n">DEEP_RESEARCH</span><span class="p">,</span>
    <span class="n">seconds_remaining</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">percentage_completed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">is_queueable</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">execution_options</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">progress_title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MessageExecution</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a message execution for tracking long-running operations synchronously.</span>

<span class="sd">    Args:</span>
<span class="sd">        message_id (str): The ID of the message this execution belongs to</span>
<span class="sd">        type (MessageExecutionType): The type of execution. Defaults to DEEP_RESEARCH.</span>
<span class="sd">        seconds_remaining (int | None): Estimated seconds remaining for completion</span>
<span class="sd">        percentage_completed (int | None): Percentage of completion (0-100)</span>
<span class="sd">        is_queueable (bool): Whether the execution is queueable. Defaults to True. If true, then the progress will be updated in the background by the execution pipeline. Set to False if you want to update the progress manually.</span>
<span class="sd">        execution_options (dict | None): Additional execution options. Defaults to None.</span>
<span class="sd">        progress_title (str | None): The title of the progress bar. If not provided, the title of the last message log is taken.</span>

<span class="sd">    Returns:</span>
<span class="sd">        MessageExecution: The created message execution</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the creation fails</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">create_message_execution</span><span class="p">(</span>
        <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
        <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
        <span class="n">message_id</span><span class="o">=</span><span class="n">message_id</span><span class="p">,</span>
        <span class="n">chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span>
        <span class="nb">type</span><span class="o">=</span><span class="nb">type</span><span class="p">,</span>
        <span class="n">seconds_remaining</span><span class="o">=</span><span class="n">seconds_remaining</span><span class="p">,</span>
        <span class="n">percentage_completed</span><span class="o">=</span><span class="n">percentage_completed</span><span class="p">,</span>
        <span class="n">is_queueable</span><span class="o">=</span><span class="n">is_queueable</span><span class="p">,</span>
        <span class="n">execution_options</span><span class="o">=</span><span class="n">execution_options</span><span class="p">,</span>
        <span class="n">progress_title</span><span class="o">=</span><span class="n">progress_title</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.create_message_execution_async" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_message_execution_async</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">message_id</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">MessageExecutionType</span><span class="o">.</span><span class="n">DEEP_RESEARCH</span><span class="p">,</span> <span class="n">seconds_remaining</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">percentage_completed</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">is_queueable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">execution_options</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">progress_title</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#unique_toolkit.services.chat_service.ChatService.create_message_execution_async" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Creates a message execution for tracking long-running operations asynchronously.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>message_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the message this execution belongs to</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>type</code>
            </td>
            <td>
                  <code><span title="unique_toolkit.chat.schemas.MessageExecutionType">MessageExecutionType</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The type of execution. Defaults to DEEP_RESEARCH.</p>
              </div>
            </td>
            <td>
                  <code><span title="unique_toolkit.chat.schemas.MessageExecutionType.DEEP_RESEARCH">DEEP_RESEARCH</span></code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>seconds_remaining</code>
            </td>
            <td>
                  <code><span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Estimated seconds remaining for completion</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>percentage_completed</code>
            </td>
            <td>
                  <code><span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Percentage of completion (0-100)</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>is_queueable</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the execution is queueable. Defaults to True. If true, then the progress will be updated in the background by the execution pipeline. Set to False if you want to update the progress manually.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>execution_options</code>
            </td>
            <td>
                  <code><span title="dict">dict</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional execution options. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>progress_title</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The title of the progress bar. If not provided, the title of the last message log is taken.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>MessageExecution</code></td>            <td>
                  <code><span title="unique_toolkit.chat.schemas.MessageExecution">MessageExecution</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created message execution</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the creation fails</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">create_message_execution_async</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="nb">type</span><span class="p">:</span> <span class="n">MessageExecutionType</span> <span class="o">=</span> <span class="n">MessageExecutionType</span><span class="o">.</span><span class="n">DEEP_RESEARCH</span><span class="p">,</span>
    <span class="n">seconds_remaining</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">percentage_completed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">is_queueable</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">execution_options</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">progress_title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MessageExecution</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a message execution for tracking long-running operations asynchronously.</span>

<span class="sd">    Args:</span>
<span class="sd">        message_id (str): The ID of the message this execution belongs to</span>
<span class="sd">        type (MessageExecutionType): The type of execution. Defaults to DEEP_RESEARCH.</span>
<span class="sd">        seconds_remaining (int | None): Estimated seconds remaining for completion</span>
<span class="sd">        percentage_completed (int | None): Percentage of completion (0-100)</span>
<span class="sd">        is_queueable (bool): Whether the execution is queueable. Defaults to True. If true, then the progress will be updated in the background by the execution pipeline. Set to False if you want to update the progress manually.</span>
<span class="sd">        execution_options (dict | None): Additional execution options. Defaults to None.</span>
<span class="sd">        progress_title (str | None): The title of the progress bar. If not provided, the title of the last message log is taken.</span>

<span class="sd">    Returns:</span>
<span class="sd">        MessageExecution: The created message execution</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the creation fails</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">create_message_execution_async</span><span class="p">(</span>
        <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
        <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
        <span class="n">message_id</span><span class="o">=</span><span class="n">message_id</span><span class="p">,</span>
        <span class="n">chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span>
        <span class="nb">type</span><span class="o">=</span><span class="nb">type</span><span class="p">,</span>
        <span class="n">seconds_remaining</span><span class="o">=</span><span class="n">seconds_remaining</span><span class="p">,</span>
        <span class="n">percentage_completed</span><span class="o">=</span><span class="n">percentage_completed</span><span class="p">,</span>
        <span class="n">is_queueable</span><span class="o">=</span><span class="n">is_queueable</span><span class="p">,</span>
        <span class="n">execution_options</span><span class="o">=</span><span class="n">execution_options</span><span class="p">,</span>
        <span class="n">progress_title</span><span class="o">=</span><span class="n">progress_title</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.create_message_log" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_message_log</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">message_id</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">order</span><span class="p">,</span> <span class="n">details</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">uncited_references</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">references</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#unique_toolkit.services.chat_service.ChatService.create_message_log" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Creates a message log for tracking execution steps synchronously.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>message_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the message this log belongs to</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>text</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The log text content</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>status</code>
            </td>
            <td>
                  <code><span title="unique_toolkit.chat.schemas.MessageLogStatus">MessageLogStatus</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The status of this log entry</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>order</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The order/sequence number of this log entry</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>details</code>
            </td>
            <td>
                  <code><span title="unique_toolkit.chat.schemas.MessageLogDetails">MessageLogDetails</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional details about this log entry</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>uncited_references</code>
            </td>
            <td>
                  <code><span title="unique_toolkit.chat.schemas.MessageLogUncitedReferences">MessageLogUncitedReferences</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>References that are not cited</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>references</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="unique_toolkit.content.schemas.ContentReference">ContentReference</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of references for this log</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>MessageLog</code></td>            <td>
                  <code><span title="unique_toolkit.chat.schemas.MessageLog">MessageLog</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created message log</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the creation fails</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">create_message_log</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">status</span><span class="p">:</span> <span class="n">MessageLogStatus</span><span class="p">,</span>
    <span class="n">order</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">details</span><span class="p">:</span> <span class="n">MessageLogDetails</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">uncited_references</span><span class="p">:</span> <span class="n">MessageLogUncitedReferences</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">references</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentReference</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MessageLog</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a message log for tracking execution steps synchronously.</span>

<span class="sd">    Args:</span>
<span class="sd">        message_id (str): The ID of the message this log belongs to</span>
<span class="sd">        text (str): The log text content</span>
<span class="sd">        status (MessageLogStatus): The status of this log entry</span>
<span class="sd">        order (int): The order/sequence number of this log entry</span>
<span class="sd">        details (MessageLogDetails | None): Additional details about this log entry</span>
<span class="sd">        uncited_references (MessageLogUncitedReferences | None): References that are not cited</span>
<span class="sd">        references (list[ContentReference] | None): List of references for this log</span>

<span class="sd">    Returns:</span>
<span class="sd">        MessageLog: The created message log</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the creation fails</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">create_message_log</span><span class="p">(</span>
        <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
        <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
        <span class="n">message_id</span><span class="o">=</span><span class="n">message_id</span><span class="p">,</span>
        <span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>
        <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">,</span>
        <span class="n">order</span><span class="o">=</span><span class="n">order</span><span class="p">,</span>
        <span class="n">details</span><span class="o">=</span><span class="n">details</span><span class="p">,</span>
        <span class="n">uncited_references</span><span class="o">=</span><span class="n">uncited_references</span><span class="p">,</span>
        <span class="n">references</span><span class="o">=</span><span class="n">references</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.create_message_log_async" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_message_log_async</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">message_id</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">order</span><span class="p">,</span> <span class="n">details</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">uncited_references</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">references</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#unique_toolkit.services.chat_service.ChatService.create_message_log_async" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Creates a message log for tracking execution steps asynchronously.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>message_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the message this log belongs to</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>text</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The log text content</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>status</code>
            </td>
            <td>
                  <code><span title="unique_toolkit.chat.schemas.MessageLogStatus">MessageLogStatus</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The status of this log entry</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>order</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The order/sequence number of this log entry</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>details</code>
            </td>
            <td>
                  <code><span title="unique_toolkit.chat.schemas.MessageLogDetails">MessageLogDetails</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional details about this log entry</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>uncited_references</code>
            </td>
            <td>
                  <code><span title="unique_toolkit.chat.schemas.MessageLogUncitedReferences">MessageLogUncitedReferences</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>References that are not cited</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>references</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="unique_toolkit.content.schemas.ContentReference">ContentReference</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of references for this log</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>MessageLog</code></td>            <td>
                  <code><span title="unique_toolkit.chat.schemas.MessageLog">MessageLog</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created message log</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the creation fails</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">create_message_log_async</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">status</span><span class="p">:</span> <span class="n">MessageLogStatus</span><span class="p">,</span>
    <span class="n">order</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">details</span><span class="p">:</span> <span class="n">MessageLogDetails</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">uncited_references</span><span class="p">:</span> <span class="n">MessageLogUncitedReferences</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">references</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentReference</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MessageLog</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a message log for tracking execution steps asynchronously.</span>

<span class="sd">    Args:</span>
<span class="sd">        message_id (str): The ID of the message this log belongs to</span>
<span class="sd">        text (str): The log text content</span>
<span class="sd">        status (MessageLogStatus): The status of this log entry</span>
<span class="sd">        order (int): The order/sequence number of this log entry</span>
<span class="sd">        details (MessageLogDetails | None): Additional details about this log entry</span>
<span class="sd">        uncited_references (MessageLogUncitedReferences | None): References that are not cited</span>
<span class="sd">        references (list[ContentReference] | None): List of references for this log</span>

<span class="sd">    Returns:</span>
<span class="sd">        MessageLog: The created message log</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the creation fails</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">create_message_log_async</span><span class="p">(</span>
        <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
        <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
        <span class="n">message_id</span><span class="o">=</span><span class="n">message_id</span><span class="p">,</span>
        <span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>
        <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">,</span>
        <span class="n">order</span><span class="o">=</span><span class="n">order</span><span class="p">,</span>
        <span class="n">details</span><span class="o">=</span><span class="n">details</span><span class="p">,</span>
        <span class="n">uncited_references</span><span class="o">=</span><span class="n">uncited_references</span><span class="p">,</span>
        <span class="n">references</span><span class="o">=</span><span class="n">references</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.create_message_memory" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_message_memory</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#unique_toolkit.services.chat_service.ChatService.create_message_memory" class="headerlink" title="Permanent link">&para;</a></h4>
          <div class="doc-overloads">
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">create_message_memory</span><span class="p">(</span>
    <span class="o">*</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">dict</span> <span class="o">|</span> <span class="n">BaseModel</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ShortTermMemory</span>
</code></pre></div><div class="doc-signature highlight"><pre><span></span><code><span class="nf">create_message_memory</span><span class="p">(</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">value</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">dict</span> <span class="o">|</span> <span class="n">BaseModel</span><span class="p">,</span>
    <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ShortTermMemory</span>
</code></pre></div>          </div>


    <div class="doc doc-contents ">

        <p>Creates a short-term memory for the current assistant message synchronously.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>key</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The memory key</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>value</code>
            </td>
            <td>
                  <code><span title="str">str</span> | <span title="dict">dict</span> | <span title="pydantic.BaseModel">BaseModel</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The memory value</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>ShortTermMemory</code></td>            <td>
                  <code><span title="unique_toolkit.short_term_memory.schemas.ShortTermMemory">ShortTermMemory</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created short-term memory</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the creation fails</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1971</span>
<span class="normal">1972</span>
<span class="normal">1973</span>
<span class="normal">1974</span>
<span class="normal">1975</span>
<span class="normal">1976</span>
<span class="normal">1977</span>
<span class="normal">1978</span>
<span class="normal">1979</span>
<span class="normal">1980</span>
<span class="normal">1981</span>
<span class="normal">1982</span>
<span class="normal">1983</span>
<span class="normal">1984</span>
<span class="normal">1985</span>
<span class="normal">1986</span>
<span class="normal">1987</span>
<span class="normal">1988</span>
<span class="normal">1989</span>
<span class="normal">1990</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">create_message_memory</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">dict</span> <span class="o">|</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ShortTermMemory</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a short-term memory for the current assistant message synchronously.</span>

<span class="sd">    Args:</span>
<span class="sd">        key (str): The memory key</span>
<span class="sd">        value (str | dict | BaseModel): The memory value</span>

<span class="sd">    Returns:</span>
<span class="sd">        ShortTermMemory: The created short-term memory</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the creation fails</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_message_memory_by_id</span><span class="p">(</span>
        <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span>
        <span class="n">message_id</span><span class="o">=</span><span class="n">message_id</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_assistant_message_id</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.create_message_memory_async" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_message_memory_async</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#unique_toolkit.services.chat_service.ChatService.create_message_memory_async" class="headerlink" title="Permanent link">&para;</a></h4>
          <div class="doc-overloads">
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">create_message_memory_async</span><span class="p">(</span>
    <span class="o">*</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">dict</span> <span class="o">|</span> <span class="n">BaseModel</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ShortTermMemory</span>
</code></pre></div><div class="doc-signature highlight"><pre><span></span><code><span class="nf">create_message_memory_async</span><span class="p">(</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">value</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">dict</span> <span class="o">|</span> <span class="n">BaseModel</span><span class="p">,</span>
    <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ShortTermMemory</span>
</code></pre></div>          </div>


    <div class="doc doc-contents ">

        <p>Creates a short-term memory for the current assistant message asynchronously.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>key</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The memory key</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>value</code>
            </td>
            <td>
                  <code><span title="str">str</span> | <span title="dict">dict</span> | <span title="pydantic.BaseModel">BaseModel</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The memory value</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>ShortTermMemory</code></td>            <td>
                  <code><span title="unique_toolkit.short_term_memory.schemas.ShortTermMemory">ShortTermMemory</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created short-term memory</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the creation fails</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2005</span>
<span class="normal">2006</span>
<span class="normal">2007</span>
<span class="normal">2008</span>
<span class="normal">2009</span>
<span class="normal">2010</span>
<span class="normal">2011</span>
<span class="normal">2012</span>
<span class="normal">2013</span>
<span class="normal">2014</span>
<span class="normal">2015</span>
<span class="normal">2016</span>
<span class="normal">2017</span>
<span class="normal">2018</span>
<span class="normal">2019</span>
<span class="normal">2020</span>
<span class="normal">2021</span>
<span class="normal">2022</span>
<span class="normal">2023</span>
<span class="normal">2024</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">create_message_memory_async</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">dict</span> <span class="o">|</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ShortTermMemory</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a short-term memory for the current assistant message asynchronously.</span>

<span class="sd">    Args:</span>
<span class="sd">        key (str): The memory key</span>
<span class="sd">        value (str | dict | BaseModel): The memory value</span>

<span class="sd">    Returns:</span>
<span class="sd">        ShortTermMemory: The created short-term memory</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the creation fails</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_message_memory_by_id_async</span><span class="p">(</span>
        <span class="n">message_id</span><span class="o">=</span><span class="n">message_id</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_assistant_message_id</span><span class="p">,</span>
        <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.create_message_memory_by_id" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_message_memory_by_id</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">message_id</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></code>

<a href="#unique_toolkit.services.chat_service.ChatService.create_message_memory_by_id" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Creates a short-term memory for a specific message synchronously.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>message_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The message ID</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>key</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The memory key</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>value</code>
            </td>
            <td>
                  <code><span title="str">str</span> | <span title="dict">dict</span> | <span title="pydantic.BaseModel">BaseModel</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The memory value</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>ShortTermMemory</code></td>            <td>
                  <code><span title="unique_toolkit.short_term_memory.schemas.ShortTermMemory">ShortTermMemory</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created short-term memory</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the creation fails</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1771</span>
<span class="normal">1772</span>
<span class="normal">1773</span>
<span class="normal">1774</span>
<span class="normal">1775</span>
<span class="normal">1776</span>
<span class="normal">1777</span>
<span class="normal">1778</span>
<span class="normal">1779</span>
<span class="normal">1780</span>
<span class="normal">1781</span>
<span class="normal">1782</span>
<span class="normal">1783</span>
<span class="normal">1784</span>
<span class="normal">1785</span>
<span class="normal">1786</span>
<span class="normal">1787</span>
<span class="normal">1788</span>
<span class="normal">1789</span>
<span class="normal">1790</span>
<span class="normal">1791</span>
<span class="normal">1792</span>
<span class="normal">1793</span>
<span class="normal">1794</span>
<span class="normal">1795</span>
<span class="normal">1796</span>
<span class="normal">1797</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">create_message_memory_by_id</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">dict</span> <span class="o">|</span> <span class="n">BaseModel</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ShortTermMemory</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a short-term memory for a specific message synchronously.</span>

<span class="sd">    Args:</span>
<span class="sd">        message_id (str): The message ID</span>
<span class="sd">        key (str): The memory key</span>
<span class="sd">        value (str | dict | BaseModel): The memory value</span>

<span class="sd">    Returns:</span>
<span class="sd">        ShortTermMemory: The created short-term memory</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the creation fails</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Convert BaseModel to JSON string if needed</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">model_dump_json</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">create_memory</span><span class="p">(</span>
        <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
        <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
        <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span>
        <span class="n">message_id</span><span class="o">=</span><span class="n">message_id</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.create_message_memory_by_id_async" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_message_memory_by_id_async</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">message_id</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#unique_toolkit.services.chat_service.ChatService.create_message_memory_by_id_async" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Creates a short-term memory for a specific message asynchronously.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>message_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The message ID</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>key</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The memory key</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>value</code>
            </td>
            <td>
                  <code><span title="str">str</span> | <span title="dict">dict</span> | <span title="pydantic.BaseModel">BaseModel</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The memory value</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>ShortTermMemory</code></td>            <td>
                  <code><span title="unique_toolkit.short_term_memory.schemas.ShortTermMemory">ShortTermMemory</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created short-term memory</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the creation fails</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1799</span>
<span class="normal">1800</span>
<span class="normal">1801</span>
<span class="normal">1802</span>
<span class="normal">1803</span>
<span class="normal">1804</span>
<span class="normal">1805</span>
<span class="normal">1806</span>
<span class="normal">1807</span>
<span class="normal">1808</span>
<span class="normal">1809</span>
<span class="normal">1810</span>
<span class="normal">1811</span>
<span class="normal">1812</span>
<span class="normal">1813</span>
<span class="normal">1814</span>
<span class="normal">1815</span>
<span class="normal">1816</span>
<span class="normal">1817</span>
<span class="normal">1818</span>
<span class="normal">1819</span>
<span class="normal">1820</span>
<span class="normal">1821</span>
<span class="normal">1822</span>
<span class="normal">1823</span>
<span class="normal">1824</span>
<span class="normal">1825</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">create_message_memory_by_id_async</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">dict</span> <span class="o">|</span> <span class="n">BaseModel</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ShortTermMemory</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a short-term memory for a specific message asynchronously.</span>

<span class="sd">    Args:</span>
<span class="sd">        message_id (str): The message ID</span>
<span class="sd">        key (str): The memory key</span>
<span class="sd">        value (str | dict | BaseModel): The memory value</span>

<span class="sd">    Returns:</span>
<span class="sd">        ShortTermMemory: The created short-term memory</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the creation fails</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Convert BaseModel to JSON string if needed</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">model_dump_json</span><span class="p">()</span>

    <span class="k">return</span> <span class="k">await</span> <span class="n">create_memory_async</span><span class="p">(</span>
        <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
        <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
        <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span>
        <span class="n">message_id</span><span class="o">=</span><span class="n">message_id</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.create_user_message" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_user_message</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">original_content</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">references</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">debug_info</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">set_completed_at</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

<a href="#unique_toolkit.services.chat_service.ChatService.create_user_message" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Creates a user message in the chat session synchronously.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>content</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The content for the message.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>original_content</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The original content for the message.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>references</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="unique_toolkit.content.schemas.ContentReference">ContentReference</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list of ContentReference objects. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>debug_info</code>
            </td>
            <td>
                  <code>dict[str, Any]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Debug information. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>set_completed_at</code>
            </td>
            <td>
                  <code><span title="Optional">Optional</span>[<span title="bool">bool</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to set the completedAt field with the current date time. Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>ChatMessage</code></td>            <td>
                  <code><span title="unique_toolkit.chat.schemas.ChatMessage">ChatMessage</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created message.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the creation fails.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">create_user_message</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">content</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">original_content</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">references</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentReference</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">debug_info</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">set_completed_at</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ChatMessage</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a user message in the chat session synchronously.</span>

<span class="sd">    Args:</span>
<span class="sd">        content (str): The content for the message.</span>
<span class="sd">        original_content (str, optional): The original content for the message.</span>
<span class="sd">        references (list[ContentReference]): list of ContentReference objects. Defaults to None.</span>
<span class="sd">        debug_info (dict[str, Any]]): Debug information. Defaults to None.</span>
<span class="sd">        set_completed_at (Optional[bool]): Whether to set the completedAt field with the current date time. Defaults to False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ChatMessage: The created message.</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the creation fails.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">chat_message</span> <span class="o">=</span> <span class="n">create_message</span><span class="p">(</span>
        <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
        <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
        <span class="n">chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span>
        <span class="n">assistant_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_assistant_id</span><span class="p">,</span>
        <span class="n">role</span><span class="o">=</span><span class="n">ChatMessageRole</span><span class="o">.</span><span class="n">USER</span><span class="p">,</span>
        <span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">,</span>
        <span class="n">original_content</span><span class="o">=</span><span class="n">original_content</span><span class="p">,</span>
        <span class="n">references</span><span class="o">=</span><span class="n">references</span><span class="p">,</span>
        <span class="n">debug_info</span><span class="o">=</span><span class="n">debug_info</span><span class="p">,</span>
        <span class="n">set_completed_at</span><span class="o">=</span><span class="n">set_completed_at</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="c1"># Update the user message id</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_user_message_id</span> <span class="o">=</span> <span class="n">chat_message</span><span class="o">.</span><span class="n">id</span> <span class="ow">or</span> <span class="s2">&quot;unknown&quot;</span>
    <span class="k">return</span> <span class="n">chat_message</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.create_user_message_async" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_user_message_async</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">original_content</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">references</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">debug_info</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">set_completed_at</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#unique_toolkit.services.chat_service.ChatService.create_user_message_async" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Creates a user message in the chat session asynchronously.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>content</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The content for the message.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>original_content</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The original content for the message.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>references</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="unique_toolkit.content.schemas.ContentReference">ContentReference</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list of references. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>debug_info</code>
            </td>
            <td>
                  <code>dict[str, Any]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Debug information. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>set_completed_at</code>
            </td>
            <td>
                  <code><span title="Optional">Optional</span>[<span title="bool">bool</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to set the completedAt field with the current date time. Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>ChatMessage</code></td>            <td>
                  <code><span title="unique_toolkit.chat.schemas.ChatMessage">ChatMessage</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created message.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the creation fails.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">create_user_message_async</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">content</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">original_content</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">references</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentReference</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">debug_info</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">set_completed_at</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ChatMessage</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a user message in the chat session asynchronously.</span>

<span class="sd">    Args:</span>
<span class="sd">        content (str): The content for the message.</span>
<span class="sd">        original_content (str, optional): The original content for the message.</span>
<span class="sd">        references (list[ContentReference]): list of references. Defaults to None.</span>
<span class="sd">        debug_info (dict[str, Any]]): Debug information. Defaults to None.</span>
<span class="sd">        set_completed_at (Optional[bool]): Whether to set the completedAt field with the current date time. Defaults to False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ChatMessage: The created message.</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the creation fails.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">chat_message</span> <span class="o">=</span> <span class="k">await</span> <span class="n">create_message_async</span><span class="p">(</span>
        <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
        <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
        <span class="n">chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span>
        <span class="n">assistant_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_assistant_id</span><span class="p">,</span>
        <span class="n">role</span><span class="o">=</span><span class="n">ChatMessageRole</span><span class="o">.</span><span class="n">USER</span><span class="p">,</span>
        <span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">,</span>
        <span class="n">original_content</span><span class="o">=</span><span class="n">original_content</span><span class="p">,</span>
        <span class="n">references</span><span class="o">=</span><span class="n">references</span><span class="p">,</span>
        <span class="n">debug_info</span><span class="o">=</span><span class="n">debug_info</span><span class="p">,</span>
        <span class="n">set_completed_at</span><span class="o">=</span><span class="n">set_completed_at</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="c1"># Update the user message id</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_user_message_id</span> <span class="o">=</span> <span class="n">chat_message</span><span class="o">.</span><span class="n">id</span> <span class="ow">or</span> <span class="s2">&quot;unknown&quot;</span>
    <span class="k">return</span> <span class="n">chat_message</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.find_chat_memory" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">find_chat_memory</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span></code>

<a href="#unique_toolkit.services.chat_service.ChatService.find_chat_memory" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Finds the latest short-term memory for the current chat synchronously.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>key</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The memory key</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>ShortTermMemory</code></td>            <td>
                  <code><span title="unique_toolkit.short_term_memory.schemas.ShortTermMemory">ShortTermMemory</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The latest short-term memory</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the retrieval fails</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2026</span>
<span class="normal">2027</span>
<span class="normal">2028</span>
<span class="normal">2029</span>
<span class="normal">2030</span>
<span class="normal">2031</span>
<span class="normal">2032</span>
<span class="normal">2033</span>
<span class="normal">2034</span>
<span class="normal">2035</span>
<span class="normal">2036</span>
<span class="normal">2037</span>
<span class="normal">2038</span>
<span class="normal">2039</span>
<span class="normal">2040</span>
<span class="normal">2041</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">find_chat_memory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ShortTermMemory</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Finds the latest short-term memory for the current chat synchronously.</span>

<span class="sd">    Args:</span>
<span class="sd">        key (str): The memory key</span>

<span class="sd">    Returns:</span>
<span class="sd">        ShortTermMemory: The latest short-term memory</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the retrieval fails</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_chat_memory_by_id</span><span class="p">(</span>
        <span class="n">chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span>
        <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.find_chat_memory_async" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">find_chat_memory_async</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#unique_toolkit.services.chat_service.ChatService.find_chat_memory_async" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Finds the latest short-term memory for the current chat asynchronously.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>key</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The memory key</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>ShortTermMemory</code></td>            <td>
                  <code><span title="unique_toolkit.short_term_memory.schemas.ShortTermMemory">ShortTermMemory</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The latest short-term memory</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the retrieval fails</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2043</span>
<span class="normal">2044</span>
<span class="normal">2045</span>
<span class="normal">2046</span>
<span class="normal">2047</span>
<span class="normal">2048</span>
<span class="normal">2049</span>
<span class="normal">2050</span>
<span class="normal">2051</span>
<span class="normal">2052</span>
<span class="normal">2053</span>
<span class="normal">2054</span>
<span class="normal">2055</span>
<span class="normal">2056</span>
<span class="normal">2057</span>
<span class="normal">2058</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">find_chat_memory_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ShortTermMemory</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Finds the latest short-term memory for the current chat asynchronously.</span>

<span class="sd">    Args:</span>
<span class="sd">        key (str): The memory key</span>

<span class="sd">    Returns:</span>
<span class="sd">        ShortTermMemory: The latest short-term memory</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the retrieval fails</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_chat_memory_by_id_async</span><span class="p">(</span>
        <span class="n">chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span>
        <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.find_chat_memory_by_id" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">find_chat_memory_by_id</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span></code>

<a href="#unique_toolkit.services.chat_service.ChatService.find_chat_memory_by_id" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Finds the latest short-term memory for a specific chat synchronously.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>chat_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The chat ID</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>key</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The memory key</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>ShortTermMemory</code></td>            <td>
                  <code><span title="unique_toolkit.short_term_memory.schemas.ShortTermMemory">ShortTermMemory</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The latest short-term memory</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the retrieval fails</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1827</span>
<span class="normal">1828</span>
<span class="normal">1829</span>
<span class="normal">1830</span>
<span class="normal">1831</span>
<span class="normal">1832</span>
<span class="normal">1833</span>
<span class="normal">1834</span>
<span class="normal">1835</span>
<span class="normal">1836</span>
<span class="normal">1837</span>
<span class="normal">1838</span>
<span class="normal">1839</span>
<span class="normal">1840</span>
<span class="normal">1841</span>
<span class="normal">1842</span>
<span class="normal">1843</span>
<span class="normal">1844</span>
<span class="normal">1845</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">find_chat_memory_by_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ShortTermMemory</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Finds the latest short-term memory for a specific chat synchronously.</span>

<span class="sd">    Args:</span>
<span class="sd">        chat_id (str): The chat ID</span>
<span class="sd">        key (str): The memory key</span>

<span class="sd">    Returns:</span>
<span class="sd">        ShortTermMemory: The latest short-term memory</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the retrieval fails</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">find_latest_memory</span><span class="p">(</span>
        <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
        <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
        <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
        <span class="n">chat_id</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.find_chat_memory_by_id_async" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">find_chat_memory_by_id_async</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#unique_toolkit.services.chat_service.ChatService.find_chat_memory_by_id_async" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Finds the latest short-term memory for a specific chat asynchronously.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>chat_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The chat ID</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>key</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The memory key</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>ShortTermMemory</code></td>            <td>
                  <code><span title="unique_toolkit.short_term_memory.schemas.ShortTermMemory">ShortTermMemory</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The latest short-term memory</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the retrieval fails</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1847</span>
<span class="normal">1848</span>
<span class="normal">1849</span>
<span class="normal">1850</span>
<span class="normal">1851</span>
<span class="normal">1852</span>
<span class="normal">1853</span>
<span class="normal">1854</span>
<span class="normal">1855</span>
<span class="normal">1856</span>
<span class="normal">1857</span>
<span class="normal">1858</span>
<span class="normal">1859</span>
<span class="normal">1860</span>
<span class="normal">1861</span>
<span class="normal">1862</span>
<span class="normal">1863</span>
<span class="normal">1864</span>
<span class="normal">1865</span>
<span class="normal">1866</span>
<span class="normal">1867</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">find_chat_memory_by_id_async</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ShortTermMemory</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Finds the latest short-term memory for a specific chat asynchronously.</span>

<span class="sd">    Args:</span>
<span class="sd">        chat_id (str): The chat ID</span>
<span class="sd">        key (str): The memory key</span>

<span class="sd">    Returns:</span>
<span class="sd">        ShortTermMemory: The latest short-term memory</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the retrieval fails</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">find_latest_memory_async</span><span class="p">(</span>
        <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
        <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
        <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
        <span class="n">chat_id</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.find_message_memory" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">find_message_memory</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#unique_toolkit.services.chat_service.ChatService.find_message_memory" class="headerlink" title="Permanent link">&para;</a></h4>
          <div class="doc-overloads">
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">find_message_memory</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ShortTermMemory</span>
</code></pre></div><div class="doc-signature highlight"><pre><span></span><code><span class="nf">find_message_memory</span><span class="p">(</span>
    <span class="o">*</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ShortTermMemory</span>
</code></pre></div>          </div>


    <div class="doc doc-contents ">

        <p>Finds the latest short-term memory for the current assistant message synchronously.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>key</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The memory key</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>ShortTermMemory</code></td>            <td>
                  <code><span title="unique_toolkit.short_term_memory.schemas.ShortTermMemory">ShortTermMemory</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The latest short-term memory</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the retrieval fails</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2066</span>
<span class="normal">2067</span>
<span class="normal">2068</span>
<span class="normal">2069</span>
<span class="normal">2070</span>
<span class="normal">2071</span>
<span class="normal">2072</span>
<span class="normal">2073</span>
<span class="normal">2074</span>
<span class="normal">2075</span>
<span class="normal">2076</span>
<span class="normal">2077</span>
<span class="normal">2078</span>
<span class="normal">2079</span>
<span class="normal">2080</span>
<span class="normal">2081</span>
<span class="normal">2082</span>
<span class="normal">2083</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">find_message_memory</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ShortTermMemory</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Finds the latest short-term memory for the current assistant message synchronously.</span>

<span class="sd">    Args:</span>
<span class="sd">        key (str): The memory key</span>

<span class="sd">    Returns:</span>
<span class="sd">        ShortTermMemory: The latest short-term memory</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the retrieval fails</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_message_memory_by_id</span><span class="p">(</span>
        <span class="n">message_id</span><span class="o">=</span><span class="n">message_id</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_assistant_message_id</span><span class="p">,</span>
        <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.find_message_memory_async" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">find_message_memory_async</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#unique_toolkit.services.chat_service.ChatService.find_message_memory_async" class="headerlink" title="Permanent link">&para;</a></h4>
          <div class="doc-overloads">
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">find_message_memory_async</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ShortTermMemory</span>
</code></pre></div><div class="doc-signature highlight"><pre><span></span><code><span class="nf">find_message_memory_async</span><span class="p">(</span>
    <span class="o">*</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ShortTermMemory</span>
</code></pre></div>          </div>


    <div class="doc doc-contents ">

        <p>Finds the latest short-term memory for the current assistant message asynchronously.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>key</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The memory key</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>ShortTermMemory</code></td>            <td>
                  <code><span title="unique_toolkit.short_term_memory.schemas.ShortTermMemory">ShortTermMemory</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The latest short-term memory</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the retrieval fails</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2093</span>
<span class="normal">2094</span>
<span class="normal">2095</span>
<span class="normal">2096</span>
<span class="normal">2097</span>
<span class="normal">2098</span>
<span class="normal">2099</span>
<span class="normal">2100</span>
<span class="normal">2101</span>
<span class="normal">2102</span>
<span class="normal">2103</span>
<span class="normal">2104</span>
<span class="normal">2105</span>
<span class="normal">2106</span>
<span class="normal">2107</span>
<span class="normal">2108</span>
<span class="normal">2109</span>
<span class="normal">2110</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">find_message_memory_async</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ShortTermMemory</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Finds the latest short-term memory for the current assistant message asynchronously.</span>

<span class="sd">    Args:</span>
<span class="sd">        key (str): The memory key</span>

<span class="sd">    Returns:</span>
<span class="sd">        ShortTermMemory: The latest short-term memory</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the retrieval fails</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_message_memory_by_id_async</span><span class="p">(</span>
        <span class="n">message_id</span><span class="o">=</span><span class="n">message_id</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_assistant_message_id</span><span class="p">,</span>
        <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.find_message_memory_by_id" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">find_message_memory_by_id</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">message_id</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span></code>

<a href="#unique_toolkit.services.chat_service.ChatService.find_message_memory_by_id" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Finds the latest short-term memory for a specific message synchronously.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>message_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The message ID</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>key</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The memory key</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>ShortTermMemory</code></td>            <td>
                  <code><span title="unique_toolkit.short_term_memory.schemas.ShortTermMemory">ShortTermMemory</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The latest short-term memory</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the retrieval fails</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1869</span>
<span class="normal">1870</span>
<span class="normal">1871</span>
<span class="normal">1872</span>
<span class="normal">1873</span>
<span class="normal">1874</span>
<span class="normal">1875</span>
<span class="normal">1876</span>
<span class="normal">1877</span>
<span class="normal">1878</span>
<span class="normal">1879</span>
<span class="normal">1880</span>
<span class="normal">1881</span>
<span class="normal">1882</span>
<span class="normal">1883</span>
<span class="normal">1884</span>
<span class="normal">1885</span>
<span class="normal">1886</span>
<span class="normal">1887</span>
<span class="normal">1888</span>
<span class="normal">1889</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">find_message_memory_by_id</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ShortTermMemory</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Finds the latest short-term memory for a specific message synchronously.</span>

<span class="sd">    Args:</span>
<span class="sd">        message_id (str): The message ID</span>
<span class="sd">        key (str): The memory key</span>

<span class="sd">    Returns:</span>
<span class="sd">        ShortTermMemory: The latest short-term memory</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the retrieval fails</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">find_latest_memory</span><span class="p">(</span>
        <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
        <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
        <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
        <span class="n">message_id</span><span class="o">=</span><span class="n">message_id</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.find_message_memory_by_id_async" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">find_message_memory_by_id_async</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">message_id</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#unique_toolkit.services.chat_service.ChatService.find_message_memory_by_id_async" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Finds the latest short-term memory for a specific message asynchronously.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>message_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The message ID</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>key</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The memory key</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>ShortTermMemory</code></td>            <td>
                  <code><span title="unique_toolkit.short_term_memory.schemas.ShortTermMemory">ShortTermMemory</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The latest short-term memory</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the retrieval fails</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1891</span>
<span class="normal">1892</span>
<span class="normal">1893</span>
<span class="normal">1894</span>
<span class="normal">1895</span>
<span class="normal">1896</span>
<span class="normal">1897</span>
<span class="normal">1898</span>
<span class="normal">1899</span>
<span class="normal">1900</span>
<span class="normal">1901</span>
<span class="normal">1902</span>
<span class="normal">1903</span>
<span class="normal">1904</span>
<span class="normal">1905</span>
<span class="normal">1906</span>
<span class="normal">1907</span>
<span class="normal">1908</span>
<span class="normal">1909</span>
<span class="normal">1910</span>
<span class="normal">1911</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">find_message_memory_by_id_async</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ShortTermMemory</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Finds the latest short-term memory for a specific message asynchronously.</span>

<span class="sd">    Args:</span>
<span class="sd">        message_id (str): The message ID</span>
<span class="sd">        key (str): The memory key</span>

<span class="sd">    Returns:</span>
<span class="sd">        ShortTermMemory: The latest short-term memory</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the retrieval fails</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">find_latest_memory_async</span><span class="p">(</span>
        <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
        <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
        <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
        <span class="n">message_id</span><span class="o">=</span><span class="n">message_id</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.free_user_input" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">free_user_input</span><span class="p">()</span></code>

<a href="#unique_toolkit.services.chat_service.ChatService.free_user_input" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Unblocks the next user input</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">free_user_input</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Unblocks the next user input&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">modify_assistant_message</span><span class="p">(</span><span class="n">set_completed_at</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.get_assistant_message_execution" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_assistant_message_execution</span><span class="p">()</span></code>

<a href="#unique_toolkit.services.chat_service.ChatService.get_assistant_message_execution" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Gets the message execution for the current assistant message synchronously.</p>
<p>This is a convenience method that uses the current assistant message ID.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>MessageExecution</code></td>            <td>
                  <code><span title="unique_toolkit.chat.schemas.MessageExecution">MessageExecution</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The message execution</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the retrieval fails</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1261</span>
<span class="normal">1262</span>
<span class="normal">1263</span>
<span class="normal">1264</span>
<span class="normal">1265</span>
<span class="normal">1266</span>
<span class="normal">1267</span>
<span class="normal">1268</span>
<span class="normal">1269</span>
<span class="normal">1270</span>
<span class="normal">1271</span>
<span class="normal">1272</span>
<span class="normal">1273</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_assistant_message_execution</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MessageExecution</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets the message execution for the current assistant message synchronously.</span>

<span class="sd">    This is a convenience method that uses the current assistant message ID.</span>

<span class="sd">    Returns:</span>
<span class="sd">        MessageExecution: The message execution</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the retrieval fails</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_message_execution</span><span class="p">(</span><span class="n">message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_assistant_message_id</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.get_assistant_message_execution_async" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_assistant_message_execution_async</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#unique_toolkit.services.chat_service.ChatService.get_assistant_message_execution_async" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Gets the message execution for the current assistant message asynchronously.</p>
<p>This is a convenience method that uses the current assistant message ID.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>MessageExecution</code></td>            <td>
                  <code><span title="unique_toolkit.chat.schemas.MessageExecution">MessageExecution</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The message execution</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the retrieval fails</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1275</span>
<span class="normal">1276</span>
<span class="normal">1277</span>
<span class="normal">1278</span>
<span class="normal">1279</span>
<span class="normal">1280</span>
<span class="normal">1281</span>
<span class="normal">1282</span>
<span class="normal">1283</span>
<span class="normal">1284</span>
<span class="normal">1285</span>
<span class="normal">1286</span>
<span class="normal">1287</span>
<span class="normal">1288</span>
<span class="normal">1289</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_assistant_message_execution_async</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MessageExecution</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets the message execution for the current assistant message asynchronously.</span>

<span class="sd">    This is a convenience method that uses the current assistant message ID.</span>

<span class="sd">    Returns:</span>
<span class="sd">        MessageExecution: The message execution</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the retrieval fails</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_message_execution_async</span><span class="p">(</span>
        <span class="n">message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_assistant_message_id</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.get_full_and_selected_history" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_full_and_selected_history</span><span class="p">(</span><span class="n">token_limit</span><span class="p">,</span> <span class="n">percent_of_max_tokens</span><span class="o">=</span><span class="n">DEFAULT_PERCENT_OF_MAX_TOKENS</span><span class="p">,</span> <span class="n">max_messages</span><span class="o">=</span><span class="n">DEFAULT_MAX_MESSAGES</span><span class="p">)</span></code>

<a href="#unique_toolkit.services.chat_service.ChatService.get_full_and_selected_history" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Loads the chat history for the chat session synchronously.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>token_limit</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The maximum number of tokens to load.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>percent_of_max_tokens</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The percentage of the maximum tokens to load. Defaults to 0.15.</p>
              </div>
            </td>
            <td>
                  <code><span title="unique_toolkit.chat.constants.DEFAULT_PERCENT_OF_MAX_TOKENS">DEFAULT_PERCENT_OF_MAX_TOKENS</span></code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>max_messages</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The maximum number of messages to load. Defaults to 4.</p>
              </div>
            </td>
            <td>
                  <code><span title="unique_toolkit.chat.constants.DEFAULT_MAX_MESSAGES">DEFAULT_MAX_MESSAGES</span></code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="tuple">tuple</span>[<span title="list">list</span>[<span title="unique_toolkit.chat.schemas.ChatMessage">ChatMessage</span>], <span title="list">list</span>[<span title="unique_toolkit.chat.schemas.ChatMessage">ChatMessage</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>tuple[list[ChatMessage], list[ChatMessage]]: The selected and full chat history.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the loading fails.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_full_and_selected_history</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">token_limit</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">percent_of_max_tokens</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_PERCENT_OF_MAX_TOKENS</span><span class="p">,</span>
    <span class="n">max_messages</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">DEFAULT_MAX_MESSAGES</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">ChatMessage</span><span class="p">],</span> <span class="nb">list</span><span class="p">[</span><span class="n">ChatMessage</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Loads the chat history for the chat session synchronously.</span>

<span class="sd">    Args:</span>
<span class="sd">        token_limit (int): The maximum number of tokens to load.</span>
<span class="sd">        percent_of_max_tokens (float): The percentage of the maximum tokens to load. Defaults to 0.15.</span>
<span class="sd">        max_messages (int): The maximum number of messages to load. Defaults to 4.</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple[list[ChatMessage], list[ChatMessage]]: The selected and full chat history.</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the loading fails.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">full_history</span> <span class="o">=</span> <span class="n">get_full_history</span><span class="p">(</span>
        <span class="n">event_user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
        <span class="n">event_company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
        <span class="n">event_payload_chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">selected_history</span> <span class="o">=</span> <span class="n">get_selection_from_history</span><span class="p">(</span>
        <span class="n">full_history</span><span class="o">=</span><span class="n">full_history</span><span class="p">,</span>
        <span class="n">max_tokens</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">token_limit</span> <span class="o">*</span> <span class="n">percent_of_max_tokens</span><span class="p">)),</span>
        <span class="n">max_messages</span><span class="o">=</span><span class="n">max_messages</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">full_history</span><span class="p">,</span> <span class="n">selected_history</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.get_full_and_selected_history_async" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_full_and_selected_history_async</span><span class="p">(</span><span class="n">token_limit</span><span class="p">,</span> <span class="n">percent_of_max_tokens</span><span class="o">=</span><span class="n">DEFAULT_PERCENT_OF_MAX_TOKENS</span><span class="p">,</span> <span class="n">max_messages</span><span class="o">=</span><span class="n">DEFAULT_MAX_MESSAGES</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#unique_toolkit.services.chat_service.ChatService.get_full_and_selected_history_async" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Loads the chat history for the chat session asynchronously.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>token_limit</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The maximum number of tokens to load.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>percent_of_max_tokens</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The percentage of the maximum tokens to load. Defaults to 0.15.</p>
              </div>
            </td>
            <td>
                  <code><span title="unique_toolkit.chat.constants.DEFAULT_PERCENT_OF_MAX_TOKENS">DEFAULT_PERCENT_OF_MAX_TOKENS</span></code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>max_messages</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The maximum number of messages to load. Defaults to 4.</p>
              </div>
            </td>
            <td>
                  <code><span title="unique_toolkit.chat.constants.DEFAULT_MAX_MESSAGES">DEFAULT_MAX_MESSAGES</span></code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="tuple">tuple</span>[<span title="list">list</span>[<span title="unique_toolkit.chat.schemas.ChatMessage">ChatMessage</span>], <span title="list">list</span>[<span title="unique_toolkit.chat.schemas.ChatMessage">ChatMessage</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>tuple[list[ChatMessage], list[ChatMessage]]: The selected and full chat history.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the loading fails.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_full_and_selected_history_async</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">token_limit</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">percent_of_max_tokens</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_PERCENT_OF_MAX_TOKENS</span><span class="p">,</span>
    <span class="n">max_messages</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">DEFAULT_MAX_MESSAGES</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">ChatMessage</span><span class="p">],</span> <span class="nb">list</span><span class="p">[</span><span class="n">ChatMessage</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Loads the chat history for the chat session asynchronously.</span>

<span class="sd">    Args:</span>
<span class="sd">        token_limit (int): The maximum number of tokens to load.</span>
<span class="sd">        percent_of_max_tokens (float): The percentage of the maximum tokens to load. Defaults to 0.15.</span>
<span class="sd">        max_messages (int): The maximum number of messages to load. Defaults to 4.</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple[list[ChatMessage], list[ChatMessage]]: The selected and full chat history.</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the loading fails.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">full_history</span> <span class="o">=</span> <span class="k">await</span> <span class="n">get_full_history_async</span><span class="p">(</span>
        <span class="n">event_user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
        <span class="n">event_company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
        <span class="n">event_payload_chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">selected_history</span> <span class="o">=</span> <span class="n">get_selection_from_history</span><span class="p">(</span>
        <span class="n">full_history</span><span class="o">=</span><span class="n">full_history</span><span class="p">,</span>
        <span class="n">max_tokens</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">token_limit</span> <span class="o">*</span> <span class="n">percent_of_max_tokens</span><span class="p">)),</span>
        <span class="n">max_messages</span><span class="o">=</span><span class="n">max_messages</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">full_history</span><span class="p">,</span> <span class="n">selected_history</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.get_full_history" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_full_history</span><span class="p">()</span></code>

<a href="#unique_toolkit.services.chat_service.ChatService.get_full_history" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Loads the full chat history for the chat session synchronously.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="unique_toolkit.chat.schemas.ChatMessage">ChatMessage</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list[ChatMessage]: The full chat history.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the loading fails.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_full_history</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">ChatMessage</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Loads the full chat history for the chat session synchronously.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list[ChatMessage]: The full chat history.</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the loading fails.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">get_full_history</span><span class="p">(</span>
        <span class="n">event_user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
        <span class="n">event_company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
        <span class="n">event_payload_chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.get_full_history_async" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_full_history_async</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#unique_toolkit.services.chat_service.ChatService.get_full_history_async" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Loads the full chat history for the chat session asynchronously.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="unique_toolkit.chat.schemas.ChatMessage">ChatMessage</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list[ChatMessage]: The full chat history.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the loading fails.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_full_history_async</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">ChatMessage</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Loads the full chat history for the chat session asynchronously.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list[ChatMessage]: The full chat history.</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the loading fails.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">get_full_history_async</span><span class="p">(</span>
        <span class="n">event_user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
        <span class="n">event_company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
        <span class="n">event_payload_chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.get_message_execution" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_message_execution</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">message_id</span><span class="p">)</span></code>

<a href="#unique_toolkit.services.chat_service.ChatService.get_message_execution" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Gets a message execution by message ID synchronously.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>message_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the message to get execution for</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>MessageExecution</code></td>            <td>
                  <code><span title="unique_toolkit.chat.schemas.MessageExecution">MessageExecution</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The message execution</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the retrieval fails</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_message_execution</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MessageExecution</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets a message execution by message ID synchronously.</span>

<span class="sd">    Args:</span>
<span class="sd">        message_id (str): The ID of the message to get execution for</span>

<span class="sd">    Returns:</span>
<span class="sd">        MessageExecution: The message execution</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the retrieval fails</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">get_message_execution</span><span class="p">(</span>
        <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
        <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
        <span class="n">message_id</span><span class="o">=</span><span class="n">message_id</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.get_message_execution_async" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_message_execution_async</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">message_id</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#unique_toolkit.services.chat_service.ChatService.get_message_execution_async" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Gets a message execution by message ID asynchronously.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>message_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the message to get execution for</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>MessageExecution</code></td>            <td>
                  <code><span title="unique_toolkit.chat.schemas.MessageExecution">MessageExecution</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The message execution</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the retrieval fails</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span>
<span class="normal">1100</span>
<span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span>
<span class="normal">1105</span>
<span class="normal">1106</span>
<span class="normal">1107</span>
<span class="normal">1108</span>
<span class="normal">1109</span>
<span class="normal">1110</span>
<span class="normal">1111</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_message_execution_async</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MessageExecution</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets a message execution by message ID asynchronously.</span>

<span class="sd">    Args:</span>
<span class="sd">        message_id (str): The ID of the message to get execution for</span>

<span class="sd">    Returns:</span>
<span class="sd">        MessageExecution: The message execution</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the retrieval fails</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">get_message_execution_async</span><span class="p">(</span>
        <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
        <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
        <span class="n">message_id</span><span class="o">=</span><span class="n">message_id</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.modify_assistant_message" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">modify_assistant_message</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">original_content</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">references</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">debug_info</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">set_completed_at</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#unique_toolkit.services.chat_service.ChatService.modify_assistant_message" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Modifies a message in the chat session synchronously if parameter is not specified the corresponding field will remain as is.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>content</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The new content for the message.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>original_content</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The original content for the message.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>references</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="unique_toolkit.content.schemas.ContentReference">ContentReference</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list of ContentReference objects. Defaults to [].</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>debug_info</code>
            </td>
            <td>
                  <code>dict[str, Any]]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Debug information. Defaults to {}.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>message_id</code>
            </td>
            <td>
                  <code><span title="Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The message ID. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>set_completed_at</code>
            </td>
            <td>
                  <code><span title="Optional">Optional</span>[<span title="bool">bool</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to set the completedAt field with the current date time. Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>ChatMessage</code></td>            <td>
                  <code><span title="unique_toolkit.chat.schemas.ChatMessage">ChatMessage</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The modified message.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the modification fails.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">modify_assistant_message</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">content</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">original_content</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">references</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentReference</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">debug_info</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">set_completed_at</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ChatMessage</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Modifies a message in the chat session synchronously if parameter is not specified the corresponding field will remain as is.</span>

<span class="sd">    Args:</span>
<span class="sd">        content (str, optional): The new content for the message.</span>
<span class="sd">        original_content (str, optional): The original content for the message.</span>
<span class="sd">        references (list[ContentReference]): list of ContentReference objects. Defaults to [].</span>
<span class="sd">        debug_info (dict[str, Any]]]): Debug information. Defaults to {}.</span>
<span class="sd">        message_id (Optional[str]): The message ID. Defaults to None.</span>
<span class="sd">        set_completed_at (Optional[bool]): Whether to set the completedAt field with the current date time. Defaults to False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ChatMessage: The modified message.</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the modification fails.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="n">modify_message</span><span class="p">(</span>
        <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
        <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
        <span class="n">assistant_message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_assistant_message_id</span><span class="p">,</span>
        <span class="n">chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span>
        <span class="n">user_message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_message_id</span><span class="p">,</span>
        <span class="n">user_message_text</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_message_text</span><span class="p">,</span>
        <span class="n">assistant</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">,</span>
        <span class="n">original_content</span><span class="o">=</span><span class="n">original_content</span><span class="p">,</span>
        <span class="n">references</span><span class="o">=</span><span class="n">references</span><span class="p">,</span>
        <span class="n">debug_info</span><span class="o">=</span><span class="n">debug_info</span><span class="p">,</span>
        <span class="n">message_id</span><span class="o">=</span><span class="n">message_id</span><span class="p">,</span>
        <span class="n">set_completed_at</span><span class="o">=</span><span class="n">set_completed_at</span> <span class="ow">or</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.modify_assistant_message_async" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">modify_assistant_message_async</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">original_content</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">references</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">debug_info</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">set_completed_at</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#unique_toolkit.services.chat_service.ChatService.modify_assistant_message_async" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Modifies a message in the chat session asynchronously.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>content</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The new content for the message.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>original_content</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The original content for the message.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>message_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The message ID. Defaults to None, then the ChatState assistant message id is used.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>references</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="unique_toolkit.content.schemas.ContentReference">ContentReference</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list of ContentReference objects. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>debug_info</code>
            </td>
            <td>
                  <code>dict[str, Any]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Debug information. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>set_completed_at</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to set the completedAt field with the current date time. Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>ChatMessage</code></td>            <td>
                  <code><span title="unique_toolkit.chat.schemas.ChatMessage">ChatMessage</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The modified message.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the modification fails.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">modify_assistant_message_async</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">content</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">original_content</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">references</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentReference</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">debug_info</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">set_completed_at</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ChatMessage</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Modifies a message in the chat session asynchronously.</span>

<span class="sd">    Args:</span>
<span class="sd">        content (str, optional): The new content for the message.</span>
<span class="sd">        original_content (str, optional): The original content for the message.</span>
<span class="sd">        message_id (str, optional): The message ID. Defaults to None, then the ChatState assistant message id is used.</span>
<span class="sd">        references (list[ContentReference]): list of ContentReference objects. Defaults to None.</span>
<span class="sd">        debug_info (dict[str, Any]], optional): Debug information. Defaults to None.</span>
<span class="sd">        set_completed_at (bool, optional): Whether to set the completedAt field with the current date time. Defaults to False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ChatMessage: The modified message.</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the modification fails.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">modify_message_async</span><span class="p">(</span>
        <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
        <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
        <span class="n">assistant_message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_assistant_message_id</span><span class="p">,</span>
        <span class="n">chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span>
        <span class="n">user_message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_message_id</span><span class="p">,</span>
        <span class="n">user_message_text</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_message_text</span><span class="p">,</span>
        <span class="n">assistant</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">,</span>
        <span class="n">original_content</span><span class="o">=</span><span class="n">original_content</span><span class="p">,</span>
        <span class="n">references</span><span class="o">=</span><span class="n">references</span><span class="p">,</span>
        <span class="n">debug_info</span><span class="o">=</span><span class="n">debug_info</span><span class="p">,</span>
        <span class="n">message_id</span><span class="o">=</span><span class="n">message_id</span><span class="p">,</span>
        <span class="n">set_completed_at</span><span class="o">=</span><span class="n">set_completed_at</span> <span class="ow">or</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.modify_message_assessment" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">modify_message_assessment</span><span class="p">(</span><span class="n">assistant_message_id</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">explanation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#unique_toolkit.services.chat_service.ChatService.modify_message_assessment" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Modifies a message assessment for an assistant message synchronously.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>assistant_message_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the assistant message to assess</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>status</code>
            </td>
            <td>
                  <code><span title="MessageAssessmentStatus">MessageAssessmentStatus</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The status of the assessment (e.g. "DONE")</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>title</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The title of the assessment</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>explanation</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Explanation of the assessment</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>label</code>
            </td>
            <td>
                  <code><span title="unique_toolkit.chat.schemas.ChatMessageAssessmentLabel">ChatMessageAssessmentLabel</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The assessment label (e.g. "RED")</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>type</code>
            </td>
            <td>
                  <code><span title="unique_toolkit.chat.schemas.ChatMessageAssessmentType">ChatMessageAssessmentType</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The type of assessment (e.g. "HALLUCINATION")</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>dict</code></td>            <td>
                  <code><span title="unique_toolkit.chat.schemas.ChatMessageAssessment">ChatMessageAssessment</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The modified message assessment</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the modification fails</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">modify_message_assessment</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">assistant_message_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">status</span><span class="p">:</span> <span class="n">ChatMessageAssessmentStatus</span><span class="p">,</span>
    <span class="nb">type</span><span class="p">:</span> <span class="n">ChatMessageAssessmentType</span><span class="p">,</span>
    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">explanation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">label</span><span class="p">:</span> <span class="n">ChatMessageAssessmentLabel</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ChatMessageAssessment</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Modifies a message assessment for an assistant message synchronously.</span>

<span class="sd">    Args:</span>
<span class="sd">        assistant_message_id (str): The ID of the assistant message to assess</span>
<span class="sd">        status (MessageAssessmentStatus): The status of the assessment (e.g. &quot;DONE&quot;)</span>
<span class="sd">        title (str | None): The title of the assessment</span>
<span class="sd">        explanation (str | None): Explanation of the assessment</span>
<span class="sd">        label (ChatMessageAssessmentLabel | None): The assessment label (e.g. &quot;RED&quot;)</span>
<span class="sd">        type (ChatMessageAssessmentType): The type of assessment (e.g. &quot;HALLUCINATION&quot;)</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: The modified message assessment</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the modification fails</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">modify_message_assessment</span><span class="p">(</span>
        <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
        <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
        <span class="n">assistant_message_id</span><span class="o">=</span><span class="n">assistant_message_id</span><span class="p">,</span>
        <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">,</span>
        <span class="nb">type</span><span class="o">=</span><span class="nb">type</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
        <span class="n">explanation</span><span class="o">=</span><span class="n">explanation</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.modify_message_assessment_async" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">modify_message_assessment_async</span><span class="p">(</span><span class="n">assistant_message_id</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">explanation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#unique_toolkit.services.chat_service.ChatService.modify_message_assessment_async" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Modifies a message assessment for an assistant message asynchronously.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>assistant_message_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the assistant message to assess</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>status</code>
            </td>
            <td>
                  <code><span title="unique_toolkit.chat.schemas.ChatMessageAssessmentStatus">ChatMessageAssessmentStatus</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The status of the assessment (e.g. "DONE")</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>title</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The title of the assessment</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>explanation</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Explanation of the assessment</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>label</code>
            </td>
            <td>
                  <code><span title="unique_toolkit.chat.schemas.ChatMessageAssessmentLabel">ChatMessageAssessmentLabel</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The assessment label (e.g. "RED")</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>type</code>
            </td>
            <td>
                  <code><span title="unique_toolkit.chat.schemas.ChatMessageAssessmentType">ChatMessageAssessmentType</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The type of assessment (e.g. "HALLUCINATION")</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>ChatMessageAssessment</code></td>            <td>
                  <code><span title="unique_toolkit.chat.schemas.ChatMessageAssessment">ChatMessageAssessment</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The modified message assessment</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the modification fails</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">modify_message_assessment_async</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">assistant_message_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="nb">type</span><span class="p">:</span> <span class="n">ChatMessageAssessmentType</span><span class="p">,</span>
    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">status</span><span class="p">:</span> <span class="n">ChatMessageAssessmentStatus</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">explanation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">label</span><span class="p">:</span> <span class="n">ChatMessageAssessmentLabel</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ChatMessageAssessment</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Modifies a message assessment for an assistant message asynchronously.</span>

<span class="sd">    Args:</span>
<span class="sd">        assistant_message_id (str): The ID of the assistant message to assess</span>
<span class="sd">        status (ChatMessageAssessmentStatus): The status of the assessment (e.g. &quot;DONE&quot;)</span>
<span class="sd">        title (str | None): The title of the assessment</span>
<span class="sd">        explanation (str | None): Explanation of the assessment</span>
<span class="sd">        label (ChatMessageAssessmentLabel | None): The assessment label (e.g. &quot;RED&quot;)</span>
<span class="sd">        type (ChatMessageAssessmentType): The type of assessment (e.g. &quot;HALLUCINATION&quot;)</span>

<span class="sd">    Returns:</span>
<span class="sd">        ChatMessageAssessment: The modified message assessment</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the modification fails</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">modify_message_assessment_async</span><span class="p">(</span>
        <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
        <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
        <span class="n">assistant_message_id</span><span class="o">=</span><span class="n">assistant_message_id</span><span class="p">,</span>
        <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">,</span>
        <span class="nb">type</span><span class="o">=</span><span class="nb">type</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
        <span class="n">explanation</span><span class="o">=</span><span class="n">explanation</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.modify_user_message" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">modify_user_message</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">references</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">debug_info</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">set_completed_at</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

<a href="#unique_toolkit.services.chat_service.ChatService.modify_user_message" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Modifies a user message in the chat session synchronously.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>content</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The new content for the message.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>references</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="unique_toolkit.content.schemas.ContentReference">ContentReference</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list of ContentReference objects.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>debug_info</code>
            </td>
            <td>
                  <code>dict[str, Any]]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Debug information.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>message_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The message ID, if not specified the last user message is edited.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>set_completed_at</code>
            </td>
            <td>
                  <code><span title="Optional">Optional</span>[<span title="bool">bool</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to set the completedAt field with the current date time. Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>ChatMessage</code></td>            <td>
                  <code><span title="unique_toolkit.chat.schemas.ChatMessage">ChatMessage</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The modified message.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the modification fails.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">modify_user_message</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">content</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">references</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentReference</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">debug_info</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">set_completed_at</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ChatMessage</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Modifies a user message in the chat session synchronously.</span>

<span class="sd">    Args:</span>
<span class="sd">        content (str): The new content for the message.</span>
<span class="sd">        references (list[ContentReference]): list of ContentReference objects.</span>
<span class="sd">        debug_info (dict[str, Any]]]): Debug information.</span>
<span class="sd">        message_id (str, optional): The message ID, if not specified the last user message is edited.</span>
<span class="sd">        set_completed_at (Optional[bool]): Whether to set the completedAt field with the current date time. Defaults to False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ChatMessage: The modified message.</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the modification fails.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">modify_message</span><span class="p">(</span>
        <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
        <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
        <span class="n">assistant_message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_assistant_message_id</span><span class="p">,</span>
        <span class="n">chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span>
        <span class="n">user_message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_message_id</span><span class="p">,</span>
        <span class="n">user_message_text</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_message_text</span><span class="p">,</span>
        <span class="n">assistant</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">,</span>
        <span class="n">references</span><span class="o">=</span><span class="n">references</span><span class="p">,</span>
        <span class="n">debug_info</span><span class="o">=</span><span class="n">debug_info</span><span class="p">,</span>
        <span class="n">message_id</span><span class="o">=</span><span class="n">message_id</span><span class="p">,</span>
        <span class="n">set_completed_at</span><span class="o">=</span><span class="n">set_completed_at</span> <span class="ow">or</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.modify_user_message_async" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">modify_user_message_async</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">references</span><span class="o">=</span><span class="p">[],</span> <span class="n">debug_info</span><span class="o">=</span><span class="p">{},</span> <span class="n">message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">set_completed_at</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#unique_toolkit.services.chat_service.ChatService.modify_user_message_async" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Modifies a message in the chat session asynchronously.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>content</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The new content for the message.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>message_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The message ID. Defaults to None, then the ChatState user message id is used.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>references</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="unique_toolkit.content.schemas.ContentReference">ContentReference</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list of ContentReference objects. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>[]</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>debug_info</code>
            </td>
            <td>
                  <code>dict[str, Any]]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Debug information. Defaults to {}.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>set_completed_at</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to set the completedAt field with the current date time. Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>ChatMessage</code></td>            <td>
                  <code><span title="unique_toolkit.chat.schemas.ChatMessage">ChatMessage</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The modified message.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the modification fails.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">modify_user_message_async</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">content</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">references</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentReference</span><span class="p">]</span> <span class="o">=</span> <span class="p">[],</span>
    <span class="n">debug_info</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{},</span>
    <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">set_completed_at</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ChatMessage</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Modifies a message in the chat session asynchronously.</span>

<span class="sd">    Args:</span>
<span class="sd">        content (str): The new content for the message.</span>
<span class="sd">        message_id (str, optional): The message ID. Defaults to None, then the ChatState user message id is used.</span>
<span class="sd">        references (list[ContentReference]): list of ContentReference objects. Defaults to None.</span>
<span class="sd">        debug_info (dict[str, Any]]]): Debug information. Defaults to {}.</span>
<span class="sd">        set_completed_at (bool, optional): Whether to set the completedAt field with the current date time. Defaults to False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ChatMessage: The modified message.</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the modification fails.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">modify_message_async</span><span class="p">(</span>
        <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
        <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
        <span class="n">assistant_message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_assistant_message_id</span><span class="p">,</span>
        <span class="n">chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span>
        <span class="n">user_message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_message_id</span><span class="p">,</span>
        <span class="n">user_message_text</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_message_text</span><span class="p">,</span>
        <span class="n">assistant</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">,</span>
        <span class="n">references</span><span class="o">=</span><span class="n">references</span><span class="p">,</span>
        <span class="n">debug_info</span><span class="o">=</span><span class="n">debug_info</span><span class="p">,</span>
        <span class="n">message_id</span><span class="o">=</span><span class="n">message_id</span><span class="p">,</span>
        <span class="n">set_completed_at</span><span class="o">=</span><span class="n">set_completed_at</span> <span class="ow">or</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.replace_debug_info" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">replace_debug_info</span><span class="p">(</span><span class="n">debug_info</span><span class="p">)</span></code>

<a href="#unique_toolkit.services.chat_service.ChatService.replace_debug_info" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Replace the debug information in the last user message</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>debug_info</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The new debug information.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">replace_debug_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">debug_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Replace the debug information in the last user message</span>

<span class="sd">    Args:</span>
<span class="sd">        debug_info (dict): The new debug information.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">modify_message</span><span class="p">(</span>
        <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
        <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
        <span class="n">assistant_message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_assistant_message_id</span><span class="p">,</span>
        <span class="n">chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span>
        <span class="n">user_message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_message_id</span><span class="p">,</span>
        <span class="n">user_message_text</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_message_text</span><span class="p">,</span>
        <span class="n">assistant</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">debug_info</span><span class="o">=</span><span class="n">debug_info</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.stream_complete_async" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">stream_complete_async</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="n">model_name</span><span class="p">,</span> <span class="n">content_chunks</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">debug_info</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">temperature</span><span class="o">=</span><span class="n">DEFAULT_COMPLETE_TEMPERATURE</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">DEFAULT_COMPLETE_TIMEOUT</span><span class="p">,</span> <span class="n">tools</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">start_text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">tool_choice</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">other_options</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#unique_toolkit.services.chat_service.ChatService.stream_complete_async" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Stream a completion in the chat session asynchronously.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1442</span>
<span class="normal">1443</span>
<span class="normal">1444</span>
<span class="normal">1445</span>
<span class="normal">1446</span>
<span class="normal">1447</span>
<span class="normal">1448</span>
<span class="normal">1449</span>
<span class="normal">1450</span>
<span class="normal">1451</span>
<span class="normal">1452</span>
<span class="normal">1453</span>
<span class="normal">1454</span>
<span class="normal">1455</span>
<span class="normal">1456</span>
<span class="normal">1457</span>
<span class="normal">1458</span>
<span class="normal">1459</span>
<span class="normal">1460</span>
<span class="normal">1461</span>
<span class="normal">1462</span>
<span class="normal">1463</span>
<span class="normal">1464</span>
<span class="normal">1465</span>
<span class="normal">1466</span>
<span class="normal">1467</span>
<span class="normal">1468</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@deprecated</span><span class="p">(</span><span class="s2">&quot;use complete_with_references_async instead.&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">stream_complete_async</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">messages</span><span class="p">:</span> <span class="n">LanguageModelMessages</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="n">ChatCompletionMessageParam</span><span class="p">],</span>
    <span class="n">model_name</span><span class="p">:</span> <span class="n">LanguageModelName</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">content_chunks</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentChunk</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">debug_info</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">temperature</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_COMPLETE_TEMPERATURE</span><span class="p">,</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">DEFAULT_COMPLETE_TIMEOUT</span><span class="p">,</span>
    <span class="n">tools</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">LanguageModelTool</span> <span class="o">|</span> <span class="n">LanguageModelToolDescription</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">start_text</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">tool_choice</span><span class="p">:</span> <span class="n">ChatCompletionToolChoiceOptionParam</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">other_options</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LanguageModelStreamResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Stream a completion in the chat session asynchronously.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">complete_with_references_async</span><span class="p">(</span>
        <span class="n">messages</span><span class="o">=</span><span class="n">messages</span><span class="p">,</span>
        <span class="n">model_name</span><span class="o">=</span><span class="n">model_name</span><span class="p">,</span>
        <span class="n">content_chunks</span><span class="o">=</span><span class="n">content_chunks</span><span class="p">,</span>
        <span class="n">debug_info</span><span class="o">=</span><span class="n">debug_info</span><span class="p">,</span>
        <span class="n">temperature</span><span class="o">=</span><span class="n">temperature</span><span class="p">,</span>
        <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
        <span class="n">tools</span><span class="o">=</span><span class="n">tools</span><span class="p">,</span>
        <span class="n">start_text</span><span class="o">=</span><span class="n">start_text</span><span class="p">,</span>
        <span class="n">tool_choice</span><span class="o">=</span><span class="n">tool_choice</span><span class="p">,</span>
        <span class="n">other_options</span><span class="o">=</span><span class="n">other_options</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.update_assistant_message_execution" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_assistant_message_execution</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">seconds_remaining</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">percentage_completed</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#unique_toolkit.services.chat_service.ChatService.update_assistant_message_execution" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Updates the message execution for the current assistant message synchronously.</p>
<p>This is a convenience method that uses the current assistant message ID.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>status</code>
            </td>
            <td>
                  <code><span title="unique_toolkit.chat.schemas.MessageExecutionUpdateStatus">MessageExecutionUpdateStatus</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated status (COMPLETED or FAILED). Defaults to None</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>seconds_remaining</code>
            </td>
            <td>
                  <code><span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Updated estimated seconds remaining</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>percentage_completed</code>
            </td>
            <td>
                  <code><span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Updated percentage of completion (0-100)</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>MessageExecution</code></td>            <td>
                  <code><span title="unique_toolkit.chat.schemas.MessageExecution">MessageExecution</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated message execution</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the update fails</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1291</span>
<span class="normal">1292</span>
<span class="normal">1293</span>
<span class="normal">1294</span>
<span class="normal">1295</span>
<span class="normal">1296</span>
<span class="normal">1297</span>
<span class="normal">1298</span>
<span class="normal">1299</span>
<span class="normal">1300</span>
<span class="normal">1301</span>
<span class="normal">1302</span>
<span class="normal">1303</span>
<span class="normal">1304</span>
<span class="normal">1305</span>
<span class="normal">1306</span>
<span class="normal">1307</span>
<span class="normal">1308</span>
<span class="normal">1309</span>
<span class="normal">1310</span>
<span class="normal">1311</span>
<span class="normal">1312</span>
<span class="normal">1313</span>
<span class="normal">1314</span>
<span class="normal">1315</span>
<span class="normal">1316</span>
<span class="normal">1317</span>
<span class="normal">1318</span>
<span class="normal">1319</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">update_assistant_message_execution</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">status</span><span class="p">:</span> <span class="n">MessageExecutionUpdateStatus</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">seconds_remaining</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">percentage_completed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MessageExecution</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Updates the message execution for the current assistant message synchronously.</span>

<span class="sd">    This is a convenience method that uses the current assistant message ID.</span>

<span class="sd">    Args:</span>
<span class="sd">        status (MessageExecutionUpdateStatus | None): The updated status (COMPLETED or FAILED). Defaults to None</span>
<span class="sd">        seconds_remaining (int | None): Updated estimated seconds remaining</span>
<span class="sd">        percentage_completed (int | None): Updated percentage of completion (0-100)</span>

<span class="sd">    Returns:</span>
<span class="sd">        MessageExecution: The updated message execution</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the update fails</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">update_message_execution</span><span class="p">(</span>
        <span class="n">message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_assistant_message_id</span><span class="p">,</span>
        <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">,</span>
        <span class="n">seconds_remaining</span><span class="o">=</span><span class="n">seconds_remaining</span><span class="p">,</span>
        <span class="n">percentage_completed</span><span class="o">=</span><span class="n">percentage_completed</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.update_assistant_message_execution_async" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_assistant_message_execution_async</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">seconds_remaining</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">percentage_completed</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#unique_toolkit.services.chat_service.ChatService.update_assistant_message_execution_async" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Updates the message execution for the current assistant message asynchronously.</p>
<p>This is a convenience method that uses the current assistant message ID.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>status</code>
            </td>
            <td>
                  <code><span title="unique_toolkit.chat.schemas.MessageExecutionUpdateStatus">MessageExecutionUpdateStatus</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated status (COMPLETED or FAILED). Defaults to None</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>seconds_remaining</code>
            </td>
            <td>
                  <code><span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Updated estimated seconds remaining</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>percentage_completed</code>
            </td>
            <td>
                  <code><span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Updated percentage of completion (0-100)</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>MessageExecution</code></td>            <td>
                  <code><span title="unique_toolkit.chat.schemas.MessageExecution">MessageExecution</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated message execution</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the update fails</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1321</span>
<span class="normal">1322</span>
<span class="normal">1323</span>
<span class="normal">1324</span>
<span class="normal">1325</span>
<span class="normal">1326</span>
<span class="normal">1327</span>
<span class="normal">1328</span>
<span class="normal">1329</span>
<span class="normal">1330</span>
<span class="normal">1331</span>
<span class="normal">1332</span>
<span class="normal">1333</span>
<span class="normal">1334</span>
<span class="normal">1335</span>
<span class="normal">1336</span>
<span class="normal">1337</span>
<span class="normal">1338</span>
<span class="normal">1339</span>
<span class="normal">1340</span>
<span class="normal">1341</span>
<span class="normal">1342</span>
<span class="normal">1343</span>
<span class="normal">1344</span>
<span class="normal">1345</span>
<span class="normal">1346</span>
<span class="normal">1347</span>
<span class="normal">1348</span>
<span class="normal">1349</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">update_assistant_message_execution_async</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">status</span><span class="p">:</span> <span class="n">MessageExecutionUpdateStatus</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">seconds_remaining</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">percentage_completed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MessageExecution</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Updates the message execution for the current assistant message asynchronously.</span>

<span class="sd">    This is a convenience method that uses the current assistant message ID.</span>

<span class="sd">    Args:</span>
<span class="sd">        status (MessageExecutionUpdateStatus | None): The updated status (COMPLETED or FAILED). Defaults to None</span>
<span class="sd">        seconds_remaining (int | None): Updated estimated seconds remaining</span>
<span class="sd">        percentage_completed (int | None): Updated percentage of completion (0-100)</span>

<span class="sd">    Returns:</span>
<span class="sd">        MessageExecution: The updated message execution</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the update fails</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">update_message_execution_async</span><span class="p">(</span>
        <span class="n">message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_assistant_message_id</span><span class="p">,</span>
        <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">,</span>
        <span class="n">seconds_remaining</span><span class="o">=</span><span class="n">seconds_remaining</span><span class="p">,</span>
        <span class="n">percentage_completed</span><span class="o">=</span><span class="n">percentage_completed</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.update_debug_info_async" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_debug_info_async</span><span class="p">(</span><span class="n">debug_info</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#unique_toolkit.services.chat_service.ChatService.update_debug_info_async" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Updates the debug information for the chat session.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>debug_info</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The new debug information.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">update_debug_info_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">debug_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Updates the debug information for the chat session.</span>

<span class="sd">    Args:</span>
<span class="sd">        debug_info (dict): The new debug information.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">modify_message_async</span><span class="p">(</span>
        <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
        <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
        <span class="n">assistant_message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_assistant_message_id</span><span class="p">,</span>
        <span class="n">chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span>
        <span class="n">user_message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_message_id</span><span class="p">,</span>
        <span class="n">user_message_text</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_message_text</span><span class="p">,</span>
        <span class="n">assistant</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">debug_info</span><span class="o">=</span><span class="n">debug_info</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.update_message_execution" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_message_execution</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">message_id</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">seconds_remaining</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">percentage_completed</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">progress_title</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#unique_toolkit.services.chat_service.ChatService.update_message_execution" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Updates a message execution synchronously.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>message_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the message to update execution for</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>status</code>
            </td>
            <td>
                  <code><span title="unique_toolkit.chat.schemas.MessageExecutionUpdateStatus">MessageExecutionUpdateStatus</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated status (COMPLETED or FAILED). Defaults to None</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>seconds_remaining</code>
            </td>
            <td>
                  <code><span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Updated estimated seconds remaining</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>percentage_completed</code>
            </td>
            <td>
                  <code><span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Updated percentage of completion (0-100)</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>progress_title</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The title of the progress bar. If not provided, the title of the last message log is taken.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>MessageExecution</code></td>            <td>
                  <code><span title="unique_toolkit.chat.schemas.MessageExecution">MessageExecution</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated message execution</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the update fails</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1113</span>
<span class="normal">1114</span>
<span class="normal">1115</span>
<span class="normal">1116</span>
<span class="normal">1117</span>
<span class="normal">1118</span>
<span class="normal">1119</span>
<span class="normal">1120</span>
<span class="normal">1121</span>
<span class="normal">1122</span>
<span class="normal">1123</span>
<span class="normal">1124</span>
<span class="normal">1125</span>
<span class="normal">1126</span>
<span class="normal">1127</span>
<span class="normal">1128</span>
<span class="normal">1129</span>
<span class="normal">1130</span>
<span class="normal">1131</span>
<span class="normal">1132</span>
<span class="normal">1133</span>
<span class="normal">1134</span>
<span class="normal">1135</span>
<span class="normal">1136</span>
<span class="normal">1137</span>
<span class="normal">1138</span>
<span class="normal">1139</span>
<span class="normal">1140</span>
<span class="normal">1141</span>
<span class="normal">1142</span>
<span class="normal">1143</span>
<span class="normal">1144</span>
<span class="normal">1145</span>
<span class="normal">1146</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">update_message_execution</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">status</span><span class="p">:</span> <span class="n">MessageExecutionUpdateStatus</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">seconds_remaining</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">percentage_completed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">progress_title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MessageExecution</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Updates a message execution synchronously.</span>

<span class="sd">    Args:</span>
<span class="sd">        message_id (str): The ID of the message to update execution for</span>
<span class="sd">        status (MessageExecutionUpdateStatus | None): The updated status (COMPLETED or FAILED). Defaults to None</span>
<span class="sd">        seconds_remaining (int | None): Updated estimated seconds remaining</span>
<span class="sd">        percentage_completed (int | None): Updated percentage of completion (0-100)</span>
<span class="sd">        progress_title (str | None): The title of the progress bar. If not provided, the title of the last message log is taken.</span>

<span class="sd">    Returns:</span>
<span class="sd">        MessageExecution: The updated message execution</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the update fails</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">update_message_execution</span><span class="p">(</span>
        <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
        <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
        <span class="n">message_id</span><span class="o">=</span><span class="n">message_id</span><span class="p">,</span>
        <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">,</span>
        <span class="n">seconds_remaining</span><span class="o">=</span><span class="n">seconds_remaining</span><span class="p">,</span>
        <span class="n">percentage_completed</span><span class="o">=</span><span class="n">percentage_completed</span><span class="p">,</span>
        <span class="n">progress_title</span><span class="o">=</span><span class="n">progress_title</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.update_message_execution_async" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_message_execution_async</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">message_id</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">seconds_remaining</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">percentage_completed</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">progress_title</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#unique_toolkit.services.chat_service.ChatService.update_message_execution_async" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Updates a message execution asynchronously.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>message_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the message to update execution for</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>status</code>
            </td>
            <td>
                  <code><span title="unique_toolkit.chat.schemas.MessageExecutionUpdateStatus">MessageExecutionUpdateStatus</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated status (COMPLETED or FAILED). Defaults to None</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>seconds_remaining</code>
            </td>
            <td>
                  <code><span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Updated estimated seconds remaining</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>percentage_completed</code>
            </td>
            <td>
                  <code><span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Updated percentage of completion (0-100)</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>progress_title</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The title of the progress bar. If not provided, the title of the last message log is taken.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>MessageExecution</code></td>            <td>
                  <code><span title="unique_toolkit.chat.schemas.MessageExecution">MessageExecution</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated message execution</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the update fails</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1148</span>
<span class="normal">1149</span>
<span class="normal">1150</span>
<span class="normal">1151</span>
<span class="normal">1152</span>
<span class="normal">1153</span>
<span class="normal">1154</span>
<span class="normal">1155</span>
<span class="normal">1156</span>
<span class="normal">1157</span>
<span class="normal">1158</span>
<span class="normal">1159</span>
<span class="normal">1160</span>
<span class="normal">1161</span>
<span class="normal">1162</span>
<span class="normal">1163</span>
<span class="normal">1164</span>
<span class="normal">1165</span>
<span class="normal">1166</span>
<span class="normal">1167</span>
<span class="normal">1168</span>
<span class="normal">1169</span>
<span class="normal">1170</span>
<span class="normal">1171</span>
<span class="normal">1172</span>
<span class="normal">1173</span>
<span class="normal">1174</span>
<span class="normal">1175</span>
<span class="normal">1176</span>
<span class="normal">1177</span>
<span class="normal">1178</span>
<span class="normal">1179</span>
<span class="normal">1180</span>
<span class="normal">1181</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">update_message_execution_async</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">status</span><span class="p">:</span> <span class="n">MessageExecutionUpdateStatus</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">seconds_remaining</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">percentage_completed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">progress_title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MessageExecution</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Updates a message execution asynchronously.</span>

<span class="sd">    Args:</span>
<span class="sd">        message_id (str): The ID of the message to update execution for</span>
<span class="sd">        status (MessageExecutionUpdateStatus | None): The updated status (COMPLETED or FAILED). Defaults to None</span>
<span class="sd">        seconds_remaining (int | None): Updated estimated seconds remaining</span>
<span class="sd">        percentage_completed (int | None): Updated percentage of completion (0-100)</span>
<span class="sd">        progress_title (str | None): The title of the progress bar. If not provided, the title of the last message log is taken.</span>

<span class="sd">    Returns:</span>
<span class="sd">        MessageExecution: The updated message execution</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the update fails</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">update_message_execution_async</span><span class="p">(</span>
        <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
        <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
        <span class="n">message_id</span><span class="o">=</span><span class="n">message_id</span><span class="p">,</span>
        <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">,</span>
        <span class="n">seconds_remaining</span><span class="o">=</span><span class="n">seconds_remaining</span><span class="p">,</span>
        <span class="n">percentage_completed</span><span class="o">=</span><span class="n">percentage_completed</span><span class="p">,</span>
        <span class="n">progress_title</span><span class="o">=</span><span class="n">progress_title</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.update_message_log" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_message_log</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">message_log_id</span><span class="p">,</span> <span class="n">order</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">details</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">uncited_references</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">references</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#unique_toolkit.services.chat_service.ChatService.update_message_log" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Updates a message log synchronously.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>message_log_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the message log to update</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>order</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The order/sequence number (required)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>text</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated log text content</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>status</code>
            </td>
            <td>
                  <code><span title="unique_toolkit.chat.schemas.MessageLogStatus">MessageLogStatus</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated status</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>details</code>
            </td>
            <td>
                  <code><span title="unique_toolkit.chat.schemas.MessageLogDetails">MessageLogDetails</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Updated additional details</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>uncited_references</code>
            </td>
            <td>
                  <code><span title="unique_toolkit.chat.schemas.MessageLogUncitedReferences">MessageLogUncitedReferences</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Updated uncited references</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>references</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="unique_toolkit.content.schemas.ContentReference">ContentReference</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Updated list of references</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>MessageLog</code></td>            <td>
                  <code><span title="unique_toolkit.chat.schemas.MessageLog">MessageLog</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated message log</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the update fails</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">820</span>
<span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span>
<span class="normal">854</span>
<span class="normal">855</span>
<span class="normal">856</span>
<span class="normal">857</span>
<span class="normal">858</span>
<span class="normal">859</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">update_message_log</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">message_log_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">order</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">text</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">status</span><span class="p">:</span> <span class="n">MessageLogStatus</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">details</span><span class="p">:</span> <span class="n">MessageLogDetails</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">uncited_references</span><span class="p">:</span> <span class="n">MessageLogUncitedReferences</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">references</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentReference</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MessageLog</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Updates a message log synchronously.</span>

<span class="sd">    Args:</span>
<span class="sd">        message_log_id (str): The ID of the message log to update</span>
<span class="sd">        order (int): The order/sequence number (required)</span>
<span class="sd">        text (str | None): The updated log text content</span>
<span class="sd">        status (MessageLogStatus | None): The updated status</span>
<span class="sd">        details (MessageLogDetails | None): Updated additional details</span>
<span class="sd">        uncited_references (MessageLogUncitedReferences | None): Updated uncited references</span>
<span class="sd">        references (list[ContentReference] | None): Updated list of references</span>

<span class="sd">    Returns:</span>
<span class="sd">        MessageLog: The updated message log</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the update fails</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">update_message_log</span><span class="p">(</span>
        <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
        <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
        <span class="n">message_log_id</span><span class="o">=</span><span class="n">message_log_id</span><span class="p">,</span>
        <span class="n">order</span><span class="o">=</span><span class="n">order</span><span class="p">,</span>
        <span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>
        <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">,</span>
        <span class="n">details</span><span class="o">=</span><span class="n">details</span><span class="p">,</span>
        <span class="n">uncited_references</span><span class="o">=</span><span class="n">uncited_references</span><span class="p">,</span>
        <span class="n">references</span><span class="o">=</span><span class="n">references</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="unique_toolkit.services.chat_service.ChatService.update_message_log_async" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_message_log_async</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">message_log_id</span><span class="p">,</span> <span class="n">order</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">details</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">uncited_references</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">references</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#unique_toolkit.services.chat_service.ChatService.update_message_log_async" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Updates a message log asynchronously.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>message_log_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the message log to update</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>order</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The order/sequence number (required)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>text</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated log text content</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>status</code>
            </td>
            <td>
                  <code><span title="unique_toolkit.chat.schemas.MessageLogStatus">MessageLogStatus</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated status</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>details</code>
            </td>
            <td>
                  <code><span title="unique_toolkit.chat.schemas.MessageLogDetails">MessageLogDetails</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Updated additional details</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>uncited_references</code>
            </td>
            <td>
                  <code><span title="unique_toolkit.chat.schemas.MessageLogUncitedReferences">MessageLogUncitedReferences</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Updated uncited references</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>references</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="unique_toolkit.content.schemas.ContentReference">ContentReference</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Updated list of references</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>MessageLog</code></td>            <td>
                  <code><span title="unique_toolkit.chat.schemas.MessageLog">MessageLog</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated message log</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the update fails</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>unique_toolkit/services/chat_service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span>
<span class="normal">864</span>
<span class="normal">865</span>
<span class="normal">866</span>
<span class="normal">867</span>
<span class="normal">868</span>
<span class="normal">869</span>
<span class="normal">870</span>
<span class="normal">871</span>
<span class="normal">872</span>
<span class="normal">873</span>
<span class="normal">874</span>
<span class="normal">875</span>
<span class="normal">876</span>
<span class="normal">877</span>
<span class="normal">878</span>
<span class="normal">879</span>
<span class="normal">880</span>
<span class="normal">881</span>
<span class="normal">882</span>
<span class="normal">883</span>
<span class="normal">884</span>
<span class="normal">885</span>
<span class="normal">886</span>
<span class="normal">887</span>
<span class="normal">888</span>
<span class="normal">889</span>
<span class="normal">890</span>
<span class="normal">891</span>
<span class="normal">892</span>
<span class="normal">893</span>
<span class="normal">894</span>
<span class="normal">895</span>
<span class="normal">896</span>
<span class="normal">897</span>
<span class="normal">898</span>
<span class="normal">899</span>
<span class="normal">900</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">update_message_log_async</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">message_log_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">order</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">text</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">status</span><span class="p">:</span> <span class="n">MessageLogStatus</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">details</span><span class="p">:</span> <span class="n">MessageLogDetails</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">uncited_references</span><span class="p">:</span> <span class="n">MessageLogUncitedReferences</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">references</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentReference</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MessageLog</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Updates a message log asynchronously.</span>

<span class="sd">    Args:</span>
<span class="sd">        message_log_id (str): The ID of the message log to update</span>
<span class="sd">        order (int): The order/sequence number (required)</span>
<span class="sd">        text (str | None): The updated log text content</span>
<span class="sd">        status (MessageLogStatus | None): The updated status</span>
<span class="sd">        details (MessageLogDetails | None): Updated additional details</span>
<span class="sd">        uncited_references (MessageLogUncitedReferences | None): Updated uncited references</span>
<span class="sd">        references (list[ContentReference] | None): Updated list of references</span>

<span class="sd">    Returns:</span>
<span class="sd">        MessageLog: The updated message log</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the update fails</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">update_message_log_async</span><span class="p">(</span>
        <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
        <span class="n">company_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_company_id</span><span class="p">,</span>
        <span class="n">message_log_id</span><span class="o">=</span><span class="n">message_log_id</span><span class="p">,</span>
        <span class="n">order</span><span class="o">=</span><span class="n">order</span><span class="p">,</span>
        <span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>
        <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">,</span>
        <span class="n">details</span><span class="o">=</span><span class="n">details</span><span class="p">,</span>
        <span class="n">uncited_references</span><span class="o">=</span><span class="n">uncited_references</span><span class="p">,</span>
        <span class="n">references</span><span class="o">=</span><span class="n">references</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js"></script>
        <script src="../../search/main.js"></script>
        <script src="../../js/version-select.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
